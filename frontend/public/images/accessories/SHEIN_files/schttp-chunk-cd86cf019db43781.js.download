"use strict";(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[7885],{16871:(e,n,o)=>{o.d(n,{I:()=>l});var t=o(383112),r=o(177279);let i,a=Number(gbCommonInfo.CSRFTOEKN_MAX_RETRIES);Number.isNaN(a)&&(a=0);let s=500;"undefined"!=typeof window&&window.localStorage.getItem("csrfToken_delay")&&(s=Number(window.localStorage.getItem("csrfToken_delay")));let d=a;async function u(e){const n=async()=>{if(d>0)return await(n=s,new Promise((e=>setTimeout(e,n)))),d--,u(e);var n};try{const o=await Promise.race([e(),new Promise(((e,n)=>setTimeout((()=>n(new Error("Timeout"))),6e3)))]);return o||n()}catch(e){return n()}}function l(){return i||("undefined"!=typeof window&&(i=u((()=>t.A.updateXCsrfToken())).catch((e=>{var n;r.Vc.logInfo({tag:"SHEIN_PC_COMMON_CSRF_TOKEN",message:"update_csrf_token_error",params:{scene:null===(n=gbCommonInfo)||void 0===n?void 0:n.templateType,retries:d,msgData:e}})})).finally((()=>{i=void 0}))),i||Promise.resolve())}},97001:(e,n,o)=>{o.d(n,{A:()=>u});var t=o(98544),r=o.n(t),i=o(665640);const a=[],s=[];function d(e){try{a.forEach((n=>e.interceptors.request.use(...n))),s.forEach((n=>e.interceptors.response.use(...n)))}catch(e){i.error("assignInterceptors error",e)}return e}"undefined"!=typeof window&&(r()._create=r().create,r().create=function(e){return d(r()._create(e))},d(r()));const u=r()},383112:(e,n,o)=>{o.d(n,{A:()=>u,u:()=>l});var t=o(97001),r=o(939021),i=o(656716),a=o(290165),s=o(348668);const d=(()=>{if("undefined"==typeof window)return t.A;const e={baseURL:gbCommonInfo.langPath,headers:{common:{"x-requested-with":"XMLHttpRequest"}},params:{_ver:"1.1.8",_lang:gbCommonInfo.appLanguage}};gbCommonInfo.csrf_token&&(e.headers.common["x-csrf-token"]=gbCommonInfo.csrf_token);const n=t.A.create(e);return n.updateXCsrfToken=async e=>{if(!e){const t=!0;let r=t?"/user-api/csrf/update":"/api/common/csrf/update";const i=await n({url:r,ignoreInterceptor:["csrf"],useBffApi:t}).catch((()=>({})));if(t){var o;if(0!=(null==i?void 0:i.code)||null==i||null===(o=i.info)||void 0===o||!o.updateCs)return!1;e=i.info.updateCs}else{if(!i.updateCs)return!1;e=i.updateCs}}return n.defaults.headers.common["x-csrf-token"]=e,gbCommonInfo.csrf_token=e,e},n.interceptors.request.use(i.PI),n.interceptors.request.use(i.WT),n.interceptors.request.use(i.zV),n.interceptors.request.use(i.S4),n.interceptors.request.use(i.Qo.hold),n.interceptors.request.use(i.IT.startRootSpan),n.interceptors.request.use(i.NI),n.interceptors.request.use(i.vF),n.interceptors.request.use(i.D7),n.interceptors.request.use(i.FZ),n.interceptors.request.use(s.iy),n.interceptors.request.use(i.fG),n.interceptors.response.use(i.eq),n.interceptors.response.use(i.X2.success,i.X2.error),n.interceptors.response.use(i.Gm),n.interceptors.response.use(i.Qo.replay(n)),n.interceptors.response.use((0,i.Qm)(n)),n.interceptors.response.use(i.t0),n.interceptors.response.use(i.Zw),n.interceptors.response.use(i.IT.success,i.IT.error),n.interceptors.response.use(i.ug),n.interceptors.response.use((e=>(r.A.httpIntercept(e.headers),e))),n.interceptors.response.use(i.XG),n.interceptors.response.use((e=>{var n,o;return null!==(n=e.config.schttp)&&void 0!==n&&n.getResponse||null!==(o=e.config)&&void 0!==o&&o.__fromBSLibs__?e:e.data}),(e=>{throw e})),window.schttp=n,n})(),u=d;function l(){d({url:"/user-api/setting/get_sample_config",method:"post",useBffApi:!0}).then((({code:e,info:n})=>{0===Number(e)&&(0,a.setLocalStorage)({key:"sky_eye_sample_control_config",value:n.skyEyeConfig||{},expire:36e5})}))}},656716:(e,n,o)=>{o.d(n,{o0:()=>A,fG:()=>J,vF:()=>Q,PI:()=>j,zV:()=>S,FZ:()=>X,X2:()=>F,S4:()=>N,Gm:()=>U,Qm:()=>x,Zw:()=>L,NI:()=>k,WT:()=>R,D7:()=>B,eq:()=>b,t0:()=>D,ug:()=>K,Qo:()=>V,IT:()=>H,XG:()=>$});var t=o(794103),r=o(246752),i=o(346443);const a={5501:"10011000",5502:"10011001",5503:"10011002",5510:"10011003",5511:"10011004",5512:"10011005",5520:"10011006"};var s=o(404266),d=o(98544),u=o.n(d),l=o(290165),c=o(275783),f=o(806365),m=o(383112),p=o(177279),g=o(476934),v=o(16871),_=o(92525),h=o(88685),w=o(721720),I=o(818356),y=o(665640);function b(e){var n;const o=null==e||null===(n=e.config)||void 0===n?void 0:n.baseURL,{data:{code:t="",info:r={}}={}}=e||{};if("836100"==t&&null!=o&&o.includes("/bff-api")&&null!=r&&r.attachment){let n={code:t,sub_code:r.sub_code,attachment:r.attachment};e.data=n}return e}const C=["GET","HEAD","OPTIONS"];async function S(e){var n,o;if(null!=e&&null!==(n=e.headers)&&void 0!==n&&n.common["x-csrf-token"])return e;if("on"===(null===(o=gbCommonInfo)||void 0===o?void 0:o.SHOULD_RENDER_CSRF_TOKEN_ON_SSR))return e;if(((null==e?void 0:e.ignoreInterceptor)||[]).indexOf("csrf")>-1)return e;const t=e.method||"GET";if(((null==e?void 0:e.csrfIgnoreMethods)||C).indexOf(t.toUpperCase())>-1)return e;if("undefined"==typeof window)return e;if("/api/common/csrf/update"===(null==e?void 0:e.url))return e;if("/user-api/csrf/update"===(null==e?void 0:e.url))return e;const r=(0,v.I)();return r&&(await r,e.headers.common["x-csrf-token"]=gbCommonInfo.csrf_token||""),e}function E(e,n={}){var o;"undefined"!=typeof window&&(null===(o=window.TPM)||void 0===o||o.run({marketing:"ClientAnalytics",method:"_defineTrack",params:{data:e,options:n}}))}function A(e){const n=function(e){var n;if("undefined"==typeof window||!window.AntiIn)return"";if(null===(n=gbCommonInfo)||void 0===n||!n.SYNC_ANTIIN_URLS.some((n=>e.includes(n))))return"";const o=window.AntiIn;return o._last?o._last:(o._calculating=o.syncGetAllEncrypted(o.Channel.PC,{collect_crosspage:gbCommonInfo.SYNC_ANTIIN_URLS_MORE.some((n=>e.includes(n))),version:gbCommonInfo.RISK_SDK_CONFIG.anti||""}),o._last=o._calculating,setTimeout((()=>o._last=void 0),200),o._calculating)}(e.url)||"",o={};return n&&(o["Anti-In"]=n),e.headers=Object.assign(o,e.headers),e}function R(e){return"undefined"==typeof window||_.default.get({key:"currency"}),e}async function k(e){const n=await async function(e){var n;if("undefined"==typeof window||!window.AntiIn)return"";if(null===(n=gbCommonInfo)||void 0===n||!n.ANTIIN_URLS.some((n=>e.includes(n))))return"";const o=window.AntiIn;return o._last?o._last:(o._calculating||(o._calculating=o.getAllEncrypted(o.Channel.PC,{collect_crosspage:gbCommonInfo.ANTIIN_URLS_MORE.some((n=>e.includes(n))),version:gbCommonInfo.RISK_SDK_CONFIG.anti||""}).then((e=>(o._calculating=null,setTimeout((()=>o._last=void 0),200),o._last=e))).catch((()=>""))),await o._calculating)}(e.url)||"",o={};return n&&(o["Anti-In"]=n),e.headers=Object.assign(o,e.headers),e}let T=!0;async function N(e){var n,o,t,r;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;e.customdata||(e.customdata={});let i=u().getUri(e);if(i.startsWith("http")){if(!i.startsWith(location.origin))return e;i=i.replace(location.origin,"")}let a="";const s=Date.now();e.customdata.requestStartTime=s,e.customdata.subUrl=null===(n=i.split("?"))||void 0===n?void 0:n[0],e.customdata.sigUrl=i;let d=(null===(o=i.split("?"))||void 0===o||null===(t=o[1])||void 0===t?void 0:t.replace(/'/g,"%27"))||"";var l,c;d?i=(null===(l=i.split("?"))||void 0===l?void 0:l[0])+"?"+d:i=null===(c=i.split("?"))||void 0===c?void 0:c[0];if(null===(r=gbCommonInfo)||void 0===r||!r.OPEN_SIGNATURE)return e;try{a=await window._SHEIN_CALC_SIGNATURE_(i);let e="signature_compute_time";T&&(T=!1,e="signature_compute_time_first"),E({data:[{key_path:e,values:{num:100*(Date.now()-s)}}]},{random:.05})}catch(e){var f,m,p;if("undefined"!=typeof window&&"undefined"!=typeof gbCommonInfo)window.ErrorJs.sendError("error",`${null===(f=gbCommonInfo)||void 0===f||null===(m=f.REPORT_URL)||void 0===m?void 0:m.SA_REPORT_URL}/unusual`,{errorMark:"signature_compute_error",errorInfo:{stack:null==e?void 0:e.stack,message:null==e?void 0:e.message,sigFileName:null===(p=gbCommonInfo)||void 0===p?void 0:p.SIG_FILE_NAME,sigUrl:i}})}return e.headers["x-gw-auth"]=a,e}function U(e){var n,o;const t=Number(null==e||null===(n=e.data)||void 0===n?void 0:n.code),r=Number(null==e||null===(o=e.data)||void 0===o?void 0:o.sub_code);return 836e3===t&&5501===r&&location.reload(),e}let P=!1;function L(e){var n;return[/\/api\/user\/wishlist(?!\/((check\/good)|(group\/optional\/goods\/get)|(redpoint\/get)))/].some((n=>n.test(e.config.url)))&&void 0!==(null===(n=e.data)||void 0===n?void 0:n.code)&&(-4!=+e.data.code&&-2!=+e.data.code||(P||(P=!0,(0,i.L)({message:gbCommonInfo.language.SHEIN_KEY_PC_17753,type:"none",offset:186,onClose:()=>P=!1})),e.data.code=-1,e.data.originCode=-4)),e}function x(e){return function(n){var o,t,r;const i=(null===(o=n.data)||void 0===o?void 0:o.code)||"";return null!==(t=n.config)&&void 0!==t&&null!==(r=t.schttp)&&void 0!==r&&r.asyncCheckLogin&&["00101110","300206"].includes(""+i)&&e({method:"POST",url:"/api/user/auth/logout"}),n}}function D(e){var n;if(null!==(n=e.config.schttp)&&void 0!==n&&n.needLogin&&e.data&&(300206==+e.data.code||"need login"===e.data.msg||"00101110"==e.data.code)){try{o.e(50204).then(o.bind(o,650204)).then((({removeAuthUserInfo:e})=>{e()})).catch((e=>{y.log("forceLogin:"+e)}))}catch(e){y.log(e+"")}location.href=gbCommonInfo.langPath+"/user/auth/logout"}return e}function q(e){const n=(null==e?void 0:e["gateway-waf-reject"])||"";return["A001","A002","A004","A005-Challenge","A005-Block"].some((e=>n.includes(e)))&&!["A002-1"].some((e=>n.includes(e)))}function O(){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return!0;const e=navigator.userAgent,{USER_AGENT_BLACK_LIST:n=[]}=gbCommonInfo;return function(e,n){return n.some((n=>e.includes(n)))}(e,n)}const F={success:function(e){var n,o,t,i,s,d,u,l,c,f;if(null!=e&&null!==(n=e.config)&&void 0!==n&&null!==(o=n.schttp)&&void 0!==o&&o.apiLogSkip)return e;if((null==e||null===(t=e.config)||void 0===t||null===(i=t.customdata)||void 0===i?void 0:i.requestStartTime)>0){var m,v,_,h,w;const n=Date.now()-((null==e||null===(m=e.config)||void 0===m||null===(v=m.customdata)||void 0===v?void 0:v.requestStartTime)||0),o=(null==e||null===(_=e.config)||void 0===_?void 0:_.url)||"other";(0,g.F)(o,{responseTime:n}),E({resource:(null==e||null===(h=e.config)||void 0===h||null===(w=h.customdata)||void 0===w?void 0:w.subUrl)||"other",data:[{key_path:"request_time",values:{num:n}}]},{random:.05})}try{var I,b,C,S,A,R,k;if(q(null==e?void 0:e.headers)||O())return e;const{langPath:n=""}=gbCommonInfo,o=null!=e&&null!==(I=e.config)&&void 0!==I&&I.useBffApi?"bff_api_res_code_error":"api_res_code_error",t=(null==e||null===(b=e.config.customdata)||void 0===b?void 0:b.subUrl)||"other";var T,N;if(null!=(null===(C=e.data)||void 0===C?void 0:C.code)&&"0"!=e.data.code&&836100!=e.data.code)p.JY.metricCount({metric_name:o,tags:{siteuid:null===(T=gbCommonInfo)||void 0===T?void 0:T.SiteUID,errorCode:e.data.code,apiUrl:t.substring(n.length),hostname:location.hostname,referer:document.referer||""},message:(null===(N=e.data)||void 0===N?void 0:N.msg)||`${t}请求非0错误`},{immediate:!0});const r=null==e||null===(S=e.headers)||void 0===S||null===(A=S["site-uid"])||void 0===A?void 0:A.trim();if(!r||null===(R=gbCommonInfo)||void 0===R||!R.SiteUID)return e;var U,P,L;if(r!==(null===(k=gbCommonInfo)||void 0===k?void 0:k.SiteUID))p.JY.metricCount({metric_name:"bff_site_error",tags:{siteuid:null===(U=gbCommonInfo)||void 0===U?void 0:U.SiteUID,bffSiteuid:r||"other",apiUrl:(null===(P=e.config)||void 0===P||null===(L=P.customdata)||void 0===L?void 0:L.subUrl)||"other",hostname:location.hostname,referer:document.referer||""},message:"bff返回站点与当前请求站点不一致"},{immediate:!0})}catch(e){y.error(e)}try{if(r.A.sendReportForScHttp(e),!0==(836e3===Number(null==e||null===(s=e.data)||void 0===s?void 0:s.code)))E({resource:(null==e||null===(d=e.config)||void 0===d||null===(u=d.customdata)||void 0===u?void 0:u.subUrl)||"other",data:[{key_path:"request_error_signature",values:{status_code:String(a[Number(null==e||null===(l=e.data)||void 0===l?void 0:l.sub_code)]||0),info:{message:null==e||null===(c=e.config)||void 0===c||null===(f=c.customdata)||void 0===f?void 0:f.sigUrl}}}]},{immediate:!0})}catch(e){y.log(e)}try{var x,D;const n=null==e||null===(x=e.data)||void 0===x?void 0:x.code,o=null==e||null===(D=e.headers)||void 0===D?void 0:D["risk-id"];if(836100==n&&o){var F,G,M,V,H,K,B,X,$;const n={page_name:"page_risk_crawler_block",page_id:6407};null===(F=window)||void 0===F||F.sa("set","setPageData",n);const t=(null===(G=window)||void 0===G||null===(M=G.AntiIn)||void 0===M?void 0:M.syncGetAllEncrypted(null===(V=window)||void 0===V?void 0:V.AntiIn.Channel.PC))||null,r=encodeURIComponent(null==e||null===(H=e.request)||void 0===H?void 0:H.responseURL),i=(null===(K=window)||void 0===K?void 0:K.__ArmorToken)||(null===(B=window)||void 0===B?void 0:B.sessionStorage.getItem("armorToken"))||(null===(X=window)||void 0===X?void 0:X.localStorage.getItem("armorToken"))||null;null===($=window)||void 0===$||$.sa("send",{activity_name:"expose_risk_envinfo",activity_param:{origin_risk_id:o,anti_in:t,armortoken:i,risk_url:r,response:null==e?void 0:e.data}})}}catch(e){y.log(e)}return e},error:function(e){if(void 0!==(null==e?void 0:e.request)){var n,o,t;r.A.sendReportForScHttp(e),E({resource:(null==e||null===(n=e.config)||void 0===n||null===(o=n.customdata)||void 0===o?void 0:o.subUrl)||"other",data:[{key_path:"request_error",values:{status_code:`10010${null==e||null===(t=e.request)||void 0===t?void 0:t.status}`}}]},{immediate:!0});try{var i,a,s,d,u;if(q(null==e||null===(i=e.response)||void 0===i?void 0:i.headers)||O())throw e;const n=(null==e||null===(a=e.response)||void 0===a?void 0:a.status)||0;if(+n<1)throw e;const{langPath:o=""}=gbCommonInfo,t=null!=e&&null!==(s=e.config)&&void 0!==s&&s.useBffApi?"bff_api_request_status_error":"api_request_status_error",r=(null==e||null===(d=e.config.customdata)||void 0===d?void 0:d.subUrl)||"other";p.JY.metricCount({metric_name:t,tags:{siteuid:null===(u=gbCommonInfo)||void 0===u?void 0:u.SiteUID,apiUrl:r.substring(o.length),errorCode:n,hostname:location.hostname,referer:document.referer},message:null==e?void 0:e.message},{immediate:!0})}catch(e){y.error(e)}}try{var l,c,f;const n=null==e||null===(l=e.response)||void 0===l?void 0:l.status,o=null==e||null===(c=e.response)||void 0===c||null===(f=c.headers)||void 0===f?void 0:f["risk-id"];if(403==n&&o){var m,g,v,_,h,w,I,b,C,S;const n={page_name:"page_risk_crawler_block",page_id:6407};null===(m=window)||void 0===m||m.sa("set","setPageData",n);const t=(null===(g=window)||void 0===g||null===(v=g.AntiIn)||void 0===v?void 0:v.syncGetAllEncrypted(null===(_=window)||void 0===_?void 0:_.AntiIn.Channel.PC))||null,r=encodeURIComponent(null==e||null===(h=e.request)||void 0===h?void 0:h.responseURL),i=(null===(w=window)||void 0===w?void 0:w.__ArmorToken)||(null===(I=window)||void 0===I?void 0:I.sessionStorage.getItem("armorToken"))||(null===(b=window)||void 0===b?void 0:b.localStorage.getItem("armorToken"))||null;null===(C=window)||void 0===C||C.sa("send",{activity_name:"expose_risk_envinfo",activity_param:{origin_risk_id:o,anti_in:t,armortoken:i,risk_url:r,response:null==e||null===(S=e.response)||void 0===S?void 0:S.data}})}}catch(e){y.log(e)}throw e}},G={name:"rewriteSignature",active:()=>gbCommonInfo.OPEN_SIGNATURE&&("gray"===gbCommonInfo.NODE_SERVER_ENV||"production"===gbCommonInfo.NODE_SERVER_ENV),range:()=>!0,check:({data:e})=>836e3==(null==e?void 0:e.code)&&5511==(null==e?void 0:e.sub_code),fix:()=>window._SHEIN_SYNC_TIMESTAMP_(gbCommonInfo.langPath+"/_openapi_gateway_/timestamp")},M={name:"geetest",active:()=>!0,range:({url:e})=>[/\/cart\/update/,/\/cart\/add_mall/,/\/api\/comment\/abcCommentImages\/query/,/\/api\/comment\/abcCommentInfo\/query/,/\/goods_detail_nsw\/getCommentByAbc/,/\/goods_detail_nsw\/getCommentInfoByAbc/].some((n=>n.test(e))),check:({data:e})=>{var n;return 836100==(null==e?void 0:e.code)&&(null==e?void 0:e.sub_code)&&(null==e||null===(n=e.attachment)||void 0===n?void 0:n.cookie_duration)},fix:e=>{var n;return(0,s.lt)(e.data.sub_code,e.data.attachment.cookie_duration,null==e||null===(n=e.headers)||void 0===n?void 0:n["risk-id"]).then((e=>{if("success"!==e.status)throw"geetest_close"!==e.status&&(0,i.L)({type:"error",message:gbCommonInfo.language.SHEIN_KEY_PC_16509}),e}))}};const V=new class{constructor(e){(0,t.A)(this,"replayQueue",{}),(0,t.A)(this,"plugins",[]),(0,t.A)(this,"_seed",9999),"undefined"!=typeof window&&"undefined"!=typeof gbCommonInfo&&(e.forEach((({name:e,active:n,range:o,check:t,fix:r})=>{"string"==typeof e&&"function"==typeof n&&"function"==typeof o&&"function"==typeof t&&"function"==typeof r&&n()&&this.plugins.push({pluginName:e,range:o,check:t,fix:r,groupId:0})})),this.interceptor={hold:this._hold.bind(this),replay:e=>n=>this._replay(n,e)})}async _hold(e){return e.customdata||(e.customdata={}),e.customdata.groupId={},await Promise.all(this.plugins.map((async n=>{n.range(e)&&await n.holdingPromise,e.customdata.groupId[n.pluginName]=n.groupId}))),e}async _replay(e,n){var o,t;const r=null===(o=e.config)||void 0===o||null===(t=o.customdata)||void 0===t?void 0:t.groupId;if(!r)return e;const i=e.config.headers["x-gw-replay"];if(i)throw this.replayQueue[i](e),delete this.replayQueue[i],new Error("abandon from replay");let a=!0,s=!1;if(await Promise.all(this.plugins.map((async n=>{if(n.check(e)){a=!1;await this._doFix(e,r,n)||(s=!0)}}))),a||s)return e;const d=this._createUniqueId(),u=this._saveQueue(d);return n(this._resetConfig(d,e.config)).catch((e=>y.log("replay success: ","abandon from replay"===e.message))),u}async _doFix(e,n,o){return n[o.pluginName]!==o.groupId||o.holdingPromise?o.holdingPromise:o.holdingPromise=(async()=>{let n=!0;try{await o.fix(e)}catch(e){y.error(e),n=!1}return o.groupId++,delete o.holdingPromise,n})()}_createUniqueId(){return this._seed<1e3&&(this._seed=9999),this._seed--}_saveQueue(e){let n=null;const o=new Promise((e=>n=e));return this.replayQueue[e]=n,o}_resetConfig(e,n){return n.headers["x-gw-replay"]=e,delete n.headers["x-gw-auth"],delete n.headers["x-csrf-token"],n}}([G,M]).interceptor,H={_getRandomString(e,n="0123456789"){let o="";for(let t=e;t>0;--t)o+=n[Math.floor(Math.random()*n.length)];return o},_getRootSpanInfo(){const{_getRandomString:e}=H,n=`ff${e(14,"0123456789abcdef")}`.toString();return{traceID:n,spanID:n}},_sampleControlConfig:null,_getSampleRate(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return 0;if(["localhost","debug","gray"].includes(gbCommonInfo.NODE_SERVER_ENV))return 1;let n=null;if(H._sampleControlConfig){const{value:e,end:o}=H._sampleControlConfig;n=e,Date.now()>o&&(H._sampleControlConfig=null)}else{const e=(0,l.getLocalStorage)("sky_eye_sample_control_config");e&&(n=e,H._sampleControlConfig={value:e,end:Date.now()+18e5})}if(n){var o;const t=null===(o=n.apiMap)||void 0===o?void 0:o[e.url];return t?Number(t.prop):Number(n.prop)||.001}return"/user-api/setting/get_sample_config"!==e.url&&(0,m.u)(),.001},_getSampleFlag(e){const{_getSampleRate:n}=H;return Math.random()<n(e)?1:0},startRootSpan(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const{_getRootSpanInfo:n,_getSampleFlag:o}=H,{traceID:t}=n(),r=o(e);return e.headers["uber-trace-id"]=`${t}:${t}:0:${r}`,e},_buildTraceSpanData(e,n){var o,t,r,i,a;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo||!e||!n)return null;const{headers:s={},customdata:d={},method:u,url:l=""}=e,c=(null==s?void 0:s["uber-trace-id"])||"",[f="",,,m]=(null==c||null===(o=c.split)||void 0===o?void 0:o.call(c,":"))||[];if("1"!==m)return null;const p=null==d?void 0:d.requestStartTime,g=Date.now()-(p||0),{page_name:v}=window.getSaPageInfo||window.SaPageInfo||{},_=`${H._getSampleRate(e)}`,h="1"===_?"cons":"probabilistic",{headers:w}=n,I=(null==w?void 0:w["x-tracer-name"])||(null==l||null===(t=l.split)||void 0===t||null===(r=t.call(l,"?"))||void 0===r?void 0:r[0])||"/",{IS_RW:y,SERVER_TYPE:b="",NODE_SERVER_ENV:C=""}=gbCommonInfo,S=`${y?"romwe":"shein"}-PC-${b}-${C}`;return{traceID:f,spanID:f,parentID:"",startTime:p,duration:g,operationName:I,api:I,url:l||"",method:(null===(i=(a=u||"").toUpperCase)||void 0===i?void 0:i.call(a))||"",statusCode:n.status||504,ID:"fdf304b4-9e52-56e1-b9be-159baeafb0b9",host:S,page:v,authName:"",samplerType:h,samplerParam:_,spanKind:"client"}},success(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const{headers:n,config:o}=e||{};if(!n||!o)return e;if(null!=n&&n["x-recognize-cache"])return e;const t=H._buildTraceSpanData(o,e);return t?(E({data:[{key_path:"trace-span",values:{span_info:JSON.stringify(t)}}]},{random:1}),e):e},error(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)throw e;const{config:n,response:o}=e||{};if(!n)throw e;const{headers:t}=o||{};if(null!=t&&t["x-recognize-cache"])throw e;const r=H._buildTraceSpanData(n,o);if(!r)throw e;throw E({data:[{key_path:"trace-span",values:{span_info:JSON.stringify(r)}}]},{random:1}),e}};function K(e){if("undefined"!=typeof window){const n=e.headers,o=n["Client-Ipver"]||n["client-ipver"]||(null!=n&&n.get?null==n?void 0:n.get("Client-Ipver"):"")||"",t=n["Client-Ipaddr"]||n["client-ipaddr"]||(null!=n&&n.get?null==n?void 0:n.get("Client-Ipaddr"):"")||"";o&&(window.__CLIENT_IPVER__=o),t&&(window.__CLIENT_IPADDR__=t)}return e}function B(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;if(e.headers["x-oest"]=w.Lw.getEnptValue(),e.useBffApi){var n;const{langPath:o="",WEB_VERSION:t}=gbCommonInfo;if(e.baseURL=`${o}/bff-api`,e.headers.webVersion=t,null!==(n=e.url)&&void 0!==n&&n.startsWith("/ltspc/")&&(e.baseURL=`${o}/ltspc/bff-api`,e.headers["bff-source"]="shein;pc"),["debug","localhost","gray"].includes(gbCommonInfo.NODE_SERVER_ENV)){const{bffEnv:n}=gbCommonInfo;e.headers["bff-env"]=n,e.headers.sheindebug="676"}}if(e.useBffApi||e.__fromBSLibs__){const{xAdFlag:n,xAppId:o}=gbCommonInfo.xAdFlagObj||{},t=(0,l.getLocalStorage)("addressCookie")||{};o&&o!==_.default.get({key:"memberId"})?e.headers["x-ad-flag"]="":e.headers["x-ad-flag"]=n||"";(gbCommonInfo.X_ADDRESS_API_LIST||[]).some((n=>e.url.includes(n)))&&(0,I.A)({originUrl:e.url,message:"get xAdflag for bff xhr request",addressCookieMemberId:t.memberId||"",addressCookieAddressId:t.addressId||"",addressCookieAddrFromFlag:t.addrFromFlag||""})}return e}function X(e){if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const n=e.featureKey;if(!n)return e;if(!["post","POST"].includes(e.method))return e;const o=(0,h.Uo)(n);return o?(e.headers["hdata-c"]="ai","application/x-www-form-urlencoded"===e.headers["Content-Type"]?(e.data||(e.data={}),e.data&&"object"==typeof e.data?e.data.data_c={ai:o}:e.data&&"string"==typeof e.data&&(e.data=(0,f.J)(e.data),e.data.data_c=JSON.stringify({ai:o}),e.data=(0,c.r)({queryObj:e.data})),e):(e.data?e.data={...e.data||{},data_c:{ai:o}}:e.params={...e.params||{},data_c:{ai:o}},e)):e}function $(e){var n;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const o=null===(n=e.headers)||void 0===n?void 0:n["x-ad-flag-update"];return"CLEARKEY"===o?((0,l.removeLocalStorage)("addressCookie"),(0,l.removeLocalStorage)("address_cache"),gbCommonInfo.xAdFlagObj={}):o&&(gbCommonInfo.xAdFlagObj={xAdFlag:o,xAppId:_.default.get({key:"memberId"})||""}),e}function j(e){var n,o;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;if("1"!==(null==e||null===(n=e.headers)||void 0===n?void 0:n["x-sph"]))return e;const t=(null===(o=e.headers)||void 0===o?void 0:o.Accept)||"";if(t.includes("image/webp"))return e;let r=!1;try{r="true"===localStorage.getItem("RESOURCE_ADAPT__WEBP_SUPPORT")}catch(e){}return r?(e.headers||(e.headers={}),e.headers.Accept=t?`image/webp, ${t}`:"image/webp, application/json, text/plain, */*",e):e}function Q(e){let n=u().getUri(e);try{var o;if("undefined"==typeof window||"undefined"==typeof gbCommonInfo)return e;const{SiteUID:i,RISK_SDK_DOWNGRADE:a,RISK_SDK_CONFIG:s}=gbCommonInfo,d=(null==a||null===(o=a.infp)||void 0===o?void 0:o.siteuid)||[];if(d.includes("ALL")||d.includes(i))e.headers.armorToken="";else{var t,r;const o=(null==s||null===(t=s.spider)||void 0===t?void 0:t.siteuid)||[];(1==(null==s||null===(r=s.spider)||void 0===r?void 0:r.xhr)||o.includes(i))&&W(n)&&(e.headers.armorToken=Y())}}catch(e){var i,a,s;if("undefined"!=typeof window&&"undefined"!=typeof gbCommonInfo)window.ErrorJs.sendError("error",`${null===(i=gbCommonInfo)||void 0===i||null===(a=i.REPORT_URL)||void 0===a?void 0:a.SA_REPORT_URL}/unusual`,{errorMark:"armorToken_header_error",errorInfo:{stack:null==e?void 0:e.stack,message:null==e?void 0:e.message,sigFileName:null===(s=gbCommonInfo)||void 0===s?void 0:s.SIG_FILE_NAME,sigUrl:n}})}return e}const W=e=>{if(!/^http(s)?:\/\//.test(e))return!0;return!!new RegExp(`^http(s)?://${location.host}`).test(e)},Y=()=>{var e,n,o,t;return window.__ArmorToken||(window.__ArmorToken=(null===(e=window)||void 0===e||null===(n=e.AntiDevices)||void 0===n?void 0:n.getArmorToken())||(null===(o=window)||void 0===o||null===(t=o.localStorage)||void 0===t?void 0:t.getItem("armorToken"))||""),window.__ArmorToken};function J(e){const{NODE_SERVER_ENV:n=""}=gbCommonInfo;if("gray"!==n)return e;const o=(0,l.getLocalStorage)("tepATMark");if(o&&"0"!==o){const n=(0,l.getLocalStorage)("apiMockId");n&&(e.headers["api-mock-id"]=n)}return e}},827539:(e,n,o)=>{o.d(n,{f:()=>i});var t=o(383112),r=o(999556);function i({isAsync:e,opt:n,successCb:o,errorCb:i,completeCb:a}){e?(0,t.A)({...n}).then((e=>{o&&o(e)})).catch((e=>{i&&i(e)})).finally((e=>{a&&a(e)})):(0,r.A)({...n,success:e=>{o&&o(e)},error:e=>{i&&i(e)},complete:e=>{a&&a(e)}})}},999556:(e,n,o)=>{o.d(n,{A:()=>C});var t=o(97001),r=o(547436),i=o.n(r),a=o(993397),s=o.n(a),d=o(512656),u=o.n(d),l=o(35666),c=o.n(l),f=o(933125),m=o.n(f),p=o(880083),g=o.n(p),v=o(989681),_=o.n(v);function h(e,n){return e.data=c().call(n,e.data,e.headers,n.transformResponse),e}function w(e,n,o,t,r,a=!1){const s=[...e];for(;s.length;){const{fulfilled:e,rejected:d}=s[n](),u=a?d:e;if(u){try{r=u===h?u(r,o):u(r),a=!1}catch(e){r=e,a=!0}if("[object Promise]"===Object.prototype.toString.call(r)){r=new(i())("Promise is unsupported in synchronizeInstance","INTERCEPTOR_ILLEGAL",o,t,r),a=!0;break}}}return{payload:r,inCatch:a}}function I(e,n,o,t,r){const{success:i,error:a,complete:s}=n;if("function"==typeof i||"function"==typeof a){const{payload:s,inCatch:d}=w(e.interceptors.response.handlers,"shift",n,o,t,r);d?"function"==typeof a&&a(s):"function"==typeof i&&i(s)}"function"==typeof s&&s(o)}function y(e){return e.defaults.adapter=function(e){return async function(n){try{(n=>{const{payload:o,inCatch:t}=w(e.interceptors.request.handlers,"pop",n,null,n);if(t)return void I(e,n,null,o,!0);const r=(n=o).headers,a=n.responseType;let d=n.data;s().isFormData(d)&&s().isStandardBrowserEnv()&&delete r["Content-Type"];let l=new XMLHttpRequest;const c=u()(n.baseURL,n.url);l.open(n.method.toUpperCase(),m()(c,n.params,n.paramsSerializer),!1),"setRequestHeader"in l&&s().forEach(r,(function(e,n){void 0===d&&"content-type"===n.toLowerCase()?delete r[n]:l.setRequestHeader(n,e)})),s().isUndefined(n.withCredentials)||(l.withCredentials=!!n.withCredentials),a&&"json"!==a&&(l.responseType=n.responseType),d||(d=null);const f=_()(c);f&&-1===["http","https","file"].indexOf(f)?I(e,n,l,new(i())("Unsupported protocol "+f+":",i().ERR_BAD_REQUEST,n),!0):(l.send(d),function(){if(!l||4!==l.readyState)return;if(0===l.status&&(!l.responseURL||0!==l.responseURL.indexOf("file:")))return;const o="getAllResponseHeaders"in l?g()(l.getAllResponseHeaders()):null,t={data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:o,config:n,request:l};l.status>=200&&l.status<300||304===l.status?I(e,n,l,t):I(e,n,l,new(i())("Network Error",i().ERR_NETWORK,n,l,t),!0),l=null}())})(n)}catch(e){return{code:"-1",msg:"Unexpected Error in SyncXhrAdapter",error:e}}return{code:"0",msg:"SyncXhrAdapter Work Expectant"}}}(e),e.interceptors.request.forEach=e.interceptors.response.forEach=function(){},e.interceptors.response.handlers.unshift({fulfilled:h}),e}var b=o(656716);const C=(()=>{if("undefined"==typeof window)return t.A;const e=y(t.A.create({baseURL:gbCommonInfo.langPath,headers:{common:{"x-requested-with":"XMLHttpRequest"}},params:{_ver:"1.1.8",_lang:gbCommonInfo.appLanguage}}));return e.interceptors.request.use((e=>(e.headers["x-csrf-token"]=gbCommonInfo.csrf_token,e))),e.interceptors.request.use(b.o0),e.interceptors.request.use(b.vF),e.interceptors.request.use(b.D7),e.interceptors.request.use(b.fG),e.interceptors.response.use((0,b.Qm)(e)),e.interceptors.response.use(b.t0),e.interceptors.response.use(b.X2.success,b.X2.error),e.interceptors.response.use((e=>{var n;return null!==(n=e.config.schttp)&&void 0!==n&&n.getResponse?e:e.data}),(e=>{throw e})),window.schttpSync=e,e})()}}]);
//# sourceMappingURL=schttp-chunk-cd86cf019db43781.js.map