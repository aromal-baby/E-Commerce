(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[5626,31108,67439],{21302:(e,t,o)=>{"use strict";o.d(t,{Ct:()=>c,YZ:()=>r,pW:()=>a,xo:()=>s,yJ:()=>l});var n=o(297397),i=o(665640);function a(){let e=!1;["transit","email_unbind","credentials","/risk/challenge","/iframe_login","/user/privacy_request_survey","/user/privacy_request_verify","/user/privacy_request_apply"].forEach((t=>{location.pathname.indexOf(t)>-1&&(e=!0)}));let t="";if(parent!==window)try{t=parent.location.href}catch(e){t=document.referrer}return["https://ccc-test01.biz.sheincorp.cn","https://ccc-test02.biz.sheincorp.cn","https://ccc-store-test01.biz.sheincorp.cn","https://ccc-store-test02.biz.sheincorp.cn","https://ccc-gray01.biz.sheincorp.cn","https://ccc-gray02.biz.sheincorp.cn","https://ccc-store-gray01.shein.com","https://ccc-store-gray02.shein.com","https://ccc.biz.sheincorp.cn","https://ccc-store.shein.com"].some((e=>-1!=t.indexOf(e)))&&(e=!0),e}const r=e=>e&&Date.now()-e<864e5,s=()=>{var e,t;if("undefined"==typeof window)return!1;const o=(null===(e=window)||void 0===e||null===(t=e.SaPageInfo)||void 0===t?void 0:t.page_name)||"others";try{var a,r;return!(null===(a=window.gbCommonInfo)||void 0===a||null===(r=a.globalPopupABT)||void 0===r||!r.isNew)}catch(e){return i.error("判断弹窗版本失败:",e),n.A.metricGlobalPopupIsNew({page:o,is_new:"3"}),!1}},c=(...e)=>{0},l=(...e)=>{0}},72656:(e,t,o)=>{var n=o(387588),i=o(977809).default;class a{constructor(){i(this,"prefix","static_"),i(this,"regExps",[/^https:\/\/common\.ltwebstatic\.com\/dist_bundle\/.+\/(.+\.js)$/]),i(this,"originQueue",{}),i(this,"resourceQueue",{}),i(this,"options",{random:.1,immediate:!0})}push(e){"string"==typeof(null==e?void 0:e.name)&&this.regExps.some((t=>e.name.match(t)))&&(this._pushOrigin(e),this._pushResource(e))}_pushOrigin(e){const t=new n(e.name).origin;if(this.originQueue[t])return;const o=parseInt(e.domainLookupEnd-e.domainLookupStart),i=parseInt(e.connectEnd-e.connectStart);this.originQueue[t]={resource:t,data:[{key_path:this.prefix+"dnst",values:{num:o}},{key_path:this.prefix+"tcpt",values:{num:i}}]}}_pushResource(e){const t=e.name;if(this.resourceQueue[t])return;const o=parseInt(e.duration);this.resourceQueue[t]={resource:t,data:[{key_path:this.prefix+"download_duration",values:{num:o}}]}}send(){Object.keys(this.originQueue).forEach((e=>{var t;return null===(t=window.TPM)||void 0===t?void 0:t.runImmediate({marketing:"ClientAnalytics",method:"_defineTrack",params:{data:this.originQueue[e],options:this.options}})})),Object.keys(this.resourceQueue).forEach((e=>{var t;return null===(t=window.TPM)||void 0===t?void 0:t.runImmediate({marketing:"ClientAnalytics",method:"_defineTrack",params:{data:this.resourceQueue[e],options:this.options}})}))}}window.addEventListener("TPM_SDK_Loaded",(()=>{const e=new a;performance.getEntriesByType("resource").forEach((t=>{e.push(t)})),e.send()}))},105113:(e,t,o)=>{"use strict";o.d(t,{m:()=>s});var n=o(383112),i=o(290165),a=o(632079),r=o(111588);const s={data:{default_country:"",fetched_default_country:!1},update_top_login:function(){var e;window.GB_USER_DROPDOWN&&window.GB_USER_DROPDOWN.update(),this.get_default_country("force"),null===(e=(0,r.Bd)().CommonHeader)||void 0===e||e.trigger("isLogin"),window.cart_module&&window.cart_module.reload()},async check_freeShippingTips_promise(){const e=await(0,n.A)({url:"/user-api/center/get_freeshipping_tips",useBffApi:!0});return(null==e?void 0:e.info)||{}},async get_default_country(e){var t=this;return e||!t.data.fetched_default_country?(t.data.fetched_default_country=!0,t.data.default_country="",t.data.default_country):t.data.default_country},async get_user_profile(){const e=await(0,n.A)({url:"api/user/account_setting/isCouponActivityOpen/get"});0==e.code&&e.info&&e.info.result&&(1==e.info.result.pointActOpen||1==e.info.result.couponActOpen)&&(document.querySelectorAll(".j-profile-nopenum").forEach((e=>{e.classList.remove("she-hide")})),this.show_account_tips(1))},show_account_tips:function(e){!(0,i.getSessionStorage)("isCheckedAccountTips")&&e&&document.querySelectorAll(".j-account-nopenum").forEach((e=>{e.classList.remove("she-hide")}))},hide_account_tips:function(){(0,a.S4)({selector:".j-header-username-icon",type:"mouseenter",cb:function(){const e=document.querySelectorAll(".j-account-nopenum");(0,a.S4)({selector:e,type:"hasClass",className:"she-hide"})||((0,a.S4)({selector:e,type:"addClass",className:"she-hide"}),(0,i.setSessionStorage)({key:"isCheckedAccountTips",value:"1"}))}})},async toggle_account_survey_tips(){const e=await(0,n.A)({url:"/user/survey"});"0"==e.code&&e.info&&e.info.questionnaires&&e.info.questionnaires.length&&(this.show_account_tips(1),this.hide_account_tips(),window.location.href.indexOf("/user/survey")>-1?(0,a.S4)({selector:".j-survey-dot",type:"addClass",className:"she-hide"}):(0,a.S4)({selector:".j-survey-dot",type:"removeClass",className:"she-hide"})),(0,a.S4)({selector:".j-header-survey",type:"click",cb:()=>{(0,a.S4)({selector:".j-survey-dot",type:"addClass",className:"she-hide"})}})}}},108946:()=>{try{if(!window.localStorage||!window.sessionStorage)throw"exception";localStorage.setItem("storage_test",1),localStorage.removeItem("storage_test")}catch(e){!function(){var e=function(e){function t(e,t,o){var n,i;o?((n=new Date).setTime(n.getTime()+24*o*60*60*1e3),i="; expires="+n.toGMTString()):i="",document.cookie=e+"="+t+i+"; path=/"}function o(e){var t,o,n=e+"=",i=document.cookie.split(";");for(t=0;t<i.length;t++){for(o=i[t];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(n))return o.substring(n.length,o.length)}return null}function n(o){o=encodeURIComponent(JSON.stringify(o)),t("session"==e?i():"localStorage",o,365)}function i(){return window.name||(window.name=(new Date).getTime()),"sessionStorage"+window.name}var a=function(){var t=o("session"==e?i():"localStorage");return t?JSON.parse(decodeURIComponent(t)):{}}();return{length:0,clear:function(){a={},this.length=0,t("session"==e?i():"localStorage","",365)},getItem:function(e){return void 0===a[e]?null:a[e]},key:function(e){var t=0;for(var o in a){if(t==e)return o;t++}return null},removeItem:function(e){delete a[e],this.length--,n(a)},setItem:function(e,t){a[e]=t+"",this.length++,n(a)}}},t=new e("local"),o=new e("session");window.localStorage=t,window.sessionStorage=o,window.localStorage.__proto__=t,window.sessionStorage.__proto__=o}()}},119189:(e,t,o)=>{"use strict";o.d(t,{x:()=>r,C:()=>s});var n=o(369795),i=o(127269),a=o(630794);(0,o(16871).I)();const r=()=>"undefined"==typeof window?Promise.resolve():(0,i.jP)()?(0,i.ie)():(0,n.Hs)(),s=()=>{(0,a.Q)(),(0,i.qI)(),(0,n.JP)()}},151590:(e,t,o)=>{"use strict";o.d(t,{$v:()=>a,U5:()=>u,Xd:()=>d,ai:()=>r,gb:()=>s,m0:()=>l,yw:()=>c});var n=o(383112),i=o(580031);function a(e){var t,o;return(0,n.A)({url:"/promotion/coupon/combine_coupon",method:"POST",useBffApi:!0,data:{firstPopup:(0,i.v6)(),blackBox:(null===(t=window)||void 0===t||null===(o=t._fmOpt)||void 0===o?void 0:o.__blackbox)||"",version:"v2",...e,advertise:{url:encodeURIComponent(window.location.href),isLast:"1"}}})}function r(e){return(0,n.A)({url:"/promotion/coupon/bind_coupon",method:"POST",useBffApi:!0,data:e})}function s(e){return(0,n.A)({url:"/promotion/member_coupon_list",method:"POST",useBffApi:!0,data:{...e,advertise:{url:encodeURIComponent(window.location.href),isLast:"1"}}})}function c(e){return(0,n.A)({url:"/system/configs/multi_language",method:"POST",data:{languageKeys:e},useBffApi:!0})}function l(e){return(0,n.A)({url:"/abt/merge/get_abt_by_poskey",params:{posKeys:e},useBffApi:!0})}const d=async e=>{if(!e)return Promise.resolve();const t=new AbortController,{signal:o}=t,n=setTimeout((()=>{t.abort()}),3e3);try{const t=await fetch(e,{signal:o});if(clearTimeout(n),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}catch(e){return clearTimeout(n),null}};function u(e){return(0,n.A)({url:"/order-api/coupon_package/expand",method:"POST",useBffApi:!0,data:e})}},197658:(e,t,o)=>{"use strict";o.d(t,{F:()=>l});var n=o(383112),i=o(665640);const{gitInfo:a={},NODE_SERVER_ENV:r="",SiteUID:s="",WEB_CLIENT:c}=gbCommonInfo;function l({empId:e=sessionStorage.getItem("empId")||"",callFunc:t=()=>{}}={},o){if(window.__coverage__&&a.branch){if("hidden"===document.visibilityState&&!o)return;try{const o=new File([JSON.stringify(window.__coverage__)],"coverage.json",{type:"text/json"}),i=new FormData;i.append("coverage",o),i.append("branchName",a.branch||""),i.append("gitCommitId",(null==a?void 0:a.commitId)||""),i.append("env",r),i.append("platform","pc"),i.append("site",s),i.append("empId",e),(0,n.A)({url:"https://tep.sheincorp.cn/api/coverage/upload/web",method:"POST",data:i,headers:{brand:c},timeout:6e4}).then((()=>{t&&t()}))}catch(e){i.log("send coverage fail",e)}}}"undefined"!=typeof window&&(window.uploadCoverage=function(e){sessionStorage.setItem("empId",e),l({empId:e})})},201455:(e,t,o)=>{"use strict";o.d(t,{CU:()=>m,LZ:()=>p,Rj:()=>c,Ro:()=>a,Yj:()=>d,_1:()=>r,_U:()=>u,b4:()=>_,c$:()=>l,nq:()=>s,ys:()=>i});var n=o(926389);const i=/^(?=.*\d)(?=.*[a-zA-Z])[^\s]{8,}$/;function a(e,t){const o=window.LoginPageLangText||{};return e.length?(0,n.V)({email:e})?(t.show=!1,!0):(t.show=!0,t.txt=o.SHEIN_KEY_PC_15690,!1):(t.show=!0,t.txt=o.SHEIN_KEY_PC_15165,!1)}function r(e,t,o){const n=window.LoginPageLangText||{};return e.length?e.length<6?(t.show=!0,t.txt=n.SHEIN_KEY_PC_15692,!1):"sign-up"!==o||i.test(e)?(t.show=!1,t.txt="",!0):(t.show=!0,t.txt=n.SHEIN_KEY_PC_14477,!1):(t.show=!0,t.txt=n.SHEIN_KEY_PC_15694,!1)}function s(e,t,o=!1){return""===e?"empty_email":(0,n.V)({email:e})?o?void 0:""===t?"empty_password":t.length<6?"password_less_than_6_characters":"other":"incorrect_email_format"}function c(e,t){return""===e?"Please fill in the mailbox":(0,n.V)({email:e})?""===t?"Please enter the password":t.length<6?"Password format is incorrect":"other":"Mailbox validation failure"}function l(e,t,o){return""===e?"empty_email":(0,n.V)({email:e,signUp:!0})?""===t?"empty_password":i.test(t)?t!=o?"confirm_password_inconsis":"other":"invalid_password":"incorrect_email_format"}function d(e,t,o){return""===e?"Please fill in the mailbox":(0,n.V)({email:e,signUp:!0})?""===t?"Please enter the password":i.test(t)?t!=o?"The password and the confirmation you typed do not match":"other":"Password format is incorrect":"Mailbox validation failure"}function u(e,t,o){if("code"==o&&""==e)return"empty_verification_code";if("password"==o){if(""==t)return"empty_password";if(t.length<6)return"invalid_password"}return"other"}function p(e,t){const o=window.LoginPageLangText||{};return e.length?(0,n.V)({email:e,signUp:!0})?(t.show=!1,!0):(t.show=!0,t.txt=o.SHEIN_KEY_PC_15695,!1):(t.show=!0,t.txt=o.SHEIN_KEY_PC_15689,!1)}function _(e){const t=[],{PHONE_SUPPORT_COUNTRYS:o}=gbCommonInfo;return o.forEach((o=>{const n=e.find((e=>e.value==o));n&&t.push({code:n.phone_code.replace("+",""),abbr:n.value,value:n.value,name:n.country,siteUid:n.siteUid||""})})),function(e){0!=e.length&&e.sort(((e,t)=>{let o=(null==e?void 0:e.name)||"",n=(null==t?void 0:t.name)||"";if(!o||!n)return 0;const i=o.length;let a=0;for(let e=0;e<i;e++){const t=o.charAt(e),i=n.charAt(e);if(t>i){a=1;break}if(t<i){a=-1;break}}return a}))}(t),t}function m(e){const t=[];return e.forEach((e=>{var o;t.push({code:null===(o=e.phone_code)||void 0===o?void 0:o.replace("+",""),abbr:e.value,name:e.country})})),t}},230973:(e,t,o)=>{"use strict";o.d(t,{uE:()=>i,KV:()=>m,B3:()=>u,Ou:()=>d,nu:()=>_,vH:()=>r,Hs:()=>a,_n:()=>c});var n=o(444736);const i=[],a=[],r={pageDetail:{names:["page_goods_detail"],origin:7},pageList:{names:["page_real_class","page_select_class"],origin:7},pageActivity:{names:["page_activity_factory"],origin:8},pageStore:{names:["page_store"],origin:8}};var s=o(665640);function c(...e){try{var t,o,n;if("undefined"==typeof window)return;if(!window.performance)return;let i={eventName:"",resource:"",tag:"",measureTo:"",measureFrom:"",timestamp:Date.now()};if("string"==typeof e[0])i.eventName=e[0],"toNextPageClick"===i.eventName&&(i.measureTo="routeChangeStart");else if("object"==typeof e[0]){const t=e[0]||{};i={...i,...t}}if(!i.eventName)return;const a="function"==typeof(null===(t=window)||void 0===t||null===(o=t.clientAnalytics)||void 0===o||null===(n=o.PerformanceTargetCollectInner)||void 0===n?void 0:n.addMetrics),r=d();let s=`__SHEIN__public__${i.eventName}`;return i.tag&&(s=`${s}__${i.tag}`),a?(window.clientAnalytics.PerformanceTargetCollectInner.addMetrics(i),void("performanceMark"===r&&window.performance.mark(s))):(window.CLIENT_SDK.DateTimeMarkList.push(i),void("performanceMark"===r&&window.performance.mark(s)))}catch(e){s.error(e)}}let l;function d(){if(void 0!==l)return l;const e=(0,n.R)("performanceTest")||"",t=(0,n.R)("vueDebug")||"",o=window.localStorage.getItem(`${p}_IS_LABORATORY`);return l="1"===e||"1"===o?"testDateNow":"1"===t?"performanceMark":"dateNow",l}function u(){return!0}"undefined"!=typeof window&&(window.CLIENT_SDK={DateTimeMarkList:[]});const p="__SHEIN_PERFORMANCE_TEST__";function _(){try{const e=window.localStorage.getItem(`${p}_SDK_PAGE`)||"";return e?JSON.parse(e):null}catch(e){return null}}function m(){window.localStorage.setItem(`${p}_SDK_PAGE`,"")}},269676:(e,t,o)=>{"use strict";o.d(t,{c:()=>d});var n=o(372268),i=o(315849),a=o(665640);o(290165),o(859553);var r=o(52635);o(665640);const s=e=>{const t=e.info.member||{};null!=t&&t.registerTime&&(t.add_time=t.registerTime);const o=e.info.ugid||"";(()=>{try{(0,i.x)({keys:["pcMeHtml","homePageDynamicData"]})}catch(e){a.log("removeServiceWorkerCache error"+e)}})(),n.A.set({key:"UserInfo",value:t,actionType:"setAuthUserInfo"}),n.A.set({key:"ugid",value:o,actionType:"setUgidUserInfo"}),window.isLoginSuccessRefresh=!0,(0,r.mb)()};var c=o(500399),l=o(665640);const d=async(e,t={})=>{if(e&&0==e.code){(e=>{var t,o,n,i,a,r,s,c,l,d;null!=e&&null!==(t=e.info)&&void 0!==t&&null!==(o=t.member)&&void 0!==o&&o.account_type&&(e.info.member.account_type=+e.info.member.account_type,e.info.member.area_code=(null==e||null===(n=e.info)||void 0===n||null===(i=n.member)||void 0===i?void 0:i.areaCode)||"",e.info.member.add_time=(null==e||null===(a=e.info)||void 0===a||null===(r=a.member)||void 0===r?void 0:r.registerTime)||"",e.info.member.nickname=(null==e||null===(s=e.info)||void 0===s||null===(c=s.member)||void 0===c?void 0:c.nickname)||(null==e||null===(l=e.info)||void 0===l||null===(d=l.member)||void 0===d?void 0:d.nick_name)||"")})(e);const{type:o="",params:n}=t;try{s(e)}catch(e){l.warn("setAuthUserInfo:"+e)}"phone"==o&&null!=n&&n.area_abbr&&c.Qh.set(n.area_abbr,1)}}},297397:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var n=o(177279),i=o(461739),a=o(431979),r=o(665640);const s={metricCccExpose:e=>{const{page:t,business_block:o,style_nm:i,tab_nm:s,position:c}=e||{};if(!((0,a.K)(t)&&(0,a.K)(o)&&(0,a.K)(i)&&(0,a.K)(s)))return r.warn("page or business_block or style_nm or tab_nm is not string");n.JY.metricCount({metric_name:"web_ccc_block_main_expose_total",tags:e,message:`The ${s} channel ${o} ${i} components expose on the ${c} position of ${t}`})},metricCompFilter:(e={})=>{e&&"object"==typeof e&&(e.params={...e.params||{},isSpider:"undefined"==typeof window?"unknown":(0,i.s)()}),n.JY.metricCount({metric_name:"ccc_component_be_filtered_total",...e})},metricCategoryClick:(e={})=>{e&&"object"==typeof e&&(e.params={...e.params||{},isSpider:"undefined"==typeof window?"unknown":(0,i.s)()}),n.JY.metricCount({metric_name:"category_click_total",...e})},metricCategoryType:(e={})=>{e&&"object"==typeof e&&(e.params={...e.params||{},isSpider:"undefined"==typeof window?"unknown":(0,i.s)()}),n.JY.metricCount({metric_name:"category_click_type_total",...e})},metricGlobPopup:(e={})=>{e&&"object"==typeof e&&(e.params={...e.params||{},isSpider:"undefined"==typeof window?"unknown":(0,i.s)()}),n.JY.metricCount({metric_name:"home_alert_queue_track_total",...e})},metricWarnSlsCount:(e={})=>{e&&"object"==typeof e&&(e.params={...e.params||{},isSpider:"undefined"==typeof window?"unknown":(0,i.s)()}),n.JY.metricCount({metric_name:"web_client_home_warn_total",...e})},metricErrorSlsCount:(e={})=>{e&&"object"==typeof e&&(e.params={...e.params||{},isSpider:"undefined"==typeof window?"unknown":(0,i.s)()}),n.JY.metricCount({metric_name:"web_client_home_error_total",...e})},metricCompListByInterface:({page:e="",contextData:t={},extraData:o={}}={})=>{const i=(null==o?void 0:o.channel_id)||"",a=(null==t?void 0:t.content)||[];e&&null!=a&&a.length&&"undefined"!=typeof window&&i?null==a||a.forEach((t=>{let o=null==t?void 0:t.businessBlock;const a=null==t?void 0:t.styleType;o&&a&&n.JY.metricCount({metric_name:"web_ccc_interface_comp_total",tags:{page:e,business_block:o,style_nm:a,tab_nm:String(i)}})})):r.warn("Missing parameters by metricCompListByInterface")},metricGlobalPopupIsNew:({page:e="others",is_new:t="0"}={})=>{"undefined"!=typeof window?n.JY.metricCount({metric_name:"web_global_popup_total",tags:{page:e,is_new:t}}):r.warn("Missing parameters by metricGlobalPopupIsNew")}}},331108:(e,t,o)=>{"use strict";o.d(t,{getLoginPageLanguage:()=>i});var n=o(383112);function i(e,t=!1){void 0===window.LoginPageLangText||!Object.keys(window.LoginPageLangText).length||t?(0,n.A)({url:"/api/auth/initData/get",method:"POST"}).then((t=>{var o,n;const{language:i,aesKey:a,LoginPageAbt:r,LoginPreloadData:s}=t;window.LoginPageLangText=i,window.LoginPageAesKey=a,null!==(o=window)&&void 0!==o&&o.SHEIN_LOGIN&&(window.SHEIN_LOGIN.__pre_abt=r),null!==(n=window)&&void 0!==n&&n.SHEIN_LOGIN&&(window.SHEIN_LOGIN.__pre_data=s),e&&e({language:i})})).catch((()=>{(0,n.A)({url:"/api/common/language/get",params:{page:"login"}}).then((t=>{const{language:o={}}=t;window.LoginPageLangText=o,e&&e({language:o})}))})):e&&e({language:window.LoginPageLangText})}},339816:(e,t,o)=>{var n=o(665640);t.isRelationBillno=e=>!!e&&(e.startsWith?e.startsWith("U"):0===e.indexOf("U")),t.generateKVMapFromArr=(e,t)=>{const o=Object.create(null);return Array.isArray(e)&&e.length&&"string"==typeof t&&t?(e.forEach((e=>{if(!e)return;const n=e[t];n&&(o[n]=e)})),o):o},t.generateConsole=(e,t="")=>{let o="";if(t&&`${t}`.length>0&&`${t}`.length<=225)for(let e=0;e<`${t}`.length;e++)o+=" ";o+=t,n.log(`%c🚀 ${e} 🚀 %s `,"font-family:sans-serif;font-size:1.2em; color:white; font-weight:bold; background: linear-gradient(#17a6ea 26%, #4FCA2D); border-radius: 4px; padding: 4px",o)},t.pickAbtResult=e=>Object.fromEntries(Object.entries(e).map((([e,t])=>[e,t.param])))},392646:()=>{var e=function(){var e=null,t=[],o=Date.now(),n={timeRemaining:300},i=function(){n.timeRemaining=0,o=Date.now(),e||(e=setTimeout(a,300))};document.addEventListener("keydown",i.bind(this,"keydown")),document.addEventListener("mousedown",i.bind(this,"mousedown")),document.addEventListener("touchstart",i.bind(this,"touchstart")),document.addEventListener("touchmove",i.bind(this,"touchmove")),document.addEventListener("mousemove",i.bind(this,"mousemove")),document.addEventListener("scroll",i.bind(this,"scroll"),!0);var a=function(){var n=o+300-Date.now();n>0?e=setTimeout(a,n):function(){clearTimeout(e),e=null;for(var o=0;o<t.length;o++)r(t[o])}()},r=function(e){-1!==t.indexOf(e)&&t.splice(t.indexOf(e),1),e.callback(n),e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=null)};return function(o,n){var i=function(e,t){var o={callback:e,timeoutId:null};return o.timeoutId=null!==t?setTimeout(r.bind(this,o),t):null,o}(o,n&&n.timeout||0);null===e?r(i):function(e){t.push(e)}(i)}};window.requestIdleCallback||(window.ricActivated=!0,window.requestIdleCallback=e()),window.requestUserIdle=window.ricActivated&&window.requestIdleCallback||e()},440961:(e,t,o)=>{"use strict";var n=o(973106);(0,n.TZ)(["package_delay_v1","order_invoices_v1"]),(0,n.pj)(["order_exchange_v1","order_track_v1","package_delay_v1"])},446428:()=>{const{templateType:e}=gbCommonInfo;if("goods_detail"==e){var t,o;function n(e){let t=document.createElement("img");t.src=e,t.onload=()=>{t=null}}const r=void 0!==window.devicePixelRatio&&window.devicePixelRatio>1,s=r?"_thumbnail_900x":"_thumbnail_600x";let c;try{var i,a;c=JSON.parse(JSON.stringify((null===(i=window.goodsDetailv2SsrData)||void 0===i||null===(a=i.productIntroData)||void 0===a?void 0:a.goods_imgs)||{detail_image:[]}))}catch(d){c={detail_image:[]}}c.main_image&&(c.detail_image||(c.detail_image=[]),c.detail_image.unshift(c.main_image));const l=(null===(t=window.goodsDetailv2SsrData)||void 0===t||null===(o=t.productIntroData)||void 0===o?void 0:o.more_goods_imgs)||[];if(l.length>0)for(const u of l)c.detail_image.push({thumbnail:u.image_url,origin_image:u.image_url});c.detail_image.forEach((e=>{n(transformImg(e.thumbnail)),n(transformImg(function(e=""){const t=-1!==e.indexOf(".jpg")?e.indexOf(".jpg"):e.indexOf(".png"),o=e.includes("//img.ltwebstatic.com/images2_pi/")||transformImg(e).includes("//img.shein.com/")?r?"1199":"799":"";return-1!==t?e.slice(0,t)+(s+o)+e.slice(t):e}(e.origin_image)))}))}},447981:(e,t,o)=>{"use strict";o.d(t,{$f:()=>L,AW:()=>h,Ac:()=>N,B9:()=>_,KO:()=>g,MA:()=>A,Mc:()=>y,Tj:()=>c,U_:()=>f,Vk:()=>I,WW:()=>p,aI:()=>v,dL:()=>l,el:()=>u,g4:()=>P,hN:()=>S,iX:()=>b,k:()=>m,l$:()=>E,l0:()=>d,o1:()=>C,qp:()=>k,yD:()=>T,yg:()=>w});var n=o(383112),i=o(645024),a=o(201455),r=o(269676),s=o(984815);const c=async()=>await(0,n.A)({url:"/user/account/init_data",useBffApi:!0}),l=async()=>await(0,n.A)({method:"POST",url:"/system/configs/page_multi_language_mapping",data:{pages:["login"]},useBffApi:!0}),d=async()=>{const e=await i.A.getLocationList();return{support:(0,a.b4)(e),all:e,allFormat:(0,a.CU)(e||[])}},u=async e=>{const t=new FormData;for(let o in e)t.append(o,e[o]);const o=await(0,n.A)({method:"POST",url:"/user/account/positioning",data:t,useBffApi:!0});return o.tips=(null==o?void 0:o.msg)||"",o},p=async e=>{const t=new FormData;for(let o in e)t.append(o,e[o]);return await(0,n.A)({method:"POST",url:"/user/login/checkClause",data:t,useBffApi:!0})},_=async e=>{var t;e.blackbox=(null===(t=window._fmOpt)||void 0===t?void 0:t.__blackbox)||"";const o=new FormData;for(let t in e)o.append(t,e[t]);const i=await(0,n.A)({method:"POST",url:"/user/email_register",headers:{},data:o,useBffApi:!0});return i.tips=(null==i?void 0:i.msg)||"",await(0,r.c)(i),i},m=async e=>{var t;e.blackbox=(null===(t=window._fmOpt)||void 0===t?void 0:t.__blackbox)||"";const o=new FormData;for(let t in e)o.append(t,e[t]);const i=await(0,n.A)({method:"POST",url:"/user/common_login",headers:{},data:o,useBffApi:!0});return i.tips=(null==i?void 0:i.msg)||"",await(0,r.c)(i),i},g=async e=>{var t;e.blackbox=(null===(t=window._fmOpt)||void 0===t?void 0:t.__blackbox)||"";const o=new FormData;for(let t in e)o.append(t,e[t]);return await(0,n.A)({method:"POST",url:"/user/account/send_sms_code",data:o,useBffApi:!0})},h=async e=>{var t;e.blackbox=(null===(t=window._fmOpt)||void 0===t?void 0:t.__blackbox)||"";const o=new FormData;for(let t in e)o.append(t,e[t]);return await(0,n.A)({method:"POST",url:"/user/account/send_email_code",data:o,useBffApi:!0})},f=async e=>{var t;await window._GB_DeviceFingerPrint.callFuncPromise(),e.blackbox=(null===(t=window._fmOpt)||void 0===t?void 0:t.__blackbox)||"";const o=new FormData;for(let t in e)o.append(t,e[t]);const i=await(0,n.A)({method:"POST",url:"/user/account/phone_login",headers:{},data:o,useBffApi:!0});return i.tips=(null==i?void 0:i.msg)||"",await(0,r.c)(i),i},w=async e=>{var t;await window._GB_DeviceFingerPrint.callFuncPromise(),e.blackbox=(null===(t=window._fmOpt)||void 0===t?void 0:t.__blackbox)||"";const o=new FormData;for(let t in e)o.append(t,e[t]);const i=await(0,n.A)({method:"POST",url:"/user/account/phone_register",headers:{},data:o,useBffApi:!0});return i.tips=(null==i?void 0:i.msg)||"",await(0,r.c)(i),i},v=async e=>{const t=new FormData;for(let o in e)t.append(o,e[o]);const o=await(0,n.A)({method:"POST",url:"/user/subscribe/unsubscribe",data:t,useBffApi:!0});return o.tips=(null==o?void 0:o.msg)||"",o},y=async e=>{const t=new FormData;for(let o in e)t.append(o,e[o]);const o=await(0,n.A)({method:"POST",url:"/user/subscribe/add_subscribe",data:t,useBffApi:!0});return o.tips=(null==o?void 0:o.msg)||"",o},b=async e=>{const t=new FormData;for(let o in e)t.append(o,e[o]);const o={"x-ftoken":gbCommonInfo.ftoken};return await(0,n.A)({method:"POST",url:"/user/account/bind_phone",data:t,headers:o,useBffApi:!0})},S=async e=>{var t;await window._GB_DeviceFingerPrint.callFuncPromise(),e.blackbox=(null===(t=window._fmOpt)||void 0===t?void 0:t.__blackbox)||"";const o=new FormData;for(let t in e)o.append(t,e[t]);return await(0,n.A)({method:"POST",url:"/user/check_verify_code",data:o,useBffApi:!0})},k=async e=>{const t=new FormData;for(let o in e)t.append(o,e[o]);return await(0,n.A)({method:"POST",url:"/user/forget_password",data:t,useBffApi:!0})},I=async e=>{const t=new FormData;for(let o in e)t.append(o,e[o]);return await(0,n.A)({method:"POST",url:"/user/account/reset_password",data:t,useBffApi:!0})},P=async e=>{const t=new FormData;for(let o in e)t.append(o,e[o]);return await(0,n.A)({method:"POST",url:"/user/account/checkRelationAccount",data:t,useBffApi:!0})},E=async e=>{const t=new FormData;for(let o in e)t.append(o,e[o]);return await(0,n.A)({method:"POST",url:"/user/subscribe/subscribed_detail",data:t,useBffApi:!0})},C=async e=>{const t=await(0,n.A)({method:"POST",url:"/user-api/account/switch_login",data:e,useBffApi:!0});return await(0,r.c)(t),t},A=async e=>await(0,n.A)({method:"POST",url:"/user-api/account/remove_history",data:e,useBffApi:!0}),T=async e=>{var t;e.couponCodes=(null==e?void 0:e.coupon_codes)||"",null==e||delete e.coupon_codes;const o=await(0,n.A)({method:"POST",url:"/user-api/lure/query_coupons",data:e,useBffApi:!0});return o.info=(0,s.vf)(null==o||null===(t=o.info)||void 0===t?void 0:t.list)||[],o},L=async e=>await(0,n.A)({method:"POST",url:"/user-api/account/check_phone",data:e,useBffApi:!0}),N=async e=>await(0,n.A)({method:"POST",url:"/user-api/account/location_member",data:e,useBffApi:!0})},500399:(e,t,o)=>{"use strict";o.d(t,{B8:()=>g,Ec:()=>l,Ho:()=>c,Ix:()=>s,Qh:()=>m,W_:()=>w,Z0:()=>h,dC:()=>u,fy:()=>d,nF:()=>_,yy:()=>f});var n=o(839471);const{langPath:i,host:a,forceHttp:r}="undefined"!=typeof gbCommonInfo?gbCommonInfo:{};function s(e={}){const t=window.LoginPageLangText||{},o={402901:t.SHEIN_KEY_PC_16509,402902:t.SHEIN_KEY_PC_17704,402904:t.SHEIN_KEY_PC_17704,402903:t.SHEIN_KEY_PC_16510,400529:t.SHEIN_KEY_PC_16979,400592:t.SHEIN_KEY_PC_17708,400584:t.SHEIN_KEY_PC_17529,400504:t.SHEIN_KEY_PC_15687,400502:t.SHEIN_KEY_PC_14914,400505:t.SHEIN_KEY_PC_15110,400506:t.SHEIN_KEY_PC_14477,400525:t.SHEIN_KEY_PC_14476,400524:t.SHEIN_KEY_PC_14480,400517:t.SHEIN_KEY_PC_15674,400503:t.SHEIN_KEY_PC_15673,400522:t.SHEIN_KEY_PC_14885},n=t.SHEIN_KEY_PC_14478,{code:i="",info:a={},tips:r=""}=e;let s=o[i]||r||n||"";return["402902","402904"].includes(i.toString())&&(s=s.replace("{0}",a.lock_time)),s}const c={key:"isAgreenNewPrivacy",get(e){try{const t=e||"none",o=JSON.parse(sessionStorage.getItem(`${this.key}`)||null)||{};return(null==o?void 0:o[t])||""}catch(e){return""}},set(e){try{const t=e||"none",o=JSON.parse(sessionStorage.getItem(`${this.key}`)||null)||{};o[t]=1,sessionStorage.setItem(this.key,JSON.stringify(o))}catch(e){return""}}},l=(e={})=>{const{from:t="",abt:o="",type:i="",language:a={},location:r}=e,s="undefined"!=typeof window?window.LoginPageLangText||a||{}:a||{};let c="";const l="undefined"!=typeof gbCommonInfo&&gbCommonInfo.language||{},d=`<a href="javascript:void(0);" class="j-privacy-and-cookies" da-event-click="2-7-59" da-event-expose="2-7-60" data-location="${r}"  tabindex="0">${l.SHEIN_KEY_PC_14730||s.SHEIN_KEY_PC_14730||""}</a>`;c="yes"==o?s.SHEIN_KEY_PC_17946:s.SHEIN_KEY_PC_17948,"third"===t&&"no"==o&&(c="signup"==i?s.SHEIN_KEY_PC_25568:s.SHEIN_KEY_PC_17947),"newui-continue"===t&&(c=s.SHEIN_KEY_PC_25383),"pop"===t&&"yes"==o&&(c=`<h3 tabindex="0" ref="newPrivacyTitle">${s.SHEIN_KEY_PC_19559}</h3><p tabindex="0">${s.SHEIN_KEY_PC_19560}</p><br/><p>{0}<br/>{1}</p>`),"quick_register_pop"===t&&(c=s.SHEIN_KEY_PC_32556||a.SHEIN_KEY_PC_32556||"");const u=`<a tabindex="0" href="javascript:void(0);" class="j-terms-and-conditions" da-event-click="2-7-61" da-event-expose="2-7-62" data-location="${r}">${l.SHEIN_KEY_PC_15730||s.SHEIN_KEY_PC_15730||""}</a>`;return(0,n.v)(d,u,c||"")};function d(e){const t=e.target;"A"==t.tagName&&t.className.includes("j-privacy-and-cookies")&&window.SHEIN_GLOBAL_PRIVACY.show({type:"privacy"}),"A"==t.tagName&&t.className.includes("j-terms-and-conditions")&&window.SHEIN_GLOBAL_PRIVACY.show({type:"termsAndConditions"}),"A"==t.tagName&&t.className.includes("j-terms-of-use")&&window.SHEIN_GLOBAL_PRIVACY.show({type:"termsOfUse"}),"A"==t.tagName&&t.className.includes("j-terms-of-sale")&&window.SHEIN_GLOBAL_PRIVACY.show({type:"termsOfSale"})}async function u(e){const{getLoginPageLanguage:t}=await o.e(67439).then(o.bind(o,667439));return t(e)}const p=async()=>{const{getVisitConfrim:e}=await Promise.all([o.e(52074),o.e(45604)]).then(o.bind(o,600842));e&&1==e()&&sessionStorage.removeItem("visitConfrim")};function _(){var e,t;return 8==(null===(e=window)||void 0===e||null===(t=e.getSaPageInfo)||void 0===t?void 0:t.page_id)}const m={key:"p_c_s_cache",set(e,t){let o=window.localStorage.getItem(this.key)||null;try{o=JSON.parse(o)||{}}catch(e){o={}}o[t]=e,window.localStorage.setItem(this.key,JSON.stringify(o))},get(){let e=window.localStorage.getItem(this.key);try{e=JSON.parse(e)||{}}catch(t){e={}}return e[1]||e[0]||""},getValue(e){let t=window.localStorage.getItem(this.key);try{t=JSON.parse(t)||{}}catch(e){t={}}return t[e]||""},setValue(e){window.localStorage.setItem(this.key,JSON.stringify(e))},getStr(){let e=window.localStorage.getItem(this.key);try{e=JSON.parse(e)||{}}catch(t){e={}}let t="";return e[1]&&(t+=`1-${e[1]}_`),e[0]&&(t+=`0-${e[0]}`),t},parseStr(e){if(!e)return"";let t=e.split("_"),o={};return t.forEach((e=>{const[t,n]=e.split("-");t&&(o[t]=n)})),{code:o[1]||o[0]||"",value:o}}};function g(){var e,t,o,n,i,a,r,s,c,l,d;p(),localStorage.removeItem("NAV_TOGGLE_STATE"),localStorage.removeItem("IS_SHOW_ASSETS"),null===(e=window)||void 0===e||null===(t=e.sessionStorage)||void 0===t||t.removeItem("mutiplePartPrivacy"),null===(o=window)||void 0===o||null===(n=o.sessionStorage)||void 0===n||n.removeItem("isAgreenNewPrivacy"),window.gbRegisterModule&&window.gbRegisterModule.rawHide(),null!==(i=window)&&void 0!==i&&null!==(a=i.couponPackage)&&void 0!==a&&a.login&&(window.couponPackage.login=!0),null===(r=window)||void 0===r||null===(s=r._abt_server_provider)||void 0===s||null===(c=s.clear)||void 0===c||c.call(s),null===(l=window)||void 0===l||null===(d=l.ExceptionReport)||void 0===d||d.login()}function h(){var e;const{SiteUID:t,WHATSAPP_SUBSCRIPE_CHECKED:o}=gbCommonInfo;return null==o||null===(e=o.includes)||void 0===e?void 0:e.call(o,t)}const f=e=>new Promise((t=>setTimeout(t,e))),w=(e,t)=>{var o;const n=[];return null==e||null===(o=e.forEach)||void 0===o||o.call(e,(e=>{if(e.register_from=parseInt(e.register_from),11==e.register_from&&t.facebook)return!1;if(12==e.register_from&&t.google)return!1;if(13==e.register_from&&t.vk)return!1;if(14==e.register_from)return!1;if(15==e.register_from&&t.line)return!1;if(16==e.register_from&&t.kakao)return!1;if(17==e.register_from&&t.naver)return!1;if(18==e.register_from&&t.klarna)return!1;if(19==e.register_from&&t.yahoo)return!1;const o=[11,12,13,14,15,16,17,18,19].includes(e.register_from);n.push({...e,is_third:o})})),n}},580031:(e,t,o)=>{"use strict";o.d(t,{KM:()=>g,Sw:()=>u,Tk:()=>p,dQ:()=>f,p5:()=>m,v6:()=>_,ve:()=>h});var n=o(741042),i=o.n(n),a=o(567194),r=o.n(a),s=o(834989),c=o(632079),l=o(92525),d=o(290165);function u(e=[]){const t=i()(e,(e=>e.packageId)),o=r()(t,((e,t)=>({couponPackageId:t,couponCodes:e.map((e=>e.couponCode||(null==e?void 0:e.coupon))).join(",")})));return{scene:"home",idempotentCode:(0,s.v4)(),couponPackages:o}}const p=function(e){return e.then((e=>[void 0,e]),(e=>[e,void 0]))},_=()=>{if((0,c.isLogin)()){const e=l.default.get({key:"memberId",actionType:"common/coupon_package"})||"";return(0,d.getLocalStorage)(`${l.default.get({key:"oest"})}-${e}`)||"1"}return"0"},m=()=>{const e=l.default.get({key:"memberId"})||"";(0,d.setLocalStorage)({key:`${l.default.get({key:"oest"})}-${e}`,value:"1"})},g=e=>!e||"None"===e||"none"===e;function h(e=[]){const t=e.reduce(((e,t)=>(t.packageId&&e.add(t.packageId),e)),new Set);return Array.from(t).join(",")}const f=e=>null==e||null==e||""==e},619672:()=>{const e=async(t,o,n=0)=>{try{const e=(await fetch(t)).headers.get(o);return e||i()}catch(e){return i()}async function i(){if(n<1)return await new Promise((e=>setTimeout(e,5e3))),e(t,o,n+1);throw new Error("[IP_ADDRESS_REPORT]: Number of retries exceeded")}},t=async()=>{try{const t=await(async()=>{var t,o;const[n,i]=await Promise.all([e("https://cinfo-v4.shein.com","client-ipaddr-v4"),e("https://cinfo-v6.shein.com","client-ipaddr-v6")]);await window._GB_DeviceFingerPrint.callFuncPromise();const a=window._GB_DeviceFingerPrint.smDeviceId||(null===(t=window.SMSdk)||void 0===t||null===(o=t.getDeviceId)||void 0===o?void 0:o.call(t));return{"client-ipaddr-v4":n,"client-ipaddr-v6":i,timestamp:Date.now(),device_id:a}})();await(async e=>{const{REPORT_URL:t}=gbCommonInfo;await fetch(`${t.SA_REPORT_URL}/ip-report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})(t)}catch(e){}};"undefined"!=typeof window&&(t(),setInterval(t,12e4))},630794:(e,t,o)=>{"use strict";o.d(t,{Q:()=>l,s:()=>d});var n=o(383112),i=o(632079),a=o(579308),r=o(230973),s=o(665640);let c=!1;const l=()=>{window.__detailPromise__=window.__detailPromise__||async function(){var e,t;if("undefined"==typeof window)return Promise.resolve();const o=window.gbRawData||{};if("goods_detail"!==(null===(e=o.modules)||void 0===e||null===(t=e.pageInfo)||void 0===t?void 0:t.templateType))return Promise.resolve();let n={};const{productInfo:c={},mallInfo:l={}}=(null==o?void 0:o.modules)||{},{goods_id:d,goods_sn:p}=c,_=(0,a.e)({key:"landing_page_id"})||(0,a.e)({key:"ad_type"})||(0,a.e)({key:"url_from"})?1:0,m=(0,a.e)({key:"billno"}),g=(0,a.e)({key:"isAppointMall"}),h=(0,a.e)({key:"sceneFlag"})||"",f=(0,a.e)({key:"flashPromotionId"})||"";let w={};f&&(w={promotionId:f,promotionType:"10",promotionLogoType:"1007",promotionProductMark:"1"});n={goods_id:d,mallCode:(null==l?void 0:l.selectedMallCode)||"",isUserSelectedMallCode:0,isQueryIsPaidMember:1,isQueryCanTrail:(0,i.isLogin)()?1:0,isHideEstimatePriceInfo:_,specialSceneType:_,billno:m,goods_sn:p,isAppointMall:g,sceneFlag:h,...w},(0,r._n)({eventName:"realTimeStart"});try{return u(n)}catch(e){return s.error(e),void(window.__detailPromise__=void 0)}}()},d=()=>{window.__detailPromise__||l();return window.__detailPromise__.then((e=>{if(!c)return e&&(c=!0),e}))};const u=async e=>{const{isDebug:t}=window.gbCommonInfo||{},{goods_sn:o,...n}=e,[i,a,r]=await Promise.all([p(n,t),_(n),m({...n,goods_sn:o})]);return{realTimeData:i,abts:a,rankingInfo:r}},p=async(e,t)=>{const o=await(0,n.A)({method:"GET",url:"/product/get_goods_detail_realtime_data",params:e,headers:t?{sheindebug:676}:{},useBffApi:!0});return o&&o.info&&0==+o.code?o.info:null},_=async e=>{var t,o,i;const{goods_id:a}=e||{},r=await(0,n.A)({url:"/products-api/get_detail_abt_info",params:{goodsIds:a},useBffApi:!0}),s=null==r||null===(t=r.info)||void 0===t||null===(o=t.detailAbtInfoList)||void 0===o||null===(i=o.find)||void 0===i?void 0:i.call(o,(e=>(null==e?void 0:e.goodsId)==a));return(null==s?void 0:s.webDetailAbtInfo)||null},m=async e=>{try{var t,o,i,a,r,c,l,d,u,p;const{goods_id:s,cat_id:_,goods_sn:m,mall_code:g}=e,h={catId:_,goodsId:s,goodsSn:m,mallCode:g,sort:0,scene:"detail",queryType:1},f=await(0,n.A)({method:"GET",url:"/category-api/get_detail_rank_info",params:h,useBffApi:!0});return(null==f||null===(t=f.info)||void 0===t||null===(o=t.firstScreenRankInfo)||void 0===o||null===(i=o.content)||void 0===i||null===(a=i[0])||void 0===a||null===(r=a.content)||void 0===r||null===(c=r.props)||void 0===c||null===(l=c.items)||void 0===l||null===(d=l[0])||void 0===d||null===(u=d.rank_of_goods)||void 0===u||null===(p=u.list)||void 0===p?void 0:p[0])||{}}catch(e){return s.error(e),{}}}},667439:(e,t,o)=>{"use strict";o.d(t,{getLoginPageLanguage:()=>a});var n=o(447981);const{SiteUID:i}=gbCommonInfo;function a(e,t=!1){void 0===window.LoginPageLangText||!Object.keys(window.LoginPageLangText).length||t?(0,n.Tj)().then((t=>{var o,n,a,r,s,c;const{multiTips:l,abtInfo:d,preferOptions:u,newUserRights:p,historyAccountList:_,ipLocationInfo:m,subSiteInfo:g,smsSubSiteInfo:h,login:f,uid:w}=(null==t?void 0:t.info)||{};window.LoginPageLangText=l,null!==(o=window)&&void 0!==o&&o.SHEIN_LOGIN&&(window.SHEIN_LOGIN.__pre_abt=d),null!==(n=window)&&void 0!==n&&n.SHEIN_LOGIN&&(window.SHEIN_LOGIN.__pre_data={configData:{webSubSites:(null==g||null===(a=g.webSubSites)||void 0===a?void 0:a.includes(i))||!1,webNotSubSites:(null==g||null===(r=g.webNotSubSites)||void 0===r?void 0:r.includes(i))||!1,smsSubSite:(null==h||null===(s=h.webSubSites)||void 0===s?void 0:s.includes(i))||!1,smsNotSubSites:(null==h||null===(c=h.webNotSubSites)||void 0===c?void 0:c.includes(i))||!1},preferOptions:u,cccNewUserRigths:{data:p},historyAccountList:_,ipLocationInfo:m,ATO_SDK_SWITCH:gbCommonInfo.ATO_SDK_SWITCH,isSSRLogin:f,uid:w}),e&&e({language:l})})).catch((()=>{(0,n.dL)().then((t=>{var o;const n=(null==t||null===(o=t.info)||void 0===o?void 0:o.result)||{};window.LoginPageLangText=n,e&&e({language:n})}))})):e&&e({language:window.LoginPageLangText})}},743240:(e,t,o)=>{"use strict";o.d(t,{$K:()=>h,Aw:()=>b,Bs:()=>g,Cm:()=>d,E6:()=>s,Lz:()=>S,Q2:()=>I,Yn:()=>p,ar:()=>w,bC:()=>k,ez:()=>l,fB:()=>m,hO:()=>u,he:()=>v,l1:()=>c,p3:()=>y,ur:()=>f,v2:()=>_,yb:()=>r});var n=o(177279),i=o(580031);const a=function({name:e,tags:t={}}){n.JY.metricCount({metric_name:e,tags:t})};function r(e){a({name:"coupon_popup_non_targeted_users",tags:{is_login:e?"1":"0"}})}function s({isLogin:e,couponPackageId:t,abt:o}){a({name:"coupon_popup_targeted_users",tags:{is_login:e?"1":"0",couponPackageId:t,abt:o}})}function c(e){a({name:"coupon_popup_cache_10m",tags:{is_login:e?"1":"0"}})}function l(e){a({name:"coupon_popup_mutual_exclusion",tags:{is_login:e?"1":"0"}})}function d({isLogin:e,remark:t}){a({name:"coupon_popup_hide_page",tags:{is_login:e?"1":"0",hit_path:t}})}function u({isLogin:e,couponPackageId:t,abt:o}){a({name:"coupon_popup_exposure",tags:{is_login:e?"1":"0",couponPackageId:t,abt:o}})}function p({isLogin:e,activityType:t}){a({name:"coupon_popup_activity_exposure",tags:{is_login:e?"1":"0",activity_type:t}})}function _({isLogin:e,clickType:t}){a({name:"coupon_popup_click",tags:{is_login:e?"1":"0",click_type:t}})}function m({isLogin:e,LinkType:t}){a({name:"coupon_popup_link",tags:{is_login:e?"1":"0",link_type:t}})}function g(){a({name:"coupon_popup_login_back"})}function h(e){(0,i.dQ)(e)||a({name:"coupon_popup_ad_request_result",tags:{type:e}})}function f({isLogin:e,type:t,couponPackageId:o,abt:n}){a({name:"coupon_popup_un_expose",tags:{is_login:e?"1":"0",type:t,couponPackageId:o,abt:n}})}function w(e){a({name:"coupon_popup_join_queue",tags:{is_login:e?"1":"0"}})}function v({isLogin:e,couponPackageId:t,abt:o}){a({name:"coupon_popup_leave_queue",tags:{is_login:e?"1":"0",couponPackageId:t,abt:o}})}function y({isLogin:e,couponPackageId:t,abt:o,isAutoBind:n,result:i}){a({name:"coupon_popup_bind_result",tags:{is_login:e?"1":"0",couponPackageId:t,abt:o,isAutoBind:n,result:i}})}function b({isLogin:e,couponPackageId:t}){a({name:"coupon_popup_manual_bind_total",tags:{is_login:e?"1":"0",couponPackageId:t}})}function S({isLogin:e,couponPackageId:t,result:o}){a({name:"coupon_popup_manual_bind_result",tags:{is_login:e?"1":"0",couponPackageId:t,result:o}})}function k({isLogin:e,is_from_login:t=0}){a({name:"coupon_popup_request_total",tags:{is_login:e?"1":"0",isFromLogin:t}})}function I({isLogin:e,businessCode:t,resultType:o}){a({name:"coupon_popup_request_result",tags:{is_login:e?"1":"0",businessCode:t,result_type:o}})}},859553:(e,t,o)=>{"use strict";o.d(t,{$4:()=>s,AP:()=>i,CC:()=>n,RP:()=>a,Wk:()=>r});const n="disableAutoSelect",i=864e5,a={Facebook:["fbtoken","facebook_id"],Google:["id_token","google_id"],Vk:["app_token","vk_id"],Line:["id_token","user_id"],Kakao:["kakao_token","kakao_id"],Naver:["naver_token","naver_id"],Klarna:["access_token","id_token"],Yahoo:["access_token","id_token"]},r={Facebook:{idField:"facebook_id",registerFrom:11},Google:{idField:"google_id",registerFrom:12},Vk:{idField:"vk_id",registerFrom:13},Line:{idField:"user_id",registerFrom:15},Kakao:{idField:"kakao_id",registerFrom:16},Naver:{idField:"naver_id",registerFrom:17},Klarna:{idField:"id_token",registerFrom:18},Yahoo:{idField:"id_token",registerFrom:19}},s={facebook:"fb",google:"google",vk:"vk",line:"line",kakao:"kakao",naver:"naver",klarna:"klarna",yahoo:"yahoo"}},884880:(e,t,o)=>{"use strict";o.d(t,{R2:()=>n,WT:()=>i,WZ:()=>r,aX:()=>a});const n={PRIME_RENEW:"club_expiring",PRIME_RENEW_V2:"PrimeRenewV2",FREE_GIFT:"club_free_gift",PAY_BACK:"club_pay_back",UNPAID_ORDER:"unpaid_orders_retain",UNPAID_ORDER_OLD:"UnpaidOrderOld",MUTIPLE_PART_PRIVACY:"privacyGuide",QUICK_REGISTER:"quickRegister",SWITCH_LANGUAGE:"mutipleLang",SWITCH_LANGUAGE_GUIDE:"switchLanguageGuide",IP_POP_UP:"ip",FORCE_UPDATE_PWD:"forceUpdatePwd",COUPON:"couponPackage",COUPON_REVISIT:"useTipCouponPackage",ONETRUST:"privacyPopup",SHEIN_PUSH:"sheinPush",MESSAGE:"insideNotification",STOP_SUPPORT_IE_POP:"stopSupportIEPop"},i={[n.ONETRUST]:5,[n.FORCE_UPDATE_PWD]:10,[n.IP_POP_UP]:15,[n.MUTIPLE_PART_PRIVACY]:20,[n.SWITCH_LANGUAGE]:25,[n.COUPON]:30,[n.COUPON_REVISIT]:35,[n.QUICK_REGISTER]:40,[n.SWITCH_LANGUAGE_GUIDE]:45,[n.STOP_SUPPORT_IE_POP]:50,[n.SHEIN_PUSH]:55,[n.UNPAID_ORDER]:100,[n.UNPAID_ORDER_OLD]:100,[n.PRIME_RENEW]:110,[n.PRIME_RENEW_V2]:110,[n.FREE_GIFT]:120,[n.PAY_BACK]:130},a={USER_CENTER:"me",GLOBAL:"global"},r={MARKETING:"marketing",FUNCTION:"function"}},901404:(e,t,o)=>{"use strict";function n(){return!!(window.ActiveXObject||"ActiveXObject"in window||window.navigator.userAgent.indexOf("Edg")>-1)}function i(){return!(!window.ActiveXObject&&!("ActiveXObject"in window))}o.d(t,{X:()=>i,l:()=>n})},905626:(e,t,o)=>{"use strict";var n={};o.r(n),o.d(n,{ClientAnalytics:()=>F,Cybersource:()=>K,FacebookSDK:()=>qe,Forter:()=>ee,InitChannelSdk:()=>Ee,Riskified:()=>se});var i=o(579308),a=o(315849),r=o(605259),s=o(383112),c=o(297397),l=o(92525),d=o(444736),u=o(901974),p=o(665640);const{lang:_,SUPPORT_LANGS:m,currency:g,currencies:h={}}=gbCommonInfo,f=l.default.get({key:"currency"}),w=l.default.get({key:"language"});let v=[];try{v=Object.keys(h||{})}catch(e){p.error("currency error",e),v=[]}let y=!1,b=!1;if(gbCommonInfo.currency!=f&&(gbCommonInfo.currency=f,y=!0),w!=_&&(gbCommonInfo.lang=w,b=!0),b||y){let e={SUPPORT_LANGS:m,nowCurrencies:v,lang:_,currency:g,currencyManager:f,langManager:w};b&&(e.langDisMatch=1),y&&(e.currencyDisMatch=1),v.includes(g)&&(e.currencyInNowCurrencies=1),(0,s.A)({method:"POST",url:"/api/common/infoDismatchLog/post",data:e})}const S=function(e){let t="";try{t=e.replace(/\\u([\da-f]{4})/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))}catch(e){p.error("decodeFromUnicode error",e)}return t}("\\u0063\\u006f\\u006f\\u006b\\u0069\\u0065\\u0049\\u0064");S&&(0,d.R)(S)&&(0,s.A)({method:"POST",url:"/api/common/infoOc/post"}).then((e=>{var t;if(0==(null==e?void 0:e.code)&&1==(null===(t=e.info)||void 0===t?void 0:t.make)){var o="."+location.hostname.split(".").slice(1).join(".");(0,u.z)({key:S}),(0,u.z)({key:S,domain:o})}}));o(944891),o(392646),o(108946);Array.from("foo");var k=o(632079),I=o(665640);"serviceWorker"in navigator&&"undefined"!=typeof fetch&&(0,k.GG)((()=>{requestUserIdle((async()=>{const{langPath:e}=gbCommonInfo,t=e+"/sw-runtime-cache.js";try{await navigator.serviceWorker.register(t),window.dispatchEvent(new Event("SW_Loaded")),window.SW_Loaded=!0}catch(e){I.error("ServiceWorker 注册失败。",e)}}))})),(()=>{const e={"/user/auth/login":["pcMeHtml"]};Object.keys(e).forEach((t=>{location.pathname.includes(t)&&(0,a.x)({key:e[t]})}))})(),(0,k.GG)((()=>requestIdleCallback((async()=>{try{if("undefined"!=typeof caches){const e=["addressbook","addressbook-post","campaignsDynamicData","cartDynamicData","dynamicData","homePageDynamicData","payDynamicData","newPayStaticImage","newPayStaticResource","commonStaticScript","pcCheckoutHtml","pcMeHtml"],t=await caches.keys();await Promise.all(t.filter((t=>!e.includes(t))).map((e=>caches.delete(e))))}}catch(e){I.error(e)}try{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();await Promise.all(e.map((e=>{var t,o;const n=/firebase-messaging-sw/.test(null===(t=e.active)||void 0===t?void 0:t.scriptURL)&&!e.scope.includes("/firebase-cloud-messaging-push-scope");(/ltspc|sw-runtime-cache-pay-dest|aimtell-worker/.test(null===(o=e.active)||void 0===o?void 0:o.scriptURL)||n)&&e.unregister()})))}}catch(e){I.error(e)}}))));var P=o(668484),E=o(364742),C=o(399653);const A={getGoodsUrl:k.qK,getQueryString:e=>(0,i.e)({key:e}),isLogin:k.isLogin,isMobile:k.Fr,getCookie:d.R,setCookie:P.T,queryString:k._L,htmlDecode:function(e){return(0,E.C)({text:e})}};window.transformImg=function(e){return(0,C.Y)({img:e})},window.uniteJump=k.uj,window.SHEIN_W=A;var T=o(794103),L=o(640593),N=o(230973),D=o(941368);function O(e,t){return e.get(function(e,t,o){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:o;throw new TypeError("Private element is not present on this object")}(e,t))}const{WEB_CLIENT:R,SiteUID:M,appLanguage:x,REPORT_URL:B}=gbCommonInfo;var q=new WeakMap;class F{constructor(){function e(t){return function(){(e._q=e._q||[]).push([t,arguments])}}(0,L.A)(this,q,["init","registerPage","track","defineTrack"]),O(q,this).forEach((t=>e[t]=e.call(null,t))),window.sheinClientAnalytic202110="clientAnalytics",window.clientAnalytics=this.CA=e}init(){return async()=>{var e;const t=await o.e(81211).then(o.bind(o,581211));if(!t||!t.default)return;this.CA=t.default;const n=(0,N.B3)();let i=(0,N.Ou)();const{PerformanceLogNodeTestFetch:a}=await D.T.getUserAbtResult({newPosKeys:"PerformanceLogNodeTestFetch"});"YES"===(null==a||null===(e=a.param)||void 0===e?void 0:e.PerformanceLogNodeTestFetch)&&(i="labRecordVideo"),this.CA.init({reportUrl:`${B.SA_REPORT_URL}/clientPerInfo`,random:1,performanceTargetCollectConfig:{isSupportMark:n,isDebug:!1,markEngineType:i,apiWhiteList:N.uE,jsWhiteList:N.Hs,htmlWhiteList:N.vH,callback:function(e){"labRecordVideo"===i&&o.e(80115).then(o.bind(o,780115)).then((t=>{const{testTrackerTime:o}=t;o&&o.record(e)}))}}}),this.CA.registerPage({device_type:"pc",sub_site:M,language:x,home_site:R,page_version:window.page_version_defined||"Other",page_name:function(){return"undefined"!=typeof SaPageInfo?SaPageInfo.page_name:""}}),this.CA.track({resource:{random:.05}}),"testDateNow"===i&&setTimeout((()=>{o.e(46461).then(o.bind(o,946461)).then((e=>{var t,o;null==e||null===(t=e.laboratoryController)||void 0===t||null===(o=t.insert)||void 0===o||o.call(t)}))}),3e3)}}_defineTrack({data:e,options:t={}}){this.CA.defineTrack(e,t)}}(0,T.A)(F,"name","ClientAnalytics");var U=o(246752),G=o(665640);const{NODE_SERVER_ENV:$,SiteUID:j}=gbCommonInfo,H=!["localhost","debug"].includes($);class K{async _loadCybersource(){const e=await(0,s.A)({url:"/pay/get_cybs_merchant",method:"POST",useBffApi:!0}).then((e=>{var t;if(0==(null==e?void 0:e.code)&&null!=e&&null!==(t=e.info)&&void 0!==t&&t.merchant)return window.GB_cybersource_uuid=e.info.session_id,{merchant_id:e.info.merchant,org_id:e.info.orgId,session_id:e.info.session_id}})).catch((()=>{}));if(G.log("cybersource init end! >>>>",e),!e)return;G.log("cybersource init!");const{merchant_id:t="shein_risk_manager",session_id:o="",org_id:n=(H?"k8vif92e":"1snn5n9w")}=e;return{pixels:[{TPM_Ele_Type:"script",src:"//h.online-metrix.net/fp/tags.js?org_id="+n+"&session_id="+t+o,onerror:()=>{U.A.report({apiPath:"cybs/before-payment/error",siteuid:j,scene:"js sdk init fail",cybsDeviceId:o})}}]}}}function W(e,t,o){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:o;throw new TypeError("Private element is not present on this object")}(0,T.A)(K,"name","Cybersource");const{PUBLIC_CDN:Y,NODE_SERVER_ENV:J,SiteUID:V,SERVER_TYPE:Q,TPM_BLACKLIST:z}=gbCommonInfo,X=!["localhost","debug"].includes(J);var Z=new WeakMap;class ee{constructor(){var e,t;(0,L.A)(this,Z,!1),(0,T.A)(this,"apolloConfig",null),(null!=z&&null!==(e=z[ee.name])&&void 0!==e&&e[V]||null!=z&&null!==(t=z[ee.name])&&void 0!==t&&t.disabledAll)&&this._getApollo().then((e=>{window.forterSiteId=e}))}_getApollo(){return this.apolloConfig||(this.apolloConfig=(0,s.A)({method:"POST",url:"/api/config/apollo/get",data:{apolloKeys:"FORTER_NOT_US"}}).then((e=>{var t;const o=null==e||null===(t=e.info)||void 0===t?void 0:t.FORTER_NOT_US;let n=X?"cc376223223c":"9dad99c93b0e";return 1==o?n=X?"fdfe4ed62699":"f3cf410d78da":X?"usa"==Q&&(n="ffb9ca7033a3"):["us","rwus"].includes(V)&&(n="b044e212c01e"),n})).catch((()=>"cc376223223c"))),this.apolloConfig}async _loadFort(){var e,t;if(t=this,!(e=Z).get(W(e,t)))return window.forterSiteId=await this._getApollo(),{pixels:[{TPM_Ele_Type:"script",TPM_Config:{CDN:!0},id:window.forterSiteId,src:`${Y}/she_dist/libs/TPM/${X?"forter_prod_ver":"forter_dev_ver"}-2.31.js`,onload:()=>{!function(e,t,o){e.set(W(e,t),o)}(Z,this,!0),window.forterSDKLoaded=!0},onerror:()=>{U.A.report({apiPath:"forter/before-payment/error",siteuid:V,scene:"js sdk init fail"})}}]}}}function te(e,t,o){return e.set(ne(e,t),o),o}function oe(e,t){return e.get(ne(e,t))}function ne(e,t,o){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:o;throw new TypeError("Private element is not present on this object")}(0,T.A)(ee,"name","Forter");const{SiteUID:ie}=gbCommonInfo;var ae=new WeakMap,re=new WeakMap;class se{constructor(){(0,L.A)(this,ae,""),(0,L.A)(this,re,"")}_getRiskSessionId(){if(oe(ae,this))return{datas:oe(ae,this)};te(ae,this,l.default.get({key:"oest"})),te(re,this,"www.shein.com");let e="//beacon.riskified.com?shop="+oe(re,this)+"&sid="+oe(ae,this);return{datas:oe(ae,this),pixels:[{TPM_Ele_Type:"script",src:e,onload:()=>{window.isRiskifiedLoaded=!0},onerror:()=>{U.A.report({apiPath:"riskified/before-payment/error",siteuid:ie,scene:"js sdk load fail",riskSessionId:oe(ae,this)})}}]}}}(0,T.A)(se,"name","Riskified");var ce=o(597874),le=o(415690),de=o(570608),ue=o(665640);function pe(e,t){return e.get(_e(e,t))}function _e(e,t,o){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:o;throw new TypeError("Private element is not present on this object")}const{NODE_SERVER_ENV:me}=gbCommonInfo,ge=["debug","localhost"].includes(me)?"https://portal.sandbox.afterpay.com/afterpay.js":"https://portal.afterpay.com/afterpay.js";var he=new WeakMap,fe=new WeakMap,we=new WeakMap,ve=new WeakMap,ye=new WeakMap,be=new WeakMap,Se=new WeakMap,ke=new WeakMap,Ie=new WeakMap,Pe=new WeakSet;class Ee{constructor(){(0,ce.A)(this,Pe),(0,L.A)(this,he,{"pp-client":"https://js.braintreegateway.com/web/3.85.2/js/client.min.js","pp-checkout":"https://js.braintreegateway.com/web/3.85.2/js/paypal-checkout.min.js","pp-data-collector":"https://js.braintreegateway.com/web/3.85.2/js/data-collector.min.js","pp-venmo":"https://js.braintreegateway.com/web/3.85.2/js/venmo.min.js",klarna:"https://x.klarnacdn.net/kp/lib/v1/api.js",gp:"https://pay.google.com/gp/p/js/pay.js","afterpay-cashapp":ge}),(0,L.A)(this,fe,{}),(0,L.A)(this,we,{}),(0,L.A)(this,ve,["pp-client","pp-data-collector","pp-checkout"]),(0,L.A)(this,ye,["pp-client","pp-data-collector","pp-checkout"]),(0,L.A)(this,be,["pp-client","pp-data-collector","pp-venmo"]),(0,L.A)(this,Se,["klarna"]),(0,L.A)(this,ke,["gp"]),(0,L.A)(this,Ie,["afterpay-cashapp"])}async _initPPGASdk(){if(_e(Pe,this,Ae).call(this,pe(ve,this)))return{datas:!0};return(await _e(Pe,this,Te).call(this)).forEach(((e,t)=>{pe(fe,this)[pe(ve,this)[t]]=e.status})),{datas:!0}}async _initPPBNPLSdk(){if(_e(Pe,this,Ae).call(this,pe(ye,this)))return{datas:!0};return(await _e(Pe,this,Le).call(this)).forEach(((e,t)=>{pe(fe,this)[pe(ye,this)[t]]=e.status})),{datas:!0}}async _initVenmoSdk(){if(_e(Pe,this,Ae).call(this,pe(be,this)))return{datas:!0};const e=await _e(Pe,this,Ne).call(this);return e.forEach(((e,t)=>{pe(fe,this)[pe(be,this)[t]]=e.status})),ue.log("result",e),{datas:!0}}async _initKlarnaSdk(){if(_e(Pe,this,Ae).call(this,pe(Se,this)))return{datas:!0};return(await _e(Pe,this,De).call(this)).forEach(((e,t)=>{pe(fe,this)[pe(Se,this)[t]]=e.status})),{datas:!0}}async _initGPSdk(){if(_e(Pe,this,Ae).call(this,pe(ke,this)))return{datas:!0};return(await Promise.allSettled(pe(ke,this).map((e=>_e(Pe,this,Ce).call(this,e))))).forEach(((e,t)=>{pe(fe,this)[pe(ke,this)[t]]=e.status})),{datas:!0}}async _initAfterpaySdk(){if(_e(Pe,this,Ae).call(this,pe(Ie,this)))return{datas:!0};const e=await Promise.allSettled(pe(Ie,this).map((e=>_e(Pe,this,Ce).call(this,e))));return ue.log("_initAfterpaySdk---",e),e.forEach(((e,t)=>{pe(fe,this)[pe(Ie,this)[t]]=e.status})),{datas:!0}}async _initC2pSdk(){var e;return await de.a.initC2pSdk({isSandBox:["debug","localhost"].includes(null===(e=gbCommonInfo)||void 0===e?void 0:e.NODE_SERVER_ENV)}),{datas:!0}}}function Ce(e){const t=pe(he,this)[e],o=pe(fe,this)[e];return"fulfilled"===o?Promise.resolve(!0):pe(we,this)[e]&&"pending"===o?pe(we,this)[e]:(pe(fe,this)[e]="pending",pe(we,this)[e]=(0,le.t)({label:"script",attrs:{src:t,id:`channel-${e}`}}))}function Ae(e){return e.every((e=>"fulfilled"===pe(fe,this)[e]))}function Te(){return Promise.allSettled(pe(ve,this).map((e=>_e(Pe,this,Ce).call(this,e))))}function Le(){return Promise.allSettled(pe(ye,this).map((e=>_e(Pe,this,Ce).call(this,e))))}function Ne(){return Promise.allSettled(pe(be,this).map((e=>_e(Pe,this,Ce).call(this,e))))}function De(){return Promise.allSettled(pe(Se,this).map((e=>_e(Pe,this,Ce).call(this,e))))}(0,T.A)(Ee,"name","InitChannelSdk");var Oe=o(665640);function Re(e,t){return e.get(function(e,t,o){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:o;throw new TypeError("Private element is not present on this object")}(e,t))}const{FB_APPID:Me,SiteUID:xe}=gbCommonInfo;var Be=new WeakMap;class qe{constructor(){(0,T.A)(this,"_domain","//connect.facebook.net"),(0,T.A)(this,"_LOCAL_SDK_URL_MAP",{us:`${this._domain}/en_US/sdk/xfbml.customerchat.js`,ph:`${this._domain}/fil_PH/sdk/xfbml.customerchat.js`,ca:`${this._domain}/en_CA/sdk/xfbml.customerchat.js`,au:`${this._domain}/en_AU/sdk/xfbml.customerchat.js`,us_debug:`${this._domain}/en_US/sdk/debug.js`,ph_debug:`${this._domain}/fil_PH/sdk/debug.js`,ca_debug:`${this._domain}/en_CA/sdk/debug.js`,au_debug:`${this._domain}/en_AU/sdk/debug.js`}),(0,L.A)(this,Be,{appId:Me,status:!0,cookie:!1,xfbml:!0,oauth:!0,version:"v17.0"}),(0,T.A)(this,"_ALREADY_INIT",!1)}_getInitFbLogin(){return{datas:"facebook-login-datas",pixels:[{TPM_Ele_Type:"script",src:"//connect.facebook.net/en_US/sdk.js",id:"facebook-login-jssdk",onload:()=>{Oe.log(`fb-login-sdk script success, window.FB is ${!!window.FB}`),!this._ALREADY_INIT&&window.FB&&(window.FB.init({...Re(Be,this)}),this._ALREADY_INIT=!0)},onerror:()=>{Oe.error("facebook-login-sdk script fail.")}}]}}_getInitFbMessenger({pageId:e,refContent:t,dialogShowCb:o,renderCb:n}){return{datas:"facebook-messenger-datas",pixels:[{TPM_Ele_Type:"script",src:this._LOCAL_SDK_URL_MAP[xe||"us"],id:"facebook-messenger-jssdk",onload:()=>{var i,a,r,s;Oe.log(`fb-messenger-sdk script success, window.FB is ${!!window.FB}`),this._ALREADY_INIT||(window.FB.init({...Re(Be,this)}),this._ALREADY_INIT=!0);var c=document.getElementById("fb-customer-chat");null==c||c.setAttribute("page_id",e),null==c||c.setAttribute("attribution","biz_inbox"),null==c||c.setAttribute("ref",t),null===(i=window.FB)||void 0===i||null===(a=i.Event)||void 0===a||a.subscribe("xfbml.render",(function(){null==n||n()})),null===(r=window.FB)||void 0===r||null===(s=r.Event)||void 0===s||s.subscribe("customerchat.dialogShow",(()=>{null==o||o()}))},onerror:()=>{Oe.error("facebook-messenger-sdk script fail.")}}]}}}(0,T.A)(qe,"name","FacebookSDK");const{templateType:Fe,SiteUID:Ue}=gbCommonInfo;var Ge=o(156789),$e=o(313126),je=o(219209);function He(){return new Promise((e=>{requestIdleCallback((()=>e()))}))}function Ke(e){return(0,Ge.c)(e)&&e.length&&e.every((e=>e.TPM_Ele_Type))}function We(e){return Ke(e)||(0,je.y)(e)||(0,$e.T)(e)}var Ye=o(177279);const Je=function({name:e,tags:t={},message:o}){Ye.JY.metricCount({metric_name:e,tags:{...t},message:o})};const Ve=["Conversion","Remarketing","DV360"];var Qe=o(665640);const ze=function e(t,o){const n=e=>e&&"object"==typeof e&&!Array.isArray(e),i=(e,t)=>"null"===e?null===t:"array"===e?Array.isArray(t):typeof t===e;for(let a in t){const r=t[a],s=o[a];if(void 0===s)return Qe.error(`字段 "${a}" 缺失`),`字段 "${a}" 缺失`;if("string"==typeof r){if(!i(r,s))return Qe.error(`字段 "${a}" 的类型错误，期待 "${r}"，实际 "${typeof s}"`),`字段 "${a}" 的类型错误，期待 "${r}"，实际 "${typeof s}"`}else if(n(r)){if(!n(s))return Qe.error(`字段 "${a}" 的类型错误，期待为对象`),`字段 "${a}" 的类型错误，期待为对象`;if(!0!==e(r,s))return`字段 "${a}" 的子校验失败`}else if(Array.isArray(r)){if(!Array.isArray(s))return Qe.error(`字段 "${a}" 的类型错误，期待为数组`),`字段 "${a}" 的类型错误，期待为数组`;const t=r[0];for(let o of s)if(!0!==e(t,o))return Qe.error(`字段 "${a}" 中的数组元素校验失败`),`字段 "${a}" 中的数组元素校验失败`}}return!0},Xe={pageview:null,viewhome:null,viewlist:{cat_info:{type:"string",page:"number"},goods:[{goods_id:"string",goods_sn:"string"}]},viewcontent:{id:"string",sku:"string",price:"string",usd_price:"string",category:"string"},viewcart:{carts:[{product:{goods_sn:"string",size:"string"},quantity:"string",unitPrice:{amount:"string"}}],currency:"string",prices:{totalPrice:{amount:"string"}}},addcart:{id:"string",sku:"string",usd_price:"number",category:"string",quantity:"number"},addwish:{id:"string",price:"string"},signup:{isNewUser:"boolean",member_id:"string",register_method:"string"},checkout:{carts:[{product:{goods_id:"string",goods_sn:"string",size:"string"},quantity:"string",unitPrice:{amountWithSymbol:"string"}}],currency:"string",prices:{totalPrice:{usdAmount:"string",amount:"string"}}},purchase:{orderInfo:{billno:"string",relation_billno:"string",member_id:"string",currency_code:"string",orderGoodsList:[{goods_id:"string",quantity:"string",attr_value_en:"string",product:{brand:"string",cat_id:"string",size:"string",goods_id:"string",goods_sn:"string",goods_name:"string"},unitPrice:{amount:"string",usdAmount:"string"}}],totalPrice:{amount:"string",usdAmount:"string"}}}};var Ze=o(665640);function et(e,t){return e.get(ot(e,t))}function tt(e,t,o){return e.set(ot(e,t),o),o}function ot(e,t,o){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:o;throw new TypeError("Private element is not present on this object")}var nt=new WeakMap,it=new WeakMap,at=new WeakMap,rt=new WeakMap;class st{constructor(e){(0,L.A)(this,nt,["pageview","viewhome","viewlist","viewcontent","viewcart","addcart","addwish","signup","checkout","placeorder","purchase"]),(0,L.A)(this,it,["checkout","placeorder"]),(0,L.A)(this,at,!1),(0,L.A)(this,rt,null),tt(rt,this,e),this.eventPools={},et(nt,this).forEach((e=>{this.eventPools[e]={subscribers:{},events:[]}}))}publish(e,t){try{const n=null==Xe?void 0:Xe[e];if(n){const i=ze(n,t);if(!0!==i){let n=t;var o;if("viewlist"===e)n=JSON.parse(JSON.stringify(t)),n.goods=(null===(o=n.goods)||void 0===o?void 0:o.slice(0,6))||[];!function({scene_type:e="",error:t="",data:o="",report_from:n=""}){Ye.Vc.logInfo({tag:"ADVERTISING_VALIDATE_PIXEL_ERROR_TAG",message:t,params:{scene_type:e,message:t,data:o,report_from:n}},{immediate:!0})}({scene_type:e,error:i,data:JSON.stringify(n||{}),report_from:window.location.href||"unknown"})}}}catch(e){Ze.log(e)}this.eventPools[e].events.push(t),et(rt,this).log("publish",{scene:e,event:t}),et(at,this)&&(et(rt,this).log("fireScene in publish",{scene:e}),this.fireScene(e))}subscribe(e,t){et(nt,this).forEach((o=>{t[o]&&(this.eventPools[o].subscribers[e]=t)}))}async fireAll(){et(rt,this).log("fireAll"),tt(at,this,!0),await Promise.all(Object.keys(this.eventPools).map((e=>this.fireScene(e)))),et(rt,this).log("fireAll complete")}async fireScene(e){var t;const o=this.eventPools[e];if(!o.events.length)return;const n=et(it,this).includes(e);let i=[];const a=(null===(t=window.SaPageInfo)||void 0===t?void 0:t.page_name)||"unknown",r=o.events.map((t=>Object.values(o.subscribers).map((async o=>{const r=function(e){var t;const o=null===(t=e.constructor)||void 0===t?void 0:t.name;return o?Ve.includes(o)?`Google-${o}`:o:null}(o);r&&function({scene_type:e="",advertiser:t="",report_from:o=""}){Je({name:"web_advertising_report_total",tags:{report_from:o,scene_type:e,advertiser:t},message:"Advertising report total"})}({advertiser:r,scene_type:e,report_from:a}),!n&&await He(),et(rt,this).log("fireScene",{scene:e,event:t,subscriber:o});try{const n=o[e](t);return We(n)&&(i=i.concat(n)),{advertiserName:r,status:"success"}}catch(t){return function({scene_type:e="",advertiser:t="",error:o=""}){Ye.Vc.logInfo({tag:"ADVERTISING_THIRD_REPORT_ERROR_TAG",message:o,params:{scene_type:e,advertiser:t,message:o}},{immediate:!0})}({scene_type:e,advertiser:r,error:t}),{advertiserName:r,status:"fail"}}}))));o.events=[];const s=await Promise.all(Array.prototype.concat(...r));et(rt,this).log("fireScene complete",e),i.length&&et(rt,this).appendDom({domDataList:i,comment:e}),s.length&&s.forEach((t=>{const{status:o,advertiserName:n}=t;"success"===o&&function({scene_type:e="",advertiser:t=""}){Je({name:"web_advertising_third_report_total",tags:{scene_type:e,advertiser:t},message:"Advertising third report total"})}({scene_type:e,advertiser:n})}))}}var ct=o(665640);function lt(e,t){return e.get(function(e,t,o){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:o;throw new TypeError("Private element is not present on this object")}(e,t))}var dt=new WeakMap,ut=new WeakMap;window.TPM=new class{get OL_MODE(){return this.preprocessingData.ENV.PRODUCTION||"testmode"===sessionStorage.tpm}set OL_MODE(e){sessionStorage.tpm=e?"testmode":"",location.reload()}get SHOW_LOG(){return"show"===sessionStorage.tpm_log}set SHOW_LOG(e){sessionStorage.tpm_log=e?"show":"",location.reload()}constructor(e){(0,L.A)(this,dt,{ONLOAD:!1,DEPS:!1,FIRE_ALL:!1,SDK:!1}),(0,L.A)(this,ut,{List:[],Count:0}),(0,T.A)(this,"marketings",{}),(0,T.A)(this,"preprocessingData",null),(0,T.A)(this,"isExecution",!1),this.eventCenter=new st(this),this.preprocessingData="[object Object]"===Object.prototype.toString.call(e)?e:{},this.initSources(n||{}),"complete"===document.readyState?setTimeout((()=>{requestIdleCallback((()=>{this.syncStatus("ONLOAD")}))}),0):window.addEventListener("load",(()=>this.syncStatus("ONLOAD")))}syncStatus(e){lt(dt,this)[e]=!0,!0===lt(dt,this).ONLOAD&&(lt(dt,this).ONLOAD="done",this.preconnect(),this.load()),!0===lt(dt,this).SDK&&!0===lt(dt,this).FIRE_ALL&&(lt(dt,this).SDK=lt(dt,this).FIRE_ALL="done",window.dispatchEvent(new Event("TPM_SDK_Loaded")))}preconnect(){if(!this.OL_MODE)return;const e=function(){let e=["//s3.amazonaws.com"];return"us"===Ue&&e.push("//amplify.outbrain.com","//snap.licdn.com","//ads.nextdoor.com"),"ru"===Ue&&e.push("//mc.yandex.ru"),"jp"===Ue&&e.push("//cdn.smartnews-ads.com","//s.yimg.jp"),"asia"===Ue&&e.push("//wcs.naver.net"),"mx"===Ue&&e.push("//dtm-dre.platform.hicloud.com"),"paySuccess"===Fe&&"us"===Ue&&e.push("//s.amazon-adsystem.com"),["us","fr","rwus"].includes(Ue)&&e.push("//sc-static.net"),e}().map((e=>({TPM_Ele_Type:"link",rel:"preconnect",href:e})));this.appendDom({domDataList:e,parentEle:"head",comment:"preconnect"})}async load(){const e=await async function(e){return e?Object.assign({},...await Promise.all([Promise.all([o.e(51144),o.e(64082)]).then(o.bind(o,896422)),"paySuccess"===Fe?o.e(65672).then(o.bind(o,782987)):{}])):{}}(this.OL_MODE);this.initSources(e),!this.isExecution&&this.watchSDKFinish(),this.appendDom({domDataList:lt(ut,this).List,comment:"load"}),await this.eventCenter.fireAll(),this.syncStatus("FIRE_ALL")}initSources(e){const{marketings:t,pixelList:o}=Object.values(e).reduce((({marketings:e,pixelList:t},o)=>{const n=new o(this.preprocessingData);let i;if(e[o.name]=n,!1!==n.active){var a,r;const{apolloConfig:e,ENV:t}=this.preprocessingData;var s,c;if(null!==(a=e[o.name])&&void 0!==a&&a[t.SiteUID]||null!==(r=e[o.name])&&void 0!==r&&r.disabledAll)n.shutdownByApollo=!0;else this.eventCenter.subscribe(o.name,n),i=null===(s=n.init)||void 0===s?void 0:s.call(n),null!==(c=i)&&void 0!==c&&c.length&&"script"===i[0].TPM_Ele_Type&&i[0].src&&(i[0].name=i[0].name||n.constructor.name)}return{marketings:e,pixelList:We(i)?t.concat(i):t}}),{marketings:{},pixelList:[]});Object.assign(this.marketings,t),lt(ut,this).List=lt(ut,this).List.concat(o)}watchSDKFinish(){this.isExecution=!0,lt(ut,this).List.forEach((e=>{"script"===e.TPM_Ele_Type&&(e.onload&&(e.TPM_PixelCallback=e.onload),e.onerror&&(e.TPM_ErrorCallback=e.onerror),++lt(ut,this).Count,e.onload=()=>{var t;null===(t=e.TPM_PixelCallback)||void 0===t||t.call(e),this.log(`SDK load (${--lt(ut,this).Count} left)`,e),lt(ut,this).Count||"done"===lt(dt,this).SDK||(this.log("SDK load complete"),this.syncStatus("SDK"))},e.onerror=t=>{var o;null===(o=e.TPM_ErrorCallback)||void 0===o||o.call(e);const{name:n,src:i}=e;!function({advertiser:e="",src:t="",error:o=""}){Ye.Vc.logInfo({tag:"ADVERTISING_SDK_LOAD_ERROR_TAG",message:o,params:{advertiser:e,src:t,message:o}},{immediate:!0})}({advertiser:n,src:i,error:t})})})),setTimeout((()=>{"done"!==lt(dt,this).SDK&&(this.log("SDK load timeout"),this.syncStatus("SDK"))}),5e3)}async appendDom({domDataList:e=[],parentEle:t="body",comment:o=""}){if(!(e=this.checkPixel(e,t,o)).length)return;const n=`TPM-anchor-${o}`;let i=document.getElementById(n);const a=document.createDocumentFragment();!i&&a.appendChild(document.createComment(` #TPM - Start | ${o} `)),e.forEach((e=>{const t=document.createElement(e.TPM_Ele_Type);Object.keys(e).forEach((o=>{var n;switch(o){case"TPM_Ele_Type":"script"===e.TPM_Ele_Type?t.async=!0:"link"!==e.TPM_Ele_Type&&(t.style.display="none");break;case"TPM_Config":case"TPM_PixelCallback":break;case"src":case"href":t[o]=null===(n=e.TPM_Config)||void 0===n||!n.CDN||this.preprocessingData.ENV.CDN_READY?"https:"+e[o]:e[o];break;default:t[o]=e[o]}})),a.appendChild(t)})),i?(await He(),this.log("appendDom",{comment:o}),document[t].insertBefore(a,i)):(i=document.createElement("span"),i.id=n,i.style.display="none",a.appendChild(i),a.appendChild(document.createComment(` #TPM -  End  | ${o} `)),"preconnect"!==o&&await He(),this.log("appendDom",{comment:o}),document[t].appendChild(a))}checkPixel(e,t,o){return e.filter((e=>((0,$e.T)(e)&&(e=e()),(0,je.y)(e)?(e.then((e=>Ke(e)&&this.appendDom({domDataList:e,parentEle:t,comment:`async ${o}`}))).catch((e=>this.log("checkPixel catch error",{error:e,comment:`async ${o}`}))),!1):Ke(e)?(this.appendDom({domDataList:e,parentEle:t,comment:`func ${o}`}),!1):!!e.TPM_Ele_Type)))}publish(e,t){this.eventCenter.publish(e,t)}async run(e){try{return await He(),this.parseCustomReturns(await this._runImmediate(e,!0),!0)}catch(e){return ct.error(e),{message:e}}}runImmediate(e){try{return this.parseCustomReturns(this._runImmediate(e))}catch(e){return ct.error(e),{message:e}}}_runImmediate({marketing:e,method:t,params:o},n){const i=(e=this.marketings[e])?!1===e.active||!0===e.shutdownByApollo?"FAIL: marketing is disabled.":e[t]?"":"ERROR: method not fount.":"ERROR: marketing does not exist.";if(i)throw new Error(i);const a=e[t](o);if(!n&&(0,je.y)(a))throw new Error("WARNING: promise returns detected, use TPM.run instead. returns would be ignored.");return a}parseCustomReturns(e,t){const{datas:o,pixels:n}=e||{};return We(n)&&this.appendDom({domDataList:n,comment:t?"async custom":"custom"}),{datas:o,message:"success"}}log(){this.SHOW_LOG&&ct.log("[TPM]",...arguments)}}({ENV:{PRODUCTION:"production"===gbCommonInfo.NODE_SERVER_ENV,SiteUID:gbCommonInfo.SiteUID,CDN_READY:!!gbCommonInfo.PUBLIC_CDN},apolloConfig:gbCommonInfo.TPM_BLACKLIST}),l.default.get({key:"ugid"}).then((()=>{}));o(16871);var pt=o(119189),_t=(o(619442),o(171482)),mt=(o(72656),o(290165));const{PUBLIC_CDN:gt,NODE_SERVER_ENV:ht,RISK_SDK_DOWNGRADE:ft,SiteUID:wt}=gbCommonInfo,{generateConsole:vt}=o(339816);window._GB_DeviceFingerPrint=new class{constructor(){(0,T.A)(this,"abtResult",{}),(0,T.A)(this,"isSdkJsLoading",!1),(0,T.A)(this,"isSdkJsLoaded",!1),(0,T.A)(this,"isSdkIniting",!1),(0,T.A)(this,"isSdkInited",!1),(0,T.A)(this,"isRetrying",!1),(0,T.A)(this,"isRetryed",!1),(0,T.A)(this,"isInitXhred",!1),(0,T.A)(this,"smDeviceId",""),(0,T.A)(this,"callbackStash",[]),(0,T.A)(this,"timeoutID",null),this.getAbtResult()}getAbtResult(){this.initDeviceConfig()}initDeviceConfig(){this.sdkBeforeLoad(),this.sdkDowngrade()||(window._smReadyFuncs=[],window.SMSdk={ready:e=>e&&window._smReadyFuncs.push(e)},window._smConf={organization:"FPNyuLhAtVnAeldjikus",isOpenUserBehavior:!1,apiHost:`${location.host}/devices`},window._c_smConf={onsuccess:()=>{this.sdkStartInit()}},this.isSdkJsLoading=!0,(0,le.t)({label:"script",attrs:{async:!0,src:`${gt}/she_dist/libs/devices/fpv2.7.js`}}).then((()=>{this.isSdkJsLoading=!1,this.isSdkJsLoaded=!0,this.sdkStartInit()})).catch((()=>{this.isSdkJsLoading=!1,this.callReTryCallabck()})))}sdkStartInit(){this.isSdkIniting=!0,window.SMSdk&&window.SMSdk.ready&&SMSdk.ready((()=>{this.isSdkIniting=!1,this.isSdkInited=!0;try{const e=SMSdk.getDeviceId&&SMSdk.getDeviceId()||"";this.isSdkReady=!0,this.isSdkIniting=!1,this.smDeviceId=e,window.__SmDeviceId=e,window.sessionStorage&&window.sessionStorage.setItem("SmDeviceIdAbt",!0),(0,mt.setSessionStorage)({key:"SmDeviceId",value:e}),this.sdkAfterLoad(e),this.callReTryCallabck()}catch(e){this.callReTryCallabck()}}))}sdkBeforeLoad(){const e=window.localStorage&&window.localStorage.getItem("SmDeviceId")||"";window.__SmDeviceId=e,this.smDeviceId=e,window.sessionStorage&&window.sessionStorage.setItem("SmDeviceIdAbt",!0),window.sessionStorage&&window.sessionStorage.setItem("SmDeviceId",e),this.listenXhrBefore(),"production"!==ht&&(e?vt("SmDeviceId Cache Loading Successfully",e):vt("SmDeviceId Cache Loading Failed"))}sdkAfterLoad(e){window.localStorage&&window.localStorage.setItem("SmDeviceId",e),"production"!==ht&&vt("SmDeviceId SDK Loading Successfully",e)}listenXhrBefore(){const e=this;if(this.isInitXhred)return;this.isInitXhred=!0;const t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){let o=arguments;if(t.apply(this,o),e.isInSite(o)){const t=e.smDeviceId.split(",")[0];this.setRequestHeader("SmDeviceId",e.sdkDowngrade()?"":t||"")}}}isInSite(e){const t=e&&e[1]||"";if(!/^http(s)?:\/\//.test(t))return!0;return!!new RegExp(`^http(s)?://${location.host}`).test(t)}callReTryCallabck(){this.isRetrying&&(clearTimeout(this.timeoutID),this.isReTried=!0,this.isRetrying=!1,this.callbackStash.forEach((e=>{"function"==typeof e&&e()})),this.callbackStash=[])}retryInit(e){if(this.isReTried)return"function"==typeof e&&e();if(this.callbackStash.push(e),!this.isRetrying){if(this.isRetrying=!0,this.timeout(),this.abtResult.param)return this.isSdkJsLoaded?void(this.isSdkJsLoading||(this.isSdkInited?this.isSdkIniting||this.callReTryCallabck():this.sdkStartInit())):this.initDeviceConfig();this.getAbtResult()}}callFunc(e){""!=this.smDeviceId?"function"==typeof e&&e():this.retryInit(e)}callFuncPromise(){return new Promise((e=>{this.callFunc((t=>e(t)))}))}timeout(){this.timeoutID=setTimeout((()=>{this.callReTryCallabck()}),5e3)}sdkDowngrade(){var e;const t=(null==ft||null===(e=ft.sm)||void 0===e?void 0:e.siteuid)||[];return t.includes("ALL")||t.includes(wt)}};var yt=o(665640);const{ARMOR_CDN:bt,langPath:St,WEB_CLIENT:kt,NODE_SERVER_ENV:It,IS_OPEN_FEATURE_DECTOR:Pt,RISK_SDK_DOWNGRADE:Et,SiteUID:Ct,RISK_SDK_CONFIG:At}=gbCommonInfo,{generateConsole:Tt}=o(339816);window._GB_DeviceDeviceInfp=new class{constructor(){(0,T.A)(this,"AntiDevices",null),(0,T.A)(this,"armorToken",""),window._INCONF={appName:kt,apiHost:s.A?"":St,channel:0,isOpenIntervalReport:!0,isOpenFeatureDector:Pt||!1,schttp:s.A,siLog:Ye.Ay,onsuccess:()=>{this.sdkStartInit()}},this.initDeviceConfig()}initDeviceConfig(){var e;if(this.sdkBeforeLoad(),this.sdkDowngrade())return;const t=(null==At||null===(e=At.dynamicInfp)||void 0===e?void 0:e.path)||"infp.3.9.1.min.js",o=this.asyncLoadFile({label:"script",attrs:{async:!0,src:`${bt}/she_dist/armor-libs/infp/${t}`}});this.retryFn(o,3,5e3).then((()=>{this.AntiDevices=window.AntiDevices,this.sdkStartInit()})).catch((e=>{yt.error(e)}))}async retryFn(e,t,o){return new Promise(((n,i)=>{let a,r=0;const s=async()=>{try{const t=await e;n(t)}catch(e){r<t?(r++,clearTimeout(a),a=setTimeout(s,o)):i(e)}};a=setTimeout(s,o)}))}isInSite(e){const t=e&&e[1]||"";if(!/^http(s)?:\/\//.test(t))return!0;return!!new RegExp(`^http(s)?://${location.host}`).test(t)}listenXhrBefore(){const e=this,t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){let o=arguments;t.apply(this,o),e.isInSite(o)&&this.setRequestHeader("armorToken",e.sdkDowngrade()?"":e.armorToken||"")}}sdkStartInit(){try{const e=window.AntiDevices.getArmorToken();this.armorToken=e,this.sdkAfterLoad(e)}catch(e){yt.log(e)}}sdkBeforeLoad(){var e,t;const o=window.localStorage&&window.localStorage.getItem("armorToken")||"";window.__ArmorToken=o,this.armorToken=o,window.sessionStorage&&window.sessionStorage.setItem("armorToken",o);const n=(null==At||null===(e=At.spider)||void 0===e?void 0:e.siteuid)||[];1==(null==At||null===(t=At.spider)||void 0===t?void 0:t.xhr)||n.includes(Ct)||this.listenXhrBefore(),"production"!==It&&(o?Tt("ArmorToken Cache Loading Successfully",o):Tt("ArmorToken Cache Loading Failed"))}sdkAfterLoad(e){window.__ArmorToken=e,window.sessionStorage&&window.sessionStorage.setItem("armorToken",e),window.localStorage&&window.localStorage.setItem("armorToken",e),"production"!==It&&Tt("ArmorToken SDK Loading Successfully",e)}sdkDowngrade(){var e;const t=(null==Et||null===(e=Et.infp)||void 0===e?void 0:e.siteuid)||[];return t.includes("ALL")||t.includes(Ct)}asyncLoadFile({label:e,attrs:t={},inBody:o=!0}){return new Promise(((n,i)=>{const a=document.createElement(e);Object.keys(t).forEach((e=>{a.setAttribute(e,t[e])})),a.onload=n,a.onerror=i,document.getElementsByTagName(o?"body":"head")[0].appendChild(a)}))}};class Lt{constructor(){(0,T.A)(this,"SDK_NAME",["antiin","main.js","infp"]),(0,T.A)(this,"resourceQueue",[])}send(){this.resourceQueue.forEach((e=>{var t,o,n;const{tags:i,value:a}=e;null===Ye.JY||void 0===Ye.JY||Ye.JY.metricTime({metric_name:"risk_sdk_js_resource_duration",tags:i,value:a},{random:(null===(t=gbCommonInfo)||void 0===t||null===(o=t.RISK_SDK_CONFIG)||void 0===o||null===(n=o.performance)||void 0===n?void 0:n.random)||.05})}))}push(e){var t,o;this.resourceQueue.push({tags:{site:(null===(t=gbCommonInfo)||void 0===t?void 0:t.SiteUID)||"",name:`${e.name}`.split("/").slice(-1)[0]||"",channel:"PC",deliverType:e.deliveryType,responseStatus:e.responseStatus,isMember:l.default.get({key:"memberId",actionType:"performance_safe"})?1:0,pageName:(null===(o=gbCommonInfo)||void 0===o?void 0:o.ENTRY_PAGE_NAME)||""},value:e.duration||null})}}window.addEventListener("TPM_SDK_Loaded",(()=>{if("undefined"!=typeof window){var e;const{RISK_SDK_CONFIG:t}="undefined"!=typeof gbCommonInfo?gbCommonInfo:{};if(null!=t&&null!==(e=t.performance)&&void 0!==e&&e.open){const e=new Lt;performance.getEntriesByType("resource").forEach((t=>{e.SDK_NAME.map((o=>{t.name.indexOf(o)>-1&&e.push(t)}))})),e.send()}}}));var Nt=o(372268),Dt=o(665640);const{SiteUID:Ot}=gbCommonInfo;!async function(){try{const{Movepoints:t}=await D.T.getUserAbtResult({posKeys:"Movepoints"}),{param:o}=t;if((0,k.isLogin)()&&"type=B"==o){var e;const t=Nt.A.get({key:"memberId",actionType:"point_migrate"})||"",o=localStorage.getItem(`${t}_${Ot}_isEverLogined`)||"";let n=localStorage.getItem(`${t}_${Ot}_pointMigrateFlag`)?JSON.parse(localStorage.getItem(`${t}_${Ot}_pointMigrateFlag`)):{},i=(new Date).getTime(),a=n?n.time:"";o||(localStorage.setItem(`${t}_${Ot}_isEverLogined`,!0),(0,s.A)({url:"/api/user/points/autoMigrate/update"}).then((e=>{var o;0==e.code&&e.info?1!=(null===(o=e.info)||void 0===o?void 0:o.result)?localStorage.setItem(`${t}_${Ot}_pointMigrateFlag`,JSON.stringify({status:"error",time:(new Date).getTime()})):localStorage.setItem(`${t}_${Ot}_pointMigrateFlag`,JSON.stringify({status:"success",time:(new Date).getTime()})):localStorage.setItem(`${t}_${Ot}_pointMigrateFlag`,JSON.stringify({status:"error",time:(new Date).getTime()}))})).catch((()=>{localStorage.setItem(`${t}_${Ot}_pointMigrateFlag`,JSON.stringify({status:"error",time:(new Date).getTime()}))}))),["/","/user/index","/user/points","/checkout"].includes(null===(e=location)||void 0===e?void 0:e.pathname)&&"error"==(null==n?void 0:n.status)&&a&&i-a>6e5&&(0,s.A)({url:"/api/user/points/autoMigrate/update"}).then((e=>{var o;0==e.code&&e.info?1!=(null===(o=e.info)||void 0===o?void 0:o.result)?localStorage.setItem(`${t}_${Ot}_pointMigrateFlag`,JSON.stringify({status:"error",time:(new Date).getTime()})):localStorage.setItem(`${t}_${Ot}_pointMigrateFlag`,JSON.stringify({status:"success",time:(new Date).getTime()})):localStorage.setItem(`${t}_${Ot}_pointMigrateFlag`,JSON.stringify({status:"error",time:(new Date).getTime()}))})).catch((()=>{localStorage.setItem(`${t}_${Ot}_pointMigrateFlag`,JSON.stringify({status:"error",time:(new Date).getTime()}))}))}}catch(e){Dt.log(e)}}();o(619672);var Rt=o(566426),Mt=o(839471),xt=o(105113);const{langPath:Bt,lang:qt,IS_RW:Ft}=gbCommonInfo;(0,k.GG)((function(){requestAnimationFrame((function(){document.querySelectorAll(".j-customer-vue").length&&Promise.all([o.e(52074),o.e(7526),o.e(66948),o.e(18781),o.e(53908)]).then(o.bind(o,116166)).then((({default:e})=>{(new e).init()}))})),window.V_Comp={},(()=>{var e=gbCommonInfo.currencies,t=window.check_freeShippingTips_promise=xt.m.check_freeShippingTips_promise()||null;t&&t.then((async function(t){var o=(0,i.e)({key:"currency"})||t.currency;e[o]&&e[o].code&&(document.querySelectorAll(".j-currency-"+e[o].code).forEach((e=>{const t=e.parentElement;t&&(t.classList.remove("j-change-currency"),t.classList.add("active"))})),document.querySelectorAll(".j-range-currency").forEach((t=>{t.innerText=e[o].code})),window.GB_SHEIN_currency=e[o].code);const n=await(0,s.A)({url:"/api/others/getShippingFreeDetails/get"}),a=(null==n?void 0:n.list)||[],r=await Rt.A.loadByQueue("header");var c=[];if(a&&a.length){var l=[],d={"EXPRESS SHIPPING":r.SHEIN_KEY_PC_14681,"ECONOMIC SHIPPING":r.SHEIN_KEY_PC_16129,"STANDARD SHIPPING":r.SHEIN_KEY_PC_14682,"PICK UP AT CONVENIENCE STORE":r.SHEIN_KEY_PC_16131},u={"EXPRESS SHIPPING":r.SHEIN_KEY_PC_14684,"ECONOMIC SHIPPING":r.SHEIN_KEY_PC_18178,"STANDARD SHIPPING":r.SHEIN_KEY_PC_14685,"PICK UP AT CONVENIENCE STORE":'<strong style="color:#f35b6e; font-weight:700">'+r.SHEIN_KEY_PC_17102+"</strong>"};a.forEach((function(e){if(d[e.title]){var t,o,n="<span>"+(0,Mt.v)(null==e||null===(t=e.full_amount)||void 0===t?void 0:t.amountWithSymbol,d[e.title])+"</span>",i="<span>"+u[e.title]+"</span>",a=Number(null==e||null===(o=e.full_amount)||void 0===o?void 0:o.amount);a>0?l.push(n):0==a&&0==e.shippingPrices.amount&&l.push(i)}})),c=l.map((function(e){var t,o;return`<li><a href=${Bt+`/Shipping-Info-a-${Ft?471:280}.html`}>${e}${null!=n&&null!==(t=n.mallInfo)&&void 0!==t&&t.mall_name&&"mx"!==qt?`<span class="shipping-info_mall">(${r.SHEIN_KEY_PC_22820} ${null==n||null===(o=n.mallInfo)||void 0===o?void 0:o.mall_name})</span>`:""}</a></li>`}))}t.freeShippingTips&&t.freeShippingTips.length&&JSON.parse(t.freeShippingTips).forEach((function(e){c.push('<li class="discount">'+e.replace(/http\:\/\/\w+.shein.\w+/gi,Bt).replace(/\s/g,"{space}").replace(/\{space\}/g," ")+"</li>")}));const p={param:"type=A",postkey:"TopRotation"};if("type=B"!==(null==p?void 0:p.param)){const e=document.querySelector(".j-free-shipping");e&&(e.innerHTML=c.join(""))}const _=document.querySelectorAll(".j-free-shipping >li");var m=0,g=!1,h=_.length;setInterval((function(){!g&&(m>h-2?(_.forEach((e=>{e.classList.add("she-none"),e.classList.remove("animated"),e.classList.remove("flipInX"),e.classList.remove("she-block")})),m=0,_[0]&&(_[0].classList.add("animated"),_[0].classList.add("flipInX"),_[0].classList.add("he-block"),_[0].classList.remove("she-none"))):(_.forEach((e=>{e.classList.add("she-none"),e.classList.remove("animated"),e.classList.remove("flipInX"),e.classList.remove("she-block")})),_[m+1]&&(_[m+1].classList.remove("she-none"),_[m+1].classList.add("animated"),_[m+1].classList.add("flipInX"),_[m+1].classList.add("she-block")),m++))}),3e3);const f=document.querySelector(".j-free-shipping");f&&(f.addEventListener("mouseenter",(()=>{g=!0})),f.addEventListener("mouseleave",(()=>{g=!1})))}))})()}));var Ut=o(410761),Gt=o(346443);const{SHEIN_KEY_PC_14541:$t}=gbCommonInfo&&gbCommonInfo.language||{},jt=window._GB_EventCenter=(0,Ut.A)();window.SHEIN_GLOBAL_PRIVACY={show:function(e){(function(e){const{IS_RW:t,langPath:o}=gbCommonInfo,n={privacy:{id:t?488:282,link:"/Privacy-Security-Policy-a-{0}.html"},termsAndConditions:{id:399,link:"/Terms-and-Conditions-a-{0}.html"},privacyCenter:{id:1045,link:"/Privacy-Center-a-{0}.html"}},{type:i}=e,{id:a,link:r}=n[i]||{};return!!a&&(!!r&&(window.open(o+r.replace("{0}",a),"_blank"),!0))})(e)||(void 0===window._GB_GobalPrivayInstance?function(e){const t=function(){const e=document.createElement("div");e.setAttribute("class","j-global-privacy-loading"),e.innerHTML='<modal-vue :show="isShowLoading" :loading="true"></modal-vue>';const t=document.createElement("div");return t.setAttribute("class","j-global-privacy"),{mainHtml:t,loadingHtml:e}}(),n=document.createDocumentFragment();n.appendChild(t.loadingHtml),n.appendChild(t.mainHtml),document.body.appendChild(n),(0,Gt.L)({type:"loading",message:`${$t}...`,duration:0}),Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(46330),o.e(45875)]).then(o.bind(o,946800)).then((()=>{jt.isLoadingJsModule=!1,setTimeout((()=>{jt.emit("event-global-privay-page-component",e),Gt.L.closeAll()}),0)}))}(e):jt.emit("event-global-privay-page-component",e))}};o(446428);var Ht=o(665640);const Kt=[e=>{Ht.log("SHEIN_LOGIN_BEFORE_TASK",e)}];var Wt=o(665640);const Yt=[({data:e,config:t})=>{Wt.log("SHEIN_LOGIN_AFTER_TASK",e,t)}];window.SHEIN_LOGIN_TASKS={BeforList:Kt,AfterList:Yt};var Jt=o(667439);const{SHEIN_KEY_PC_14541:Vt}=gbCommonInfo&&gbCommonInfo.language||{},Qt=(0,Ut.A)();Qt.opts={};let zt={default:null};window.Instances=zt;const Xt=new class{constructor(){(0,T.A)(this,"queue",[]),(0,T.A)(this,"cur",""),(0,T.A)(this,"opts",{})}getOpts(){return this.opts[this.cur]||{}}setOpts(e={}){return this.opts[this.cur]=e}push(e,t){e!=this.cur&&this.queue.push(e),this.cur=e,this.actionCb(t),this.setOpts(t)}pop(){const e=this.queue.pop();this.cur=this.queue[this.queue.length-1],this.opts[e]&&delete this.opts[e]}callCb(e){var t;const o=this.cur,n=null===(t=this.opts[o])||void 0===t?void 0:t.realCb;this.pop(),"function"==typeof n&&n(e)}actionCb(e){"function"==typeof e.cb&&(e.realCb=e.cb,e.cb=e=>{this.callCb(e)})}};let Zt=!1;function eo(e,t){zt[t].showPop(e)}window.SHEIN_LOGIN={instanceActions:Xt,show:function(e={}){var t;const n=e.instance||"default";Xt.push(n,e);const i=(null===(t=window)||void 0===t?void 0:t.isLoginSuccessRefresh)&&(null==e?void 0:e.isSwitchAccount);!zt[n]||i?Zt||(Zt=!0,Object.assign(e,{isRefresh:i}),function(e,t){(0,Jt.getLoginPageLanguage)((()=>{Promise.all([o.e(43212),o.e(52074),o.e(7526),o.e(66948),o.e(89433),o.e(24309),o.e(91183),o.e(93089),o.e(55998),o.e(44622)]).then(o.bind(o,409991)).then((o=>{zt[t]=o.default(),Gt.L.closeAll(),Zt=!1,eo(e,t)}))}),null==e?void 0:e.isRefresh)}(e,n),(0,Gt.L)({type:"loading",message:`${Vt}...`,duration:0})):eo(e,n)},eventBus:Qt,isShow(){var e,t,o,n;return!(null===(e=window)||void 0===e||null===(t=e.SHEIN_LOGIN)||void 0===t||null===(o=t.instanceActions)||void 0===o||null===(n=o.opts)||void 0===n||!n.default)}};var to=o(331108);const{SHEIN_KEY_PC_14541:oo}=gbCommonInfo&&gbCommonInfo.language||{},no=(0,Ut.A)();no.opts={};let io={default:null};window.Instances=io;const ao=new class{constructor(){(0,T.A)(this,"queue",[]),(0,T.A)(this,"cur",""),(0,T.A)(this,"opts",{})}getOpts(){return this.opts[this.cur]||{}}setOpts(e={}){return this.opts[this.cur]=e}push(e,t){e!=this.cur&&this.queue.push(e),this.cur=e,this.actionCb(t),this.setOpts(t)}pop(){const e=this.queue.pop();this.cur=this.queue[this.queue.length-1],this.opts[e]&&delete this.opts[e]}callCb(e){var t;const o=this.cur,n=null===(t=this.opts[o])||void 0===t?void 0:t.realCb;this.pop(),"function"==typeof n&&n(e)}actionCb(e){"function"==typeof e.cb&&(e.realCb=e.cb,e.cb=e=>{this.callCb(e)})}};let ro=!1;function so(e,t){io[t].showPop(e)}window.SHEIN_SIGNUP={instanceActions:ao,show:function(e={}){const t=e.instance||"default";ao.push(t,e),io[t]?so(e,t):ro||(ro=!0,function(e,t){(0,to.getLoginPageLanguage)((()=>{Promise.all([o.e(43212),o.e(52074),o.e(7526),o.e(66948),o.e(18781),o.e(81308),o.e(76988)]).then(o.bind(o,64208)).then((o=>{io[t]=o.default(),Gt.L.closeAll(),ro=!1,so(e,t)}))}))}(e,t),(0,Gt.L)({type:"loading",message:`${oo}...`,duration:0}))},eventBus:no};var co=o(990347),lo=o(973106);function uo(e=[],t="disagree"){const{NEED_REMOVE_STORAGES:o={}}=window.gbCommonInfo;e=e.filter((e=>!!e)).map((e=>e.startsWith("C000")?e:"C000"+(e-1)));let n=[];if("disagree"!=t){n=["C0001","C0002","C0003","C0004","C0005"].filter((t=>{var o;return!(null!==(o=e)&&void 0!==o&&o.includes(t))}))}else n=e;const i=[];n.forEach((e=>{const t=o[e];null!=t&&t.length&&i.push(...t)})),i.forEach((e=>(0,mt.removeLocalStorage)(e)))}var po=o(665640);const{CUSTOM_PRIVACY_SUPPORT:_o=[],SiteUID:mo,CUSTOM_CONSENT_SUPPORT:go=[]}=gbCommonInfo,ho={expose_privacy_popup:"2-42-1",click_privacy_popup:"2-42-2",click_privacy_setting:"2-42-3",expose_privacy_popup_stay:"2-42-4",click_privacy_save_setting:"2-42-5",click_privacy_footer_entrance:"2-42-6",click_privacy_footer_save:"2-42-7",expose_privacy_anomaly_causes:"2-42-8"};co.J.addSubscriber({modulecode:"2-42"});const fo=()=>{window._GB_PopUpModalEventCenter_.done("onetrust"),Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(36436)]).then(o.bind(o,14683)).then((()=>{SHEIN_BACKUP_ONETRUST.init((()=>{So((e=>{e?SHEIN_BACKUP_ONETRUST.show():SHEIN_BACKUP_ONETRUST.hide()}))})),"object"==typeof window.privacyCookieSdk&&null!==window.privacyCookieSdk||(window.privacyCookieSdk={}),window.privacyCookieSdk.openPreference=SHEIN_BACKUP_ONETRUST.settings}))},wo=()=>{(()=>{if(!window.gtag||!go.includes(mo))return;const e={ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",analytics_storage:"denied"},{agreeList:t=[]}=window.privacyCookieSdk.getCookieCategorySwitchsStatus();t.forEach((t=>{const{categoryId:o}=t;"C0002"===o&&(e.analytics_storage="granted"),"C0004"===o&&(e.ad_storage="granted",e.ad_user_data="granted",e.ad_personalization="granted")})),localStorage.setItem("gcmStorage",JSON.stringify(e)),window.gtag("consent","update",e)})(),(()=>{if(!window.uetq||!go.includes(mo))return;const e={ad_storage:"denied"},{agreeList:t=[]}=window.privacyCookieSdk.getCookieCategorySwitchsStatus();t.forEach((t=>{const{categoryId:o}=t;"C0004"===o&&(e.ad_storage="granted")})),window.localStorage.setItem("BingConsentMode","denied"===e.ad_storage?0:1),"function"==typeof window.uetq.push&&window.uetq.push("consent","update",e)})()};async function vo(){let e=!1;const t=await(0,s.A)({url:"/user-api/subscribe/webpush_detail",method:"POST",useBffApi:!0}),{code:o,info:n}=t;return 0==o&&Array.isArray(n)&&(e=n.some((e=>2===e.subscribe_status)),window.localStorage.setItem("subscribePermission",`${(new Date).getTime()}:${e?1:0}`)),e?1:0}const yo=async()=>{const{agreeList:e=[]}=window.privacyCookieSdk.getCookieCategorySwitchsStatus(),t=window.localStorage.getItem("subscribePermission")||"";let[o,n]=t.split(":");(!t||Date.now()-o>864e3)&&(n=await vo());const i=e.some((e=>"C0004"===e.categoryId)),a=window.localStorage.getItem("webpushDialogResult");i&&1!=n&&"0"===a&&window.localStorage.removeItem("webpushDialogResult"),i||l.default.clearStorage({key:"webpushcookie",actionType:"loadSheinPush"}),1!=n||i||async function(){await(0,s.A)({url:"/user-api/subscribe/webpush_unsubscribe",method:"POST",useBffApi:!0}),vo()}()};async function bo(){try{if(!_o.includes(mo)&&(window._GB_PopUpModalEventCenter_.done("onetrust"),1))return;if(window.privacyCookieSdkLoadedError)return void fo();if(window.addEventListener("privacyCookieSdkLoadedError",(()=>fo())),void 0===window.privacyCookieSdk)return void window.addEventListener("privacyCookieSdkInitCompleted",bo);const{disagreeList:e=[]}=window.privacyCookieSdk.getCookieCategorySwitchsStatus();uo(e.map((({categoryId:e})=>e))),window.addEventListener("privacyCookieSdkSubmit",(({detail:e={}})=>{var t;wo(),yo(),uo((null==e||null===(t=e.disagree)||void 0===t?void 0:t.split(","))||[])})),window.addEventListener("privacyCookieSdkTrack",(({detail:e={}})=>{const{event:t,attrs:o}=e,n=ho[t];n&&co.J.triggerNotice({daId:n,extraData:o})})),window.addEventListener("TPM_SDK_Loaded",(()=>{wo()})),So((e=>{e&&!window.privacyCookieSdkLoadedError&&window.privacyCookieSdk.showAgreementIfNeed()}))}catch(e){po.error("======弹出兜底弹窗=====",e),fo()}}function So(e,t=0){const o=(()=>{const{page_name:e}=window.getSaPageInfo||window.SaPageInfo||{};return e?!!["page_home","page_goods_detail","page_category","page_daily_new","page_real_class","page_select_class","page_search","page_goods_group"].includes(e):"unknown"})();"unknown"!==o&&window.privacyCookieSdk?e(o):t<=10?(t+=1,setTimeout(So,500,e,t)):e(!1)}(0,k.GG)((function(){requestAnimationFrame((()=>{document.querySelectorAll(".j-black-mask").length&&Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(54278)]).then(o.bind(o,258597)).then((({default:e})=>{(new e).init()}))}))}));var ko=o(834989),Io=o(806365),Po=o(665640);const{REPORT_URL:Eo}=gbCommonInfo,{MARKETING_URL:Co}=Eo;(()=>{try{const{url_from:e="",aff_id:t="",onelink:o="",scene:n="",campaign:i="",journey_name:a="",deeplink:r="",requestId:s=""}=(0,Io.J)(location.search);if(e||t||o||"onelink"===n){const t=Co+"/mdmpUserLanding",c={uuid:(0,ko.v4)(),onelink:o||a,reffer:location.href,campaign:i,journey_name:a,scene:n,deeplink:r,channel:e};window.sa("error",t,{activity_name:"Landing",requestId:s,...c}),window.sa("send",{activity_name:"click_marketing_url_landing",activity_param:{referer:encodeURIComponent(window.location.href),traffic_source:document.referrer||"",bu_department:"marketing",...c}})}o&&"oops"===gbCommonInfo.pageType&&window.sa("error",`${Co}/mdmpMarketingWebReport`,{activity_name:"click_onelink_web_error",activity_param:{bu_department:"marketing"},bu_department:"marketing",onelink:o||a})}catch(e){Po.log(e)}})();const Ao="sdk_analysis.b502a4c.js";var To=o(495644);function Lo(e,t,o,n){e.addEventListener(t,(t=>{const i=e.querySelectorAll(o);for(const e of i)if(e===t.target){n(t);break}}))}co.J.addSubscriber({modulecode:"1-22-2"}),co.J.addSubscriber({modulecode:"2-16"});const{IS_RW:No}=gbCommonInfo,Do=(0,mt.getLocalStorage)("cate_channel_type"),Oo={2:"shein"==WEB_CLIENT?"":"CccGirlsCategory",3:"shein"==WEB_CLIENT?"CccMenCategory":"CccGuysCategory",4:"CccKidsCategory",5:"CccHomeCategory",6:"CccPlussizeCategory",7:"CccSwimwearCategory",8:"CccSaleCategory",9:"CccBeautyHomepage"},Ro=No?{2:"Girls",3:"Guys",4:"Kids",5:"Home",6:"Plussize",7:"Swimwear",8:"Sale",9:"Beauty"}:{2:"Women",3:"Men",4:"Kids",5:"Home",6:"Plussize",7:"Swimwear",8:"Sale",9:"Beauty"},Mo=Oo[Do];let xo=!1;const{content_id:Bo,scene_key:qo,contentId:Fo,channelType:Uo,sceneKey:Go}=k._L.parse(location.search);var $o,jo,Ho,Ko;(Bo&&qo&&qo.includes("navigation")||Fo&&Uo&&Go&&Go.includes("navigation"))&&(xo=!0),window.S_TopBannerGA={ABTInfo:(0,To.T2)({posKeys:Mo})},(0,k.GG)((function(){let e=(0,To.T2)({posKeys:Mo});Lo(document,"click",".header-nav .j-free-shipping a",(e=>{const t=e.target.getAttribute("href");sa("send",{activity_name:"click_top_site_activity",activity_param:{activity_content:t}},{beacon:1})})),Lo(document,"click",".j-header-username-icon",(t=>{const o=t.target.getAttribute("href"),n=o.substring(o.lastIndexOf("/")+1);sa("send",{activity_name:"click_top_site_account",activity_param:{account_content:"0`"+n,abtest:e.sa}},{beacon:1})})),Lo(document,"click",".j-fast-cart .icon-bag, .j-sa-cart-1",(t=>{var o;const n=t.target.classList.contains(".j-sa-cart-1")?null===(o=t.target.querySelector("span"))||void 0===o?void 0:o.textContent.trim():t.target.textContent.trim();co.J&&co.J.triggerNotice({daId:"2-16-5",extraData:{bag_goods_count:n,abtest:e.sa}})})),Lo(document,"click",".header-nav .view-bag",(()=>{var t,o;const n=document.querySelectorAll(".j-sa-cart-1").length>0?null===(t=document.querySelector(".j-sa-cart-1 span"))||void 0===t?void 0:t.textContent.trim():null===(o=document.querySelector(".j-fast-cart .cart-num"))||void 0===o?void 0:o.textContent.trim();sa("send",{activity_name:"click_top_site_bag",activity_param:{bag_goods_count:n,type:2,abtest:e.sa}},{beacon:1})})),Lo(document,"click",".j-nav-first-cate",(t=>{if(xo)return;const o=(0,mt.getLocalStorage)("cate_channel_type"),n=Oo[o];e=(0,To.T2)({posKeys:n});const i=Number(t.target.dataset.index)+1,a=t.target.getAttribute("href");sa("send",{activity_name:"click_navigation_menu",activity_param:{first_menu_hole:i,first_menu_content:Ro[o],first_content_list:a,second_menu_hole:"",second_menu_content:"",third_menu_hole:"",third_menu_content:"",fourth_menu_hole:"",fourth_menu_content:"",abtest:e.sa,src_module:"topcat",src_identifier:"fc="+Ro[o]+"`sc=0`tc=0`oc=0`ps=tab0"+i+"`jc=0"}},{beacon:1})})),Lo(document,"click",".ft-left-list a",(e=>{const t=e.target,o=Number(t.dataset.index)+1,n=Number(t.dataset.subindex)+1,i=t.dataset.titlegroup,a=t.dataset.title,r=t.dataset.url;sa("send",{activity_name:"click_public_bottom",activity_param:{index:o+"_"+i+"`"+n+"_"+a,url:r}})}))})),Lo(document,"click",".j-app-icon .ft-community",(e=>{const t=e.target,o=Number(t.dataset.index)+1,n=t.dataset.title,i=t.dataset.url;sa("send",{activity_name:"click_public_bottom",activity_param:{index:"1_"+n+"`"+o+"_''",url:i}})}));const{SADA_SDK_CONFIG:Wo={},SiteUID:Yo}=gbCommonInfo;window.sada.registerFields({page_name:()=>{var e;return null===(e=SaPageInfo)||void 0===e?void 0:e.page_name},page_id:()=>{var e;return null===(e=SaPageInfo)||void 0===e?void 0:e.page_id},user_id:()=>l.default.get({key:"oest"})||"",armoruuid:(0,d.R)("armorUuid"),armortoken:window.__ArmorToken||(null===($o=window)||void 0===$o||null===(jo=$o.sessionStorage)||void 0===jo?void 0:jo.getItem("armorToken"))||(null===(Ho=window)||void 0===Ho||null===(Ko=Ho.localStorage)||void 0===Ko?void 0:Ko.getItem("armorToken"))||""});const{ad_sdk_off:Jo,ad_sdk_on_site:Vo=[]}=Wo;1!==(void 0!==Jo?Jo:Vo.length?!Number(Vo.includes(Yo)):0)&&(0,k.tK)({type:"script",src:"//cjs.ltwebstatic.com/unpkg/@shein-aidc/basis-sada@1.0.7/dist/sada.umd.js"});var Qo=o(665640);const zo={click({name:e,param:t="{}",beacon:o}){try{t=JSON.parse(t)}catch(e){Qo.log(e),t={}}sa("send",{activity_name:"click_"+e,activity_param:t},{beacon:o?1:0})},view({name:e,param:t="{}",beacon:o}){try{t=JSON.parse(t)}catch(e){Qo.log(e),t={}}sa("send",{activity_name:"expose_"+e,activity_param:t},{beacon:o?1:0})}};let Xo=0;const Zo="asyncClick";class en{constructor(){(0,T.A)(this,"NAMESPACE","DA-"),(0,T.A)(this,"viewedList",[]),(0,T.A)(this,"productList",[]),(0,T.A)(this,"waitViewList",[]),(0,T.A)(this,"syncClickEventCtx",{}),(0,T.A)(this,"asyncClickEventCtx",{})}init(){setTimeout((()=>{this.bindEvent()}),3e3),document.body.addEventListener("click",(e=>{let t=e.target.closest(`[${this.NAMESPACE}type]`);if(t){let e=this.getTrack(t),o=t.getAttribute(this.NAMESPACE+"type");o==Zo&&(t.getAttribute(this.NAMESPACE+"id")||this.createMutationObserver(t)),"syncClick"==o&&e.sa&&zo.click(this.getSaAttrs(t,["name","param","beacon"])),"addBag"==o&&(t.getAttribute(this.NAMESPACE+"id")||this.createMutationObserver(t))}})),window.addEventListener("scroll",this.debounce((()=>{this.readyScroll(),this.scrollFunc()}),200))}getTrack(e){let t={};return e.getAttribute(this.NAMESPACE+"action")&&window.GA_REMOVE_TIP&&window.GA_REMOVE_TIP("DA-[action|category|label|value]",e),e.getAttribute(this.NAMESPACE+"sa-name")&&(t.sa=!0),t}bindEvent(){document.querySelectorAll(`[${this.NAMESPACE}type="${Zo}"]`).forEach((e=>{this.createMutationObserver(e)}))}createMutationObserver(e){e.getAttribute();let t=new MutationObserver((t=>{for(let o of t){switch(o.type){case"childList":case"subtree":default:break;case"attributes":if(o.attributeName==this.NAMESPACE.toLowerCase()+"value"&&""!==e.getAttribute(this.NAMESPACE.toLowerCase()+"value")){if(this.getTrack(e).sa){let t=this.getSaAttrs(e,["name","param","beacon"]);zo.click(t)}}}}}));return e.setAttribute(this.NAMESPACE+"id",Xo++),t.observe(e,{attributes:!0}),t}getSaAttrs(e,t){return t.reduce(((t,o)=>{let n=this.NAMESPACE+"sa-"+o,i=e.getAttribute(n);return i&&(t[o]=i),t}),{})}debounce(e,t){var o;return function(){var n=this,i=arguments;o&&clearTimeout(o),o=setTimeout((function(){e.call(n,i)}),t||200)}}readyScroll(){let e=document.querySelectorAll(`[${this.NAMESPACE}view-type]`);this.filterElement(e).forEach((e=>{if(e){if("other"===e.getAttribute(`${this.NAMESPACE}view-type`))this.otherView(e)}}))}filterElement(e){let t=window.scrollY,o=window.scrollX,n=o+window.innerWidth,i=t+window.innerHeight,a=[];return e.forEach((e=>{const r=e.getBoundingClientRect();var s=r.top+window.scrollY,c=r.left+window.scrollX,l=c+r.width,d=s+r.height;!(c>n||l<o||s>i||d<t)&&a.push(e)})),a}otherView(e){e.getAttribute(this.NAMESPACE+"sa-name")&&zo.view(this.getSaAttrs(e,["name","param"])),e.removeAttribute(`${this.NAMESPACE}view-type`)}scrollFunc(){const e=document.body.offsetHeight;document.querySelectorAll(`[${this.NAMESPACE}view-type]`).forEach((t=>{"ordinary"==t.getAttribute(`${this.NAMESPACE}view-type`)&&t.getBoundingClientRect().top+15<=e&&this.ordinaryView(t)}))}ordinaryView(e){const t=[];let o=!1;e.getAttribute(this.NAMESPACE+"sa-name")&&(t.push("sa"),o=e.getAttribute(this.NAMESPACE+"view-no-param")),t.includes("sa")&&zo.view(this.getSaAttrs(e,o?["name"]:["name","param"])),e.removeAttribute(`${this.NAMESPACE}view-type`),e.setAttribute("el-viewed",!0)}}var tn;const{PUBLIC_CDN:on,TPM_BLACKLIST:nn,SiteUID:an,SA_SDK_CONFIG:rn={}}=gbCommonInfo;null!==(tn=nn.SheinAnalytics)&&void 0!==tn&&tn[an]||((!rn.loading||rn.loading&&rn.sampling)&&(0,k.tK)({type:"script",src:`${on}/she_dist/js/analysis/${Ao}`}),rn.loading&&(rn.sampling&&(window.web_sa_fix=function(){window.web_sa_fix.waitingCommands||(window.web_sa_fix.waitingCommands=[]),window.web_sa_fix.waitingCommands.push(arguments)}),(0,k.tK)({type:"script",src:"//cjs.ltwebstatic.com/unpkg/@shein-aidc/basis-sa@1.1.12/dist/web-sa.umd.js"}))),(0,k.GG)((function(){(new en).init()}));var sn,cn,ln=o(665640);!async function(){if(!navigator.cookieEnabled)return;if(window!==window.top)return;const e=(0,mt.getLocalStorage)("default_currency_expire"),{currency:t}=(0,Io.J)(location.search);if(!e){let e={code:0,info:{currency:gbCommonInfo.currencies}};const{code:o,info:n={}}=e;if(0!=o)return;const{currency:i={}}=n||{};try{const e=l.default.get({key:"currency"});if(localStorage.setItem("currencyData",JSON.stringify(i)),(0,mt.setLocalStorage)({key:"default_currency_expire",value:1,expire:36e5}),t&&i[t])return;if(gbCommonInfo.currency!=e)return await l.default.set({key:"currency",value:e,options:{isLog:1}}),void(0,k._O)()}catch(e){ln.log(e)}}}();const{SiteUID:dn="",PERSONALIZED_SWITCH:un={}}="undefined"!=typeof window?gbCommonInfo:{},pn=null!==(sn=null==un?void 0:un[dn])&&void 0!==sn?sn:1,_n="WEB_UGID_INIT",mn=localStorage.getItem(_n);let gn=!1;mn&&(gn=(new Date).getTime()-mn>864e5),!gn&&mn||(localStorage.removeItem(_n),(0,s.A)({method:"POST",url:"/api/common/ugidInit"}).then((e=>{0==e.code&&localStorage.setItem(_n,(new Date).getTime())}))),null===(cn=window.analysisBeforeInterceptor)||void 0===cn||cn.use((async function(e){try{if(e.data){const[t,o,n,i]=await Promise.all([l.default.get({key:"currency"}),l.default.get({key:"Country"}),l.default.get({key:"memberId"}),l.default.get({key:"ugid"})]);Object.assign(e.data,{member_id:n,login:Number(Boolean(n)),money_type:t||"",device_country:o&&o.countryAbbr||"",ugid:i}),e.data.showInfo=pn}return e}catch(t){return e}})),window.primeEventCenter=window.primeEventCenter||(0,Ut.A)(),(0,k.GG)((()=>{requestAnimationFrame((()=>{const e=document.querySelector(".j-member-sidebar");void 0!==window.GB_MEMBER_SIDEBAR&&e&&Promise.all([o.e(43212),o.e(7526),o.e(66948),o.e(18781),o.e(98150)]).then(o.bind(o,598088)).then((({default:e})=>{(new e).init()}))}))}));var hn=o(665640);const{SiteUID:fn}=gbCommonInfo,wn={have_show:"hideRegisterPop",hideCoupon:"couponPkgPopHide",hideCouponId_time:"couponPkgPopHide_id_time",hideCoupon_type:"couponPkgPopHide_type"};wn[`no_pop_up_${fn}`]=`ret_dir_cache_${fn}`;try{for(let e in wn){const t=localStorage.getItem(e);t&&((0,mt.removeLocalStorage)(e),localStorage.setItem(wn[e],t),hn.log("旧缓存已经删除, key:",e))}}catch(e){hn.log("error",e)}var vn=o(945286),yn=o(21302);co.J.addSubscriber({modulecode:"2-40"});const bn=gbCommonInfo&&gbCommonInfo.HOME_DIALOG_QUEUE_REPORT,Sn=(e=>{const t=window.sessionStorage.getItem("_HOME_DIALOG_QUEUE_REPORT");if("true"===t||"false"===t)return JSON.parse(t);const o=Math.floor(100*Math.random()),n=o>=0&&o<=Number(e);return window.sessionStorage.setItem("_HOME_DIALOG_QUEUE_REPORT",n),n})(!Number.isNaN(bn)&&Number(bn)||0),kn={normaMonitor(e={}){e.nonQueue?Pn(e):In(0,e)},errorMonitor(e={}){In(1,e)},operationMonitor(e={}){In(2,e)}},In=(e,t={})=>{if(!Sn)return;const{code:o,failure_reason:n,event_name:i="-",dialog_name:a,dialog_queue:r="-",remark:s="-",timeout_dialog:c=""}=t;delete t.code;let l={monitor_type:e,code_branch:o,failure_reason:("string"==typeof n?n:JSON.stringify(n))||"-",event_name:i,dialog_name:a,dialog_queue:r,remark:s};c&&(l.timeout_dialog=c),co.J.triggerNotice({daId:"2-40-2",extraData:l})},Pn=(e={})=>{co.J.triggerNotice({daId:"2-40-1",extraData:e})},En="dialog:registered",Cn="dialog:skipped",An="queue:updated",Tn="queue:started",Ln="queue:empty",Nn="bff:filterApplied",Dn="dialog:shown",On="dialog:hidden",Rn="dialog:error";var Mn=o(884880),xn=o(743240);const Bn=class{constructor(e={}){this.maxStorageLength=e.maxStorageLength||5}read(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):{}}catch(t){return(0,yn.yJ)(`[StorageSerializer] 读取失败: ${e}`,t),{}}}write(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){(0,yn.yJ)(`[StorageSerializer] 写入失败: ${e}`,t)}}updateRecord(e,t,o){try{const n=this.read(e);return n[t]?(n[t].recentPopInfoList.push({recentPopTime:o.recentPopTime,recentPopScene:o.recentPopScene}),n[t].recentPopInfoList.length>this.maxStorageLength&&(n[t].recentPopInfoList=n[t].recentPopInfoList.slice(-this.maxStorageLength))):n[t]={recentPopInfoList:[{recentPopTime:o.recentPopTime,recentPopScene:o.recentPopScene}]},this.write(e,n),n}catch(t){return(0,yn.yJ)(`[StorageSerializer] 更新记录失败: ${e}`,t),{}}}},qn=l.default.get({key:"memberId"}),Fn="参数错误",Un="开关关闭",Gn="没有弹窗",$n="弹窗标识符没有在允许列表中",jn="弹窗场景不在允许列表中",Hn="可以展示",Kn="过滤错误",Wn={timeout:3e3,storageKey:`PC_POPUP_SDK_FREQUENCY_MANAGER_${qn}_${gbCommonInfo.SiteUID}`,maxStorageLength:10,progressStartTime:Math.floor(Date.now()/1e3)};const Yn=new class{constructor(e={}){(0,T.A)(this,"callBFFInterface",(async(e=[])=>{try{const t=this._buildBFFRequestParams(e);return await(async(e,t=3e3)=>{try{const o=new Promise(((e,o)=>{setTimeout((()=>o(new Error("timeout"))),t)})),n=(0,s.A)({method:"POST",url:"/navigation-api/pop_refactor/decision",data:e,useBffApi:!0});return await Promise.race([n,o])}catch(e){if("timeout"===e.message)return{code:-1};throw e}})(t,this.config.timeout)}catch(e){return(0,yn.yJ)("[FrequencyManager] 调用BFF接口失败:",e),{}}})),(0,T.A)(this,"_buildBFFRequestParams",(e=>{if(!Array.isArray(e))return{progressStartTime:this.config.progressStartTime,currentSecond:Math.floor(Date.now()/1e3),currentIdentifierList:[],historyPopInfoMap:{}};const t=this._getHistoryPopInfoMap(),o=e.filter((e=>e&&e.name)).map((e=>({identifier:e.name,scene:e.region})));return{progressStartTime:this.config.progressStartTime,currentSecond:Math.floor(Date.now()/1e3),currentIdentifierList:o,historyPopInfoMap:t}})),(0,T.A)(this,"_getHistoryPopInfoMap",(()=>{const e=this.config.storageKey,t=this._memoryCache.get(e);if(t&&Date.now()-t.timestamp<this._cacheTimeout)return(0,yn.Ct)("[FrequencyManager] 使用内存缓存数据"),{...t.data};(0,yn.Ct)("[FrequencyManager] 缓存未命中，从localStorage读取数据");const o=this.storageSerializer.read(e);return this._memoryCache.set(e,{data:{...o},timestamp:Date.now()}),o})),(0,T.A)(this,"_createFilterResult",((e,t,o={})=>({shouldShow:e,reason:t,details:o}))),(0,T.A)(this,"_canShowOnCurrentPage",(e=>{const t=e.scene||"global",o=window.location.pathname.indexOf("/user/index")>-1,n={global:()=>!0,me:()=>o}[t],i=!!n&&n();return{canShow:i,isUserCenterPage:o,allowedScene:t,matchedScene:i?t:null}})),(0,T.A)(this,"_updateMemoryCache",((e,t)=>{t&&"object"==typeof t&&(this._memoryCache.set(e,{data:{...t},timestamp:Date.now()}),(0,yn.Ct)("[FrequencyManager] 内存缓存已更新"))})),(0,T.A)(this,"recordPopupShown",(e=>{try{if(!e||!e.name||!e.region)return;if(e.region===Mn.aX.LOCAL_WAREHOUSE)return;const t={recentPopTime:Math.floor(Date.now()/1e3),recentPopScene:e.region},o=this.storageSerializer.updateRecord(this.config.storageKey,e.name,t);this._updateMemoryCache(this.config.storageKey,o),(0,yn.Ct)(`[FrequencyManager] 记录弹窗展示: ${e.name} in ${e.region}`)}catch(e){(0,yn.yJ)("[FrequencyManager] 记录弹窗展示失败:",e)}})),(0,T.A)(this,"beforeShowFilter",(async(e={})=>{try{const{allDialogs:t=[],currentDialog:o={}}=e;if(!Array.isArray(t))return this._createFilterResult(!0,Fn);if(this._bffDisabled)return this._createFilterResult(!0,Un);(0,yn.Ct)("[FrequencyManager] 调用BFF接口进行跨场景互斥检查");const n=await this.callBFFInterface(t);if("0"!==(null==n?void 0:n.code))return(0,yn.yJ)("[FrequencyManager] BFF接口返回异常:",n),this._createFilterResult(!0,Kn,{error:null==n?void 0:n.message});const{enabledPopQueueService:i="false",allowPopInfoList:a=[]}=(null==n?void 0:n.info)||{};if("false"===i)return this._bffDisabled=!0,(0,yn.Ct)("[FrequencyManager] BFF返回没有命中abt，后续将跳过过滤"),this._createFilterResult(!0,Un);if(!o)return this._createFilterResult(!1,Gn);const r=a.find((e=>e.identifier===o.name));if(!r)return this._createFilterResult(!1,$n,{dialogName:o.name});const s=this._canShowOnCurrentPage(r);return s.canShow?this._createFilterResult(!0,Hn,{dialogName:o.name,...s}):this._createFilterResult(!1,jn,{dialogName:o.name,...s})}catch(e){return(0,yn.yJ)("[FrequencyManager] beforeShowFilter 执行失败:",e),this._createFilterResult(!0,Kn,{error:e.message})}})),this.config={...Wn,...e},this.storageSerializer=new Bn({maxStorageLength:this.config.maxStorageLength}),this._bffDisabled=!1,this._memoryCache=new Map,this._cacheTimeout=3e4}};Yn.dispose=()=>{var e,t;null===(e=Yn.storageSerializer)||void 0===e||e.dispose(),null===(t=Yn._memoryCache)||void 0===t||t.clear(),(0,yn.Ct)("[FrequencyManager] 资源清理完成（包括内存缓存）")};const Jn=Yn;var Vn=o(665640);const Qn=({PopupSDK:e,startQueneTime:t,endQueneTime:o,isTimeout:n,everyPopupTime:i,gbCommonInfo:a,popupTotal:r})=>{e.onEvent(En,(()=>{const t=e.getDialogsStatus();r===t.length&&c.A.metricGlobPopup({tags:{track_type:"1",alert_type:"all",is_new:"1"},message:"dq_dialog_register_new"})})),e.onEvent(An,(e=>{(({name:e,queue:t})=>{kn.operationMonitor({event_name:"expose_dq_dialog_add",dialog_name:e,dialog_queue:t,remark:`${e} 添加到队列中`}),"coupon"==e&&(0,xn.ar)((0,k.isLogin)())})({name:e.added,quene:e.quene}),i[e.added]=Date.now()-t,c.A.metricGlobPopup({tags:{track_type:"2",alert_type:e.added,is_new:"1"},message:`${e.added} dq_dialog_add_new`})})),e.onEvent(Tn,(()=>{var r,s,c;const l=null===(r=e.getDialogsStatus())||void 0===r||null===(s=r.filter((e=>null==e?void 0:e._status.WAITING)))||void 0===s?void 0:s.map((e=>e.name));if(o=Date.now()-t,n=o>((null===(c=a.globalPopupABT)||void 0===c?void 0:c.timeOut)||2e3)){(({quene:e=[]})=>{kn.normaMonitor({nonQueue:!0,timeout_dialog:e,remark:"弹窗队列超时启动",event_name:"expose_dq_timeout"})})({queue:e.getDialogsStatus().filter((e=>!e._status.WAITING&&!e._status.HIDDEN&&!e._status.SKIPPED))||[]})}(({name:e,queue:t})=>{kn.operationMonitor({event_name:"expose_dq_start",dialog_name:e,dialog_queue:t,is_timeout:!1,timeout_dialog:[],remark:"弹窗队列开始弹窗"})})({name:l[0],quene:l}),(({load_time:e,is_timeout:t,every_popup_time:o})=>{kn.normaMonitor({nonQueue:!0,load_time:e,every_popup_time:o,is_timeout:t,remark:"弹窗队列启动所需时间（初始化完成）",event_name:"expose_dq_loadtime"})})({load_time:o,is_timeout:n,every_popup_time:i})})),e.onEvent(Dn,(t=>{var o,n;c.A.metricGlobPopup({tags:{track_type:"3",alert_type:t.name,is_new:"1"},message:`${t.name} dq_dialog_real_show_new`});const i=null===(o=e.getDialogsStatus())||void 0===o||null===(n=o.filter((e=>null==e?void 0:e._status.WAITING)))||void 0===n?void 0:n.map((e=>e.name));if(e.getDialog(t.name).type===Mn.WZ.MARKETING){const o=i.filter((o=>{const n=e.getDialog(o),i=n.region===Mn.aX.GLOBAL&&n.type===Mn.WZ.MARKETING&&n.name!==t.name,a=n.region===Mn.aX.USER_CENTER;return i||a}));o.length>0&&(null==e||e.removeFromQueue(o));const n=e.getDialog(Mn.R2.QUICK_REGISTER);var r;if(n)n.props={...n.props,isCouponGlobalShown:(null===(r=a.globalPopupABT)||void 0===r?void 0:r.quickRegisterShowCoupon)||!1}}(({name:e,queue:t})=>{kn.operationMonitor({event_name:"expose_dq_dialog_real_show",dialog_name:e,dialog_queue:t,remark:`${e} 弹窗弹出`})})({name:t.name,queue:i})})),e.onEvent(On,(t=>{var o,n;try{const o=e.getDialog(t.name);Jn.recordPopupShown(o)}catch(e){Vn.error("[Analysis] 记录弹窗展示失败:",e)}c.A.metricGlobPopup({tags:{track_type:"4",alert_type:t.name,is_new:"1"},message:`${t.name} dq_dialog_close_new`});const i=null===(o=e.getDialogsStatus())||void 0===o||null===(n=o.filter((e=>null==e?void 0:e._status.WAITING)))||void 0===n?void 0:n.map((e=>e.name));(({name:e})=>{kn.operationMonitor({event_name:"expose_dq_dialog_close",dialog_name:e,remark:`${e} 弹窗关闭`})})({name:t.name,queue:i})})),e.onEvent(Rn,(e=>{c.A.metricGlobPopup({tags:{track_type:"5",alert_type:e.name,is_new:"1"},message:`${e.name} dq_dialog_error_new`})})),e.onEvent(Cn,(e=>{c.A.metricGlobPopup({tags:{track_type:"6",alert_type:e.name,reason:e.reason,is_new:"1"},message:`${e.name} dq_dialog_skipped_new`}),"coupon"==e.name&&"removed"==e.reason&&(0,xn.ur)({isLogin:(0,k.isLogin)(),type:5})})),e.onEvent(Ln,(()=>{var t,o;(({queue:e})=>{kn.operationMonitor({event_name:"expose_dq_all_dialog_finish",dialog_queue:e})})({queue:null===(t=e.getDialogsStatus())||void 0===t||null===(o=t.filter((e=>null==e?void 0:e._status.WAITING)))||void 0===o?void 0:o.map((e=>e.name))})})),e.onEvent(Nn,(e=>{c.A.metricGlobPopup({tags:{track_type:"8",alert_type:e.name,reason:e.reason,details:JSON.stringify(e.details)},message:`${e.name} dq_dialog_pre_filtered_new`})}))},zn=[{name:"unpaidOrder",loader:()=>o.e(59924).then(o.bind(o,59924))},{name:"primeRenew",loader:()=>o.e(15457).then(o.bind(o,315457))},{name:"freeGift",loader:()=>o.e(57265).then(o.bind(o,157265))},{name:"payBack",loader:()=>o.e(84838).then(o.bind(o,784838))},{name:"stopSupportIEPop",loader:()=>o.e(81206).then(o.bind(o,681206))},{name:"sheinPush",loader:()=>Promise.all([o.e(20297),o.e(53475)]).then(o.bind(o,753475))},{name:"couponPackage",loader:()=>Promise.all([o.e(52074),o.e(28930),o.e(48643)]).then(o.bind(o,148643))},{name:"couponRemind",loader:()=>Promise.all([o.e(52074),o.e(28930),o.e(72474)]).then(o.bind(o,972474))},{name:"mutiplePartPrivacyBff",loader:()=>o.e(29305).then(o.bind(o,729305))},{name:"quickRegisterBff",loader:()=>o.e(54546).then(o.bind(o,954546))},{name:"switchLanguage",loader:()=>o.e(86093).then(o.bind(o,686093))},{name:"switchLanguageGuide",loader:()=>o.e(70775).then(o.bind(o,370775))},{name:"ipPopUpBff",loader:()=>o.e(6914).then(o.bind(o,606914))},{name:"forceUpdatePwd",loader:()=>o.e(99242).then(o.bind(o,999242))}];let Xn=Date.now(),Zn={};const ei=async()=>{try{var e,t;await((e=3e3)=>new Promise(((t,o)=>{const n=Date.now(),i=()=>{const a=Date.now()-n;if(vn.A.isReady())(0,yn.Ct)(`SDK初始化完成，耗时: ${a}ms`),t();else if(a>=e){var r,s;const e=new Error(`SDK初始化超时，等待了${a}ms`);(0,yn.yJ)(e.message),c.A.metricGlobalPopupIsNew({page:(null===(r=window)||void 0===r||null===(s=r.SaPageInfo)||void 0===s?void 0:s.page_name)||"others",is_new:"0",has_error:"1",error:e.message,timeout:a}),o(e)}else setTimeout(i,10)};i()})))(),(0,yn.Ct)("SDK初始化完成，开始加载注册文件"),Qn({PopupSDK:vn.A,startQueneTime:Xn,endQueneTime:0,isTimeout:false,everyPopupTime:Zn,gbCommonInfo,popupTotal:zn.length});const o=zn.map((e=>{const t=Date.now();return e.loader().then((o=>(Zn[e.name]=Date.now()-t,o))).catch((t=>{var o,n;throw(0,yn.yJ)(`注册文件 ${e.name} 加载失败:`,t),Zn[e.name]=-1,c.A.metricGlobalPopupIsNew({page:(null===(o=window)||void 0===o||null===(n=o.SaPageInfo)||void 0===n?void 0:n.page_name)||"others",is_new:"1",has_error:"1",error:t.message,popup_name:e.name}),t}))}));return await Promise.allSettled(o),(0,yn.Ct)("所有注册文件加载完成"),c.A.metricGlobalPopupIsNew({page:(null===(e=window)||void 0===e||null===(t=e.SaPageInfo)||void 0===t?void 0:t.page_name)||"others",is_new:"1"}),!0}catch(e){var o,n;(0,yn.yJ)("弹窗系统初始化失败:",e);const t=e.message.includes("超时"),i=(null===(o=window)||void 0===o||null===(n=o.SaPageInfo)||void 0===n?void 0:n.page_name)||"others";return c.A.metricGlobalPopupIsNew({page:i,is_new:"1",has_error:"1",error:e.message,error_type:t?"timeout":"other"}),!1}};"undefined"!=typeof window&&(0,yn.xo)()&&ei().then((e=>{var t;e&&(vn.A.completeRegistration(!0,{waitForQuene:!0,quenelWaitTime:(null===(t=gbCommonInfo.globalPopupABT)||void 0===t?void 0:t.timeOut)||2e3,beforeShowFilter:Jn.beforeShowFilter}),kn.operationMonitor({remark:"弹窗队列初始化完成，准备启动",event_name:"expose_dq_launch"}))})),document.addEventListener("DOMContentLoaded",(function(){!async function(){var e;let t=l.default.getSync({key:"Country",actionType:"getCountryCodeGetSync"});if(null===(e=t)||void 0===e||!e.country){var o,n,i;t=await l.default.get({key:"Country",actionType:"getCountryCodeGet"});const e=(null===(o=t)||void 0===o?void 0:o.countryAbbr)||"";null===(n=SHEIN_LOGIN)||void 0===n||null===(i=n.eventBus)||void 0===i||i.emit("default-country-change",e)}}()}),!1);var ti=o(901404),oi=o(999421);o(440961);const{SiteUID:ni,lang:ii,IS_RW:ai}=gbCommonInfo,ri=(0,k.isLogin)();window._GB_PopUpModalEventCenter_=(0,Ut.A)();let si="";const ci="sheinPush",li="KFTCannouncement";let di=!1;const ui=["forceUpdatePwd","ip","mutiplePartPrivacy","mutipleLang","coupon","couponRevisit",li,"quickRegister","switchLanguageGuide","stopSupportIE"];let pi=[],_i=0,mi=0,gi="",hi={};const fi=ui.reduce(((e,t)=>(e[t]={loading:!0,isWait:!1},e)),{});window._GB_PopUpModalEventCenter_.globPopupModalInfo=fi;let wi=!0,vi=!0;window._GB_PopUpModalEventCenter_.on("global-pop-modal-queue",(e=>{const{name:t,isWait:o=!1}=e;if("coupon"===t&&oi.u7.normaMonitor({code:"703",show_judge:1,remark:"首页队列接收成功"}),fi[t]={loading:!1,isWait:o},hi[t]=(new Date).getTime()-_i,ui.every((e=>!fi[e].loading))){if(function(){const e=fi;e.ip&&e.ip.isWait&&e.privacy&&e.privacy.isWait&&(e.privacy.isWait=!1)}(),vi){vi=!1;const e=(new Date).getTime(),t=Object.entries(hi||{}).map((([e,t])=>`${e||""}=${t||""}`)).join("|");kn.normaMonitor({nonQueue:!0,load_time:e-_i,every_popup_time:t,is_timeout:mi,remark:"弹窗队列启动所需时间（初始化完成）",event_name:"expose_dq_loadtime"})}window._GB_PopUpModalEventCenter_.next(""),ui.includes("coupon")&&wi&&(wi=!1,oi.u7.normaMonitor({code:"704",show_judge:1,remark:"首页队列初始化完成后是否存在券包"}))}})),window._GB_PopUpModalEventCenter_.pushQueue=(e,t)=>{if(e===ci){if(di)return;null===si&&(si="")}c.A.metricGlobPopup({tags:{track_type:"2",alert_type:e},message:`${e} dq_dialog_add`}),null!=pi&&pi.includes(e)||pi.push(e),kn.operationMonitor({event_name:"expose_dq_dialog_add",dialog_name:e,dialog_queue:pi.join(","),remark:`${e} 添加到队列中`}),window._GB_PopUpModalEventCenter_.on("global-pop-modal-show",(o=>{e===o&&"function"==typeof t?t():e===o&&"coupon"===e&&oi.u7.errorMonitor({code:"736",show_judge:1,remark:"全局队列劵包弹出回调类型错误"})})),window._GB_PopUpModalEventCenter_.emit("global-pop-modal-queue",{isWait:!0,name:e,from:"pushQueue"})};let yi=!1;window._GB_PopUpModalEventCenter_.next=e=>{if(e!==si)return void("coupon"===e&&oi.u7.errorMonitor({code:"740",show_judge:1,remark:"上一个弹窗调用的next方法名与券包名不一致, 弹窗被拦截"}));si&&(fi[si].isWait=!1),si&&kn.operationMonitor({event_name:"expose_dq_dialog_close",dialog_name:si,remark:`${si} 弹窗关闭`});const t=function(){for(let e=0;e<ui.length;e++){const t=ui[e];if(fi[t].isWait)return t}return null}();yi||(kn.operationMonitor({event_name:"expose_dq_all_dialog_finish",dialog_queue:pi.join(","),remark:"弹窗完成所有请求数据"}),yi=!0),si=t,si&&c.A.metricGlobPopup({tags:{track_type:"4",alert_type:si},message:`${si} dq_dialog_close`}),t&&""===e&&kn.operationMonitor({event_name:"expose_dq_start",dialog_name:t,dialog_queue:pi.join(","),is_timeout:mi,timeout_dialog:gi,remark:"弹窗队列开始弹窗"}),setTimeout((()=>{t&&window._GB_PopUpModalEventCenter_.emit("global-pop-modal-show",t),t&&(kn.operationMonitor({event_name:"expose_dq_dialog_real_show",dialog_name:t,dialog_queue:pi.join(","),remark:`${t} 弹窗弹出`}),c.A.metricGlobPopup({tags:{track_type:"3",alert_type:t},message:`${t} dq_dialog_real_show`}))}),0);const o=[];for(let e=0;e<ui.length;e++){const t=ui[e];if(fi[t].isWait&&o.push(t),"coupon"===t)break}var n;o.length>1&&o.includes("coupon")&&(oi.u7.operationMonitor({code:"764",show_judge:1,remark:`存在优先级更高的营销活动 - ${null==o||null===(n=o.toString())||void 0===n?void 0:n.split(".")}`}),(0,xn.ez)((0,k.isLogin)()),(0,xn.ur)({isLogin:ri(),type:5}))},window._GB_PopUpModalEventCenter_.done=e=>{ui.includes(e)&&window._GB_PopUpModalEventCenter_.emit("global-pop-modal-queue",{isWait:!1,name:e,from:"done"})};const bi=(e,t)=>(0,Io.J)(location.search)[e]===t,Si=e=>location.pathname.includes(e);async function ki(){var e;if(_i=(new Date).getTime(),kn.operationMonitor({remark:"弹窗队列初始化完成，准备启动",event_name:"expose_dq_launch"}),oi.u7.normaMonitor({code:"708",remark:"弹窗队列开始初始化"}),Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(44981)]).then(o.bind(o,213573)).then((()=>{})),Promise.all([o.e(7526),o.e(20297),o.e(21295)]).then(o.bind(o,709031)).then((()=>{})),function(){let e=!1;["transit","email_unbind","credentials","/risk/challenge","/iframe_login","/user/privacy_request_survey","/user/privacy_request_verify","/user/privacy_request_apply"].forEach((t=>{location.pathname.indexOf(t)>-1&&(e=!0)}));let t="";if(parent!==window)try{t=parent.location.href}catch(e){t=document.referrer}return["https://ccc-test01.biz.sheincorp.cn","https://ccc-test02.biz.sheincorp.cn","https://ccc-store-test01.biz.sheincorp.cn","https://ccc-store-test02.biz.sheincorp.cn","https://ccc-gray01.biz.sheincorp.cn","https://ccc-gray02.biz.sheincorp.cn","https://ccc-store-gray01.shein.com","https://ccc-store-gray02.shein.com","https://ccc.biz.sheincorp.cn","https://ccc-store.shein.com"].some((e=>-1!=t.indexOf(e)))&&(e=!0),e}())return oi.u7.operationMonitor({code:"765",show_judge:0,remark:"命中isCloseAllPop为true"}),(0,xn.Cm)({isLogin:ri(),remark:"命中isCloseAllPop为true"}),void(0,xn.ur)({isLogin:ri(),type:6});const{HomePopup:t}=await(0,To.r3)();!function({abt:e={}}){var t,o;const{HomePopup:n}=e,i=Number(null==n||null===(t=n.p)||void 0===t?void 0:t.queue_timeout);if(null==n||null===(o=n.p)||void 0===o||!o.queue_timeout||isNaN(i)||i<=0)return;setTimeout((()=>{var e;mi=1;const t=Object.keys((null===(e=window._GB_PopUpModalEventCenter_)||void 0===e?void 0:e.globPopupModalInfo)||{}).filter((e=>!0===window._GB_PopUpModalEventCenter_.globPopupModalInfo[e].loading));gi=t.join(","),kn.normaMonitor({nonQueue:!0,timeout_dialog:gi,remark:"弹窗队列超时启动",event_name:"expose_dq_timeout"}),(null==t?void 0:t.length)>0&&t.forEach((e=>{window._GB_PopUpModalEventCenter_.done(e)}))}),1e3*i)}({abt:{HomePopup:t}}),["hk"].includes(ni)?(kn.operationMonitor({dialog_name:"ip",remark:"IP跳转弹窗未启动",event_name:"expose_dq_ip_end"}),window._GB_PopUpModalEventCenter_.done("ip")):(kn.operationMonitor({dialog_name:"ip",remark:"IP跳转弹窗启动",event_name:"expose_dq_ip_start"}),Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(24353)]).then(o.bind(o,849523))),["ma"].includes(ni)&&!(0,mt.getLocalStorage)(`no_mutiple_lang_${ni}_pop`)?(kn.operationMonitor({dialog_name:"mutipleLang",remark:"语言选择弹窗启动",event_name:"expose_dq_mutipleLang_start"}),Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(57623)]).then(o.bind(o,208372)).then((()=>{}))):(kn.operationMonitor({dialog_name:"mutipleLang",remark:"语言选择弹窗未启动",event_name:"expose_dq_mutipleLang_end"}),fi.mutipleLang&&(fi.mutipleLang.loading=!1)),!function(){var e,t;if(!(0,ti.X)())return!1;if(sessionStorage.getItem("closeStopSupportIEPop"))return!1;const o=(null===(e=window.getSaPageInfo)||void 0===e?void 0:e.page_name)||(null===(t=window.SaPageInfo)||void 0===t?void 0:t.page_name)||"",n=["page_home","page_goods_detail","page_category","page_daily_new","page_real_class","page_select_class","page_search","page_goods_group"];let i=!1;for(let e=0;e<n.length;e++)n[e]==o&&(i=!0);return i}()?(kn.operationMonitor({dialog_name:"stopSupportIE",remark:"停止支持IE弹窗启动",event_name:"expose_dq_stopSupportIE_end"}),fi.stopSupportIE&&(fi.stopSupportIE.loading=!1)):(kn.operationMonitor({dialog_name:"stopSupportIE",remark:"停止支持IE弹窗启动",event_name:"expose_dq_stopSupportIE_start"}),Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(16804)]).then(o.bind(o,933012)).then((()=>{}))),async function(){var e;const t=bi("from","creatorcenter"),o=Si("help-center");if(t||o){const e=[{condition:t,remark:"有登录弹窗/主动屏蔽的页面:红人页from=creatorcenter"},{condition:o,remark:"有登录弹窗/主动屏蔽的页面:help-center"}].find((e=>e.condition));return oi.u7.operationMonitor({code:"765",show_judge:0,remark:e.remark}),(0,xn.Cm)({isLogin:ri(),remark:e.remark}),(0,xn.ur)({isLogin:ri(),type:6}),!1}if(["/creatorcenter","/affiliate","/affiliateprogram","/sns-giftcard","/sns-wallet"].some((e=>location.href.indexOf(e)>-1)))return oi.u7.operationMonitor({code:"765",show_judge:0,remark:`屏蔽推客页:${location.pathname}`}),(0,xn.Cm)({isLogin:ri(),remark:`屏蔽推客页:${location.pathname}`}),(0,xn.ur)({isLogin:ri(),type:6}),!1;const n=location.pathname,{CouponbagUpdate:i}=await(0,To.r3)();return"A"===(null==i||null===(e=i.param)||void 0===e?void 0:e.CouponbagUpdate)||!/store\/home$/.test(n)||(oi.u7.operationMonitor({code:"765",show_judge:0,remark:"店铺页不展示券包"}),(0,xn.Cm)({isLogin:ri(),remark:"店铺页不展示全局券包弹窗"}),(0,xn.ur)({isLogin:ri(),type:6}),!1)}().then((e=>{e?(kn.operationMonitor({dialog_name:"isShould",remark:"isShould弹窗启动",event_name:"expose_dq_isShould_start"}),oi.u7.normaMonitor({code:"709",show_judge:1,remark:"开始加载券包弹窗资源"}),Promise.all([o.e(52074),o.e(7526),o.e(66948),o.e(18781),o.e(28930),o.e(24026)]).then(o.bind(o,313498)).then((()=>{oi.u7.normaMonitor({code:"710",show_judge:1,remark:"券包弹窗资源加载成功"})})).catch((()=>{window._GB_PopUpModalEventCenter_.done("coupon"),oi.u7.errorMonitor({code:"741",show_judge:1,remark:"券包弹窗资源加载失败"})}))):((0,oi.by)(),kn.operationMonitor({dialog_name:"isShould",remark:"isShould弹窗未启动",event_name:"expose_dq_isShould_end"}),fi.coupon&&(fi.coupon.loading=!1))})),!function(){const e=bi("from","creatorcenter"),t=Si("help-center");return!e&&!t&&(ri&&!ai)}()?(kn.operationMonitor({dialog_name:"couponRevisit",remark:"用劵提醒弹窗未启动",event_name:"expose_dq_couponRevisit_end"}),fi.couponRevisit&&(fi.couponRevisit.loading=!1)):(kn.operationMonitor({dialog_name:"couponRevisit",remark:"用劵提醒弹窗启动",event_name:"expose_dq_couponRevisit_start"}),Promise.all([o.e(52074),o.e(7526),o.e(66948),o.e(18781),o.e(42399)]).then(o.bind(o,177237)).then((()=>{}))),"kr"===ni&&"show"===(null==t||null===(e=t.param)||void 0===e?void 0:e.KFTC_popup)?(kn.operationMonitor({dialog_name:li,remark:"韩国弹窗启动",event_name:"expose_dq_korean_notice_start"}),o.e(89554).then(o.bind(o,383242))):(kn.operationMonitor({dialog_name:li,remark:"韩国弹窗未启动",event_name:"expose_dq_korean_notice_end"}),window._GB_PopUpModalEventCenter_.done(li,!0)),ri||/\/user\/.+$|\/cart$/.test(location.pathname)||/\/auth\/login$/.test(location.pathname)||window.noNeedQuickRegister?(kn.operationMonitor({dialog_name:"quickRegister",remark:"快速注册弹窗未启动",event_name:"expose_dq_quick_register_end"}),fi.quickRegister&&(fi.quickRegister.loading=!1)):(kn.operationMonitor({dialog_name:"quickRegister",remark:"快速注册弹窗启动",event_name:"expose_dq_quick_register_start"}),Promise.all([o.e(43212),o.e(7526),o.e(66948),o.e(18781),o.e(51643),o.e(41739),o.e(38619),o.e(89892)]).then(o.bind(o,830281)).then((()=>{}))),!function(){const e=(0,mt.getLocalStorage)("SWITCH_LANGUAGE_GUIDE_ID")===l.default.get({key:"oest"});return!ai&&["il","ilen","ca","cafr","se","sesv","th","then","eur","eurfr","eurde","eurnl","eurpt-pt","ma","maar","us","uses","euqs","euqscs-cz","euqsel-gr","euqsfr","euqsnl"].includes(ii)&&!e}()?(kn.operationMonitor({dialog_name:"languageGuide",remark:"切换多语言引导未启动",event_name:"expose_dq_language_guide_end"}),fi.switchLanguageGuide&&(fi.switchLanguageGuide.loading=!1)):(kn.operationMonitor({dialog_name:"languageGuide",remark:"切换多语言引导启动",event_name:"expose_dq_language_guide_start"}),window.requestIdleCallback?window.requestIdleCallback((()=>{Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(80542)]).then(o.bind(o,8679))})):Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(80542)]).then(o.bind(o,8679))),!function(){var e,t;const o=location.pathname;return![282,488,399].some((e=>o.indexOf(`-a-${e}.html`)>-1))&&((0,k.isLogin)()&&1!=(null===(e=window)||void 0===e||null===(t=e.sessionStorage)||void 0===t?void 0:t.getItem("mutiplePartPrivacy")))}()?(kn.operationMonitor({dialog_name:"mutiplePartPrivacy",remark:"多主体隐私政策弹窗未启动",event_name:"expose_dq_mutiplePart_end"}),window._GB_PopUpModalEventCenter_.done("mutiplePartPrivacy")):(kn.operationMonitor({dialog_name:"mutiplePartPrivacy",remark:"多主体隐私政策弹窗启动",event_name:"expose_dq_mutiplePart_start"}),Promise.all([o.e(43212),o.e(7526),o.e(66948),o.e(18781),o.e(34161)]).then(o.bind(o,569685)));const n=(0,mt.getLocalStorage)("webpushShowLastTime")||null;var i;!function(){var e,t;ui.push(ci),fi[ci]={loading:!1,isWait:!1};let o=!0;const n=(null===(e=window.getSaPageInfo)||void 0===e?void 0:e.page_name)||(null===(t=window.SaPageInfo)||void 0===t?void 0:t.page_name)||"";return["page_home","page_goods_detail","page_category","page_daily_new","page_real_class","page_select_class","page_search","page_goods_group"].includes(n)||(o=!1),o}()||(i=n)&&Date.now()-i<864e5?(kn.operationMonitor({dialog_name:ci,remark:"sheinPush弹窗未启动",event_name:"expose_dq_web_push_end"}),di=!0,fi[ci]&&(fi[ci].loading=!1),window._GB_PopUpModalEventCenter_.done(ci)):kn.operationMonitor({dialog_name:ci,remark:"sheinPush弹窗启动",event_name:"expose_dq_web_push_start"})}class Ii{constructor(e={}){this.heartbeatInterval=e.heartbeatInterval||9e5,this.heartbeatTimer=null,this.enableHeartbeat=e.enableHeartbeat,this.enableVisibility=e.enableVisibility,this.init()}init(){this._request(),this._setupEventListeners(),this._startHeartbeat()}_setupEventListeners(){this.enableVisibility&&document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&this._request()}))}_startHeartbeat(){this.enableHeartbeat&&(this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>{this._request()}),this.heartbeatInterval))}async _request(){try{var e;if(null===(e=(0,lo.TZ)(["abt_report_close_bff"]))||void 0===e?void 0:e.abt_report_close_bff)return void await(0,s.A)({url:"/api/abt/report",method:"post",params:{}});await(0,s.A)({url:"/abt/merge/abt_async",method:"post",useBffApi:!0})}catch(e){}}}requestIdleCallback((()=>{if("undefined"!=typeof window)try{var e;const t=(null===(e=window.gbCommonInfo)||void 0===e?void 0:e.ABT_REPORT_CONFIG)||{};new Ii({heartbeatInterval:t.heartbeatInterval?1e3*t.heartbeatInterval:9e5,enableHeartbeat:"0"!==t.enableHeartbeat,enableVisibility:"0"!==t.enableVisibility})}catch(e){}}));var Pi,Ei,Ci=o(197658),Ai=o(88685),Ti=o(665640);const{PUBLIC_CDN:Li,LAYOUT:Ni}=gbCommonInfo;o.p=`${Li}/she_dist/assets/`,r.w.registLocals(gbCommonInfo),(0,pt.C)(),"undefined"!=typeof window&&new _t.A,!0===gbCommonInfo.headerVueSsr||gbCommonInfo.noHeader||o.e(60659).then(o.bind(o,415379)).then((({default:e})=>{e()})),o.e(81389).then(o.bind(o,183841)).then((({default:e})=>{e()})),(0,Ai.rC)(),(0,k.GG)((()=>{requestAnimationFrame((function(){if("layout"===Ni)if(Promise.all([o.e(52074),o.e(7526),o.e(66948),o.e(18781),o.e(25123)]).then(o.bind(o,219276)),(0,i.e)({key:"actTaskType"})){const e=(0,i.e)({key:"actTaskType"});"browse"==e?void 0!==window.gbTaskCenterBrowseTips?window.gbTaskCenterBrowseTips.init():Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(20565)]).then(o.bind(o,639999)):"addCart"==e&&(void 0!==window.gbTaskCenterAddCartTips?window.gbTaskCenterAddCartTips.init():Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(12254)]).then(o.bind(o,679719)))}else void 0!==window.gbTaskCenterBrowseTips&&(window.gbTaskCenterBrowseTips.show=!1,window.gbTaskCenterBrowseTips.timer&&clearInterval(window.gbTaskCenterBrowseTips.timer)),void 0!==window.gbTaskCenterAddCartTips&&(window.gbTaskCenterAddCartTips.show=!1);if(!(0,yn.xo)()){var e,t;const o=(null===(e=window)||void 0===e||null===(t=e.SaPageInfo)||void 0===t?void 0:t.page_name)||"others";c.A.metricGlobalPopupIsNew({page:o,is_new:"0"}),ki()}!function(){if(window.sessionStorage){var e;const t=window.sessionStorage.getItem("visit_trajectory"),o=5;let n=t?JSON.parse(t):[];n.push((null===(e=window.SaPageInfo)||void 0===e?void 0:e.page_name)||""),n.length>o&&(n=n.slice(-o,n.length)),window.sessionStorage.setItem("visit_trajectory",JSON.stringify(n))}}()})),window.dispatchEvent(new Event("scroll")),bo(),!(0,k.isLogin)()&&o.e(69944).then(o.bind(o,769944))})),(0,a.x)({keys:["cartDynamicData","campaignsDynamicData","pcCheckoutHtml"]}),(0,k.GG)((()=>{var e;if(["gray","debug"].includes(gbCommonInfo.NODE_SERVER_ENV)){function t(e,t){let o=0;return function(){const n=Date.now();n-o>=t&&(e(),o=n)}}document.onvisibilitychange=t((()=>{"hidden"===document.visibilityState&&(0,Ci.F)(void 0,!0)}),3e4);const n=indexedDB.open("coverageLib");let i;n.onupgradeneeded=function(){n.result.createObjectStore("coverage",{keyPath:"key"})},n.onsuccess=function(){i=n.result;const e=i.transaction("coverage","readwrite").objectStore("coverage").get("__coverage__");e.onsuccess=()=>{const t=e.result;if(null!=t&&t.data){const{gitInfo:e={},NODE_SERVER_ENV:o="",SiteUID:n=""}=gbCommonInfo,a=new File([t.data],"coverage.json",{type:"text/json"}),r=new FormData;r.append("coverage",a),r.append("branchName",e.branch||""),r.append("gitCommitId",(null==e?void 0:e.commitId)||""),r.append("env",o),r.append("platform","pc"),r.append("site",n),(0,s.A)({url:"https://tep.sheincorp.cn/api/coverage/upload/web",method:"POST",data:r,headers:{brand:WEB_CLIENT},timeout:6e4}).then((()=>{i.transaction("coverage","readwrite").objectStore("coverage").delete("__coverage__").onsuccess=()=>{Ti.info("[indexedDB]: __coverage__已删除")}})).catch((e=>{Ti.error("[indexedDB] send coverage fail",e)}))}}};const a=()=>new Promise(((e,t)=>{const o=i.transaction("coverage","readwrite").objectStore("coverage"),n=o.get("__coverage__");n.onsuccess=()=>{n.result||(o.put({key:"__coverage__",data:JSON.stringify(window.__coverage__),createdAt:Date.now()}),i.close(),e())},n.onerror=()=>{i.close(),t()}}));window.addEventListener("beforeunload",(async()=>{if(i)try{await a()}catch(e){Ti.error("[indexedDB] coverage save error!")}}))}requestIdleCallback((()=>{var e,t;if(null===(e=window.TPM)||void 0===e||e.publish("pageview",{page_name:(null===(t=window.SaPageInfo)||void 0===t?void 0:t.page_name)||""}),["gray","debug"].includes(gbCommonInfo.NODE_SERVER_ENV)){if(navigator.webdriver)return;setTimeout((()=>{(0,Ci.F)(),Promise.all([o.e(7526),o.e(66948),o.e(18781),o.e(39436)]).then(o.bind(o,198432))}),2e3),setInterval((()=>{(0,Ci.F)()}),3e5)}})),window.Proxy||window.sa("send",{activity_name:"expose_browser_not_support_proxy"}),(0,k.isLogin)()&&o.e(44531).then(o.bind(o,244531)),"gray"===(null===(e=gbCommonInfo)||void 0===e?void 0:e.NODE_SERVER_ENV)&&"https:"===location.protocol&&o.e(60889).then(o.t.bind(o,160889,23))}));const Di=new CustomEvent("monitor-inited",{detail:{SILogger:Ye.Vc,SIMetric:Ye.JY}});null===(Pi=(Ei=window).dispatchEvent)||void 0===Pi||Pi.call(Ei,Di)},944891:(e,t,o)=>{var n=o(977809).default;if("AbortController"in window)window.SchttpAbortCon=AbortController;else{class e{constructor(){n(this,"_aborted",!1),n(this,"onCanceled",null)}get aborted(){return this._aborted}addEventListener(e,t){this.onCanceled=t}removeEventListener(){this.onCanceled=null}dispatchEvent(e){var t;this._aborted=!0,null===(t=this.onCanceled)||void 0===t||t.call(this,e)}}class t{constructor(){n(this,"signal",new e)}abort(e){this.signal.dispatchEvent(e)}}window.SchttpAbortCon=t}},945286:(e,t,o)=>{"use strict";o.d(t,{A:()=>p});var n=o(53555),i=o(21302),a=o(665640);let r=!1;const s=[];let c={register:()=>{},completeRegistration:()=>{},isReady:()=>!1},l=null;const d=(e,t,o)=>{r&&l?l.call(c,e,t,o):s.push({name:e,component:t,options:o})},u=()=>{r&&l&&(s.forEach((({name:e,component:t,options:o})=>{try{l.call(c,e,t,o)}catch(t){a.error(`注册弹窗 ${e} 失败:`,t)}})),s.length=0)};if("undefined"!=typeof window&&(0,i.xo)()){const e="__POPUP_SDK__";c=(()=>{if(window[e]){const t=window[e];return l=t.register,r=!0,u(),t}const t=(0,n.$)({globalVarName:e,enableMonitor:!1});return setTimeout((()=>{r=!0,u()}),0),t})(),l=c.register,c.register=d}c.isReady=()=>r;const p=c},984815:(e,t,o)=>{"use strict";o.d(t,{T9:()=>r,YA:()=>a,Zr:()=>p,al:()=>u,bs:()=>c,cb:()=>s,eD:()=>m,jy:()=>d,nt:()=>l,rs:()=>_,vf:()=>g});var n=o(859553),i=o(665640);const a=(e,t,o=!0)=>{e.show=o,e.txt=t},r=e=>{if(!Array.isArray(e)||e.length<1)return[];return e.filter((e=>2==e.alias_type?e.encryption_alias&&e.desensitize_alias&&e.uid&&e.area_code&&e.area_abbr:e.encryption_alias&&e.desensitize_alias&&e.uid))},s=e=>{let t="";switch(e){case 3:t=12;break;case 4:t=11;break;case 6:t=15;break;case 7:t=13;break;case 8:t=16;break;case 9:t=17;break;case 10:t=18;break;case 11:t=19;break;default:t=!1}return t},c=e=>{let t="";switch(+e){case 12:t=3;break;case 11:t=4;break;case 14:t=6;break;case 13:t=7;break;case 16:t=8;break;case 17:t=9;break;case 18:t=10;break;case 19:t=11;break;default:t=!1}return t},l=e=>{const{register_type:t}=e||{},o=n.RP[t];if(!o)return i.warn(`Unsupported register_type: ${t}`),{};const[a,r]=o;return{accessToken:e[a],socialId:e[r],source:t}},d=e=>{const{register_type:t}=e||{},o=n.Wk[t];if(!o)return i.warn(`Unsupported register_type: ${t}`),{};const{idField:a,registerFrom:r}=o;return{user_id:e[a],register_from:r}},u=({register_type:e,socialId:t,accessToken:o})=>({Google:{id_token:o,google_id:t},Facebook:{fbtoken:o,facebook_id:t},Vk:{app_token:o,vk_id:t},Line:{id_token:o,user_id:t},Kakao:{kakao_token:o,kakao_id:t},Naver:{naver_token:o,naver_id:t},Klarna:{access_token:o,id_token:t},Yahoo:{access_token:o,id_token:t}}[e]||{}),p=e=>e?`${e[0].toUpperCase()}${e.slice(1).toLowerCase()}`:e,_=e=>{const t={Normal:7,Facebook:11,Google:12,Vk:13,Line:15,Kakao:16,Naver:17,Klarna:18,Yahoo:19};if(!t[e])throw new Error(`Unsupported source type: ${e}`);return t[e]},m=["404109","404110","404111","404101","404102","404105","404106","404107","100102","0"],g=e=>{if(!Array.isArray(e))return[];const t={freeShipping:0,amount:1,discount:2};return e.map((e=>{var o;return{benifitType:null!==(o=t[e.type])&&void 0!==o?o:0,maxValue:e.maxValue,threshold:e.threshold}}))}},999421:(e,t,o)=>{"use strict";o.d(t,{by:()=>b,iU:()=>w,kT:()=>f,u7:()=>v});var n=o(899909),i=o.n(n),a=o(990347),r=o(92525),s=o(632079),c=o(151590),l=o(177279),d=o(580031),u=o(743240),p=o(665640);function _({coupons:e,type:t="ga",isTheme:o}){if(!e||!e.length)return"";let n=[];return e.forEach(((e,o,i)=>{if("ga"==t||"sc"==t){if(0==o||o>0&&e.crowd!=i[o-1].crowd){const o="ga"==t?"通用券包":"通用券";n.push(e.crowd||o)}}else"bi"==t&&e&&n.push(o+1+"`"+(e.crowd||"通用券"))})),n=n.join("ga"==t||"sc"==t?"-":","),"ga"!=t&&"sc"!=t||(n+=o?"&自定义样式":"&默认样式"),n}function m(){return gbCommonInfo&&!!gbCommonInfo.isActivity}function g(e){if(!window._SHOW_COUPON_COUNTDOWN_)return!1;const{selfStatus:t,timeStatus:o}=e,n=(a=e.endTime,Number(a)==a?a:new Date(null==a?void 0:i()(a).call(a,"-","/")).getTime()/1e3);var a;if("0"===t&&"1"==o)return!1;let[r,s,c]=[2592e5,(new Date).getTime(),1e3*n];return!(s+r<=c)}function h(e={},{jumpType:t=0,coupons:o=[],act_id:n=""}){if(!e)return{};let i=window.SaPageInfo||window.getSaPageInfo||"";if(!i)return{};let a=i.page_id||"",{scene_id:s=0,scene_name:c=0,oper_id:l=0,style_id:d=1,id:u=""}=e,p=`${a}\`0\`${s}_${c}\`0\`0\`${l}\`1\`${d}\`${r.default.isLogin()?"50000":"50001"}\`0\`0\`0\`${t}\`${u}`,h=o.reduce(((e,t,o,n)=>e+`${t.couponId}_${g(t)?"countdown":"interval"}`+(o==n.length-1?"":"`")),"");return{...e,spm:p,act_id:n,content_list:h,abtest:window._SHOW_COUPON_COUNTDOWN_ABTEST_?window._SHOW_COUPON_COUNTDOWN_ABTEST_:"-`-`-",from:m()?1:0,crowd_id:_({coupons:o,type:"bi"})}}a.J.addSubscriber({modulecode:"2-11"}),a.J.addSubscriber({modulecode:"1-11-1"});const f={click_popup({coupons:e,_config_:t,type:o,act_id:n}){const i=h(t,{coupons:e,act_id:n});i.type=o,sa("send",{activity_name:"click_popup",activity_param:i})},async click_coupon_expansion_btn({coupons:e,_config_:t}){let o=await h(t,{coupons:e,act_id:5});sa("send",{activity_name:"click_popup",activity_param:o}),(0,u.v2)({isLogin:(0,s.isLogin)(),clickType:5})},async expose_pop_coupon({coupons:e,_config_:t,type:o,...n}){try{let i=await h(t,{coupons:e});i.type=o,i={...i,...n},sa("send",{activity_name:"expose_popup",activity_param:i}),(0==t.popup_type||t.popup_type)&&(0,u.hO)({isLogin:(0,s.isLogin)(),couponPackageId:t.couponPackageId,abt:`popupPickup: ${t.abt}`})}catch(e){p.log(e)}},async click_pop_coupon_close({coupons:e,_config_:t,type:o}){try{let n=await h(t,{coupons:e,act_id:0});n.type=o,sa("send",{activity_name:"click_popup",activity_param:n}),(0,u.v2)({isLogin:(0,s.isLogin)(),clickType:0})}catch(e){p.log(e)}},async click_pop_coupon_receive({coupons:e,_config_:t}){try{let o=await h(t,{coupons:e,act_id:1});sa("send",{activity_name:"click_popup",activity_param:o}),(0,u.v2)({isLogin:(0,s.isLogin)(),clickType:1})}catch(e){p.log(e)}},async click_pop_coupon_ok({coupons:e,_config_:t,type:o}){try{let n=await h(t,{coupons:e,act_id:1});n.type=o,sa("send",{activity_name:"click_popup",activity_param:n}),(0,u.v2)({isLogin:(0,s.isLogin)(),clickType:1})}catch(e){p.log(e)}},async click_pop_coupon_shopnow({coupons:e,_config_:t,type:o}){try{const n=await h(t,{coupons:e,act_id:1});n.type=o,sa("send",{activity_name:"click_popup",activity_param:n}),(0,u.v2)({isLogin:(0,s.isLogin)(),clickType:1}),(0,u.fB)({isLogin:(0,s.isLogin)(),LinkType:t.button_link})}catch(e){p.log(e)}},click_auto_coupon_get({status:e="success",login_type:t="logged",coupons:o,type:n}){try{sa("send",{activity_name:"click_auto_coupon_get",activity_param:{status:e,login_type:t,from:m()?1:0,coupon_crowd_id:_({coupons:o,type:"bi"}),type:n}})}catch(e){p.log(e)}},async click_login_back_get({coupons:e,_config_:t}){let o=await h(t,{coupons:e,act_id:1});sa("send",{activity_name:"click_popup",activity_param:o}),(0,u.v2)({isLogin:(0,s.isLogin)(),clickType:1})},async click_use_btn({coupons:e,_config_:t,type:o}){const n=await h(t,{coupons:e,act_id:4});n.type=o,sa("send",{activity_name:"click_popup",activity_param:n}),(0,u.v2)({isLogin:(0,s.isLogin)(),clickType:4})},async click_coupon_anasysis({coupons:e,_config_:t,type:o}){let n=await h(t,{coupons:e,act_id:2});n.type=o,sa("send",{activity_name:"click_popup",activity_param:n}),(0,u.v2)({isLogin:(0,s.isLogin)(),clickType:2})},expose_popup_coupon_collection_failed({type:e}){sa("send",{activity_name:"expose_popup_coupon_collection_failed",activity_param:{type:e}})},click_coupongotten_popup({actId:e}){sa("send",{activity_name:"click_coupongotten_popup",activity_param:{act_id:e}})},expose_usebutton_hand(){sa("send",{activity_name:"expose_usebutton_hand"})},expose_benefit_activity({type:e}){sa("send",{activity_name:"expose_benefit_activity",activity_param:{type:e}}),(0,u.Yn)({isLogin:(0,s.isLogin)(),activityType:e})},expose_coupon_toast(e){sa("send",{activity_name:"expose_coupon_toast",activity_param:e})},expose_coupon_pickup_toast(e){sa("send",{activity_name:"expose_coupon_pickup_toast",activity_param:e})}},w={async expose_popup_coupon_reminder({coupons:e,_config_:t,...o}){try{let n=await h(t,{coupons:e});n={...n,...o},sa("send",{activity_name:"expose_popup_coupon_reminder",activity_param:n})}catch(e){p.log(e)}},async click_popup_coupon_reminder_button({coupons:e,_config_:t,act_id:o}){try{const n=await h(t,{coupons:e,act_id:o});sa("send",{activity_name:"click_popup_coupon_reminder_button",activity_param:n})}catch(e){p.log(e)}},expose_usebutton_hand(){sa("send",{activity_name:"expose_usebutton_reminder_hand"})}},v={normaMonitor(e={}){y(0,e)},errorMonitor(e={}){y(1,e)},operationMonitor(e={}){y(2,e)}},y=(e,t={})=>{const{code:o,failure_reason:n,show_judge:i=2,failure_port:s="-",coupon_package_id:c="-",remark:l="-"}=t;delete t.code;const d="string"==typeof n?n:JSON.stringify(n),u={mid:r.default.get({key:"memberId",actionType:"common/couponPackage/new"})||"-",cid:r.default.get({key:"oest"})||"-",remark:l};a.J.triggerNotice({daId:"2-11-13",extraData:{monitor_type:e,code_branch:o,failure_reason:d||"-",show_judge:i,code_branch_remark:u,failure_port:s,coupon_package_id:c}})};async function b(){if(!(0,s.isLogin)())return;const[e,t]=await(0,d.Tk)((0,c.$v)());(e||"0"!==(null==t?void 0:t.code))&&l.Vc.logWarn({tag:"coupon_package.warn",message:"queryCouponOnBlackSence error",params:{err:e,result:t}})}}}]);
//# sourceMappingURL=5626-fc5c8e09a4e405a5.js.map