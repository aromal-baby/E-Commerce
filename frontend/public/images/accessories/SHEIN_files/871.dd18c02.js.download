/*! For license information please see 871.dd18c02.js.LICENSE.txt */
"use strict";(self.webpackChunkark=self.webpackChunkark||[]).push([[871],{"0mZD":(e,t,n)=>{function r(e){if("string"!=typeof e)return"";var t={SR:"",AED:""};return e in t?t[e]:e.replace(/\b(AED|SR)(?=\s*\d+(\.\d+)?\b)/g,function(e){return t[e]})}n.d(t,{X:()=>r})},HGRZ:(e,t,n)=>{n.d(t,{T:()=>a,u:()=>o});var r=n("oIFm"),i=n.n(r),a=function(e,t){var n=!(i()(String(e))==e);return String(n?e:e+("laptop"===t?"px":"vw"))};function o(){var e,t;return"undefined"!=typeof window&&(null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||(null==(t=null==window?void 0:window.navigator)?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(null==window?void 0:window.navigator.userAgent))}},NFS3:(e,t,n)=>{n.d(t,{K$:()=>m,xD:()=>f});var r=n("WA4n"),i=n.n(r),a=n("q5KV"),o=n.n(a),u=n("Gm+S"),c=n.n(u),l=n("1gEK"),s=n("2QGG"),d=n("HGRZ");function f(e,t){var n,r=t.maxWait,a=t.wait,u=void 0===a?r||0:a,c=t.leading,s=void 0!==c&&c,d=t.trailing,f=void 0===d?u>0:d,v=0,h=function(){return n&&clearTimeout(n)},p=function(){for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];var l=i()();function d(){v=l,h(),e.apply(void 0,a)}p.flush=d;var m=l-v;0===v&&(s&&d(),v=l),void 0!==r?m>r&&d():m<u&&(v=l),h(),n=o()(function(){f&&d(),v=0},u)};return p.cancel||(p.cancel=h),p.flush||(p.flush=h),(0,l.hi)(p.cancel),p}var v=new(c()),h=new(c()),p=new(c());function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,s.KR)(t),r=(0,s.KR)(t);(0,l.wB)(e,function(e){var t=_(e);if(t){var r=t.style.overflow;"hidden"!==r&&p.set(t,r),n.value&&u(t)}},{immediate:!0});var i=function(){var t=_(g(e));t&&n.value&&(!function(e){if(o(e,-1),a(e)){if((0,d.u)()){var t=h.get(e);t&&(t(),h.delete(e))}r.value=!1,e.style.overflow=p.get(e)||""}}(t),n.value=!1)};function a(e){return!v.get(e)}function o(e,t){v.set(e,Math.max((v.get(e)||0)+t,0))}function u(e){if(a(e)){if((0,d.u)()){var t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=function(){},a=(0,l.wB)(e,function(e){i(),e&&(e.addEventListener(t,n,r),i=function(){return e.removeEventListener(t,n,r)})},{immediate:!0,flush:"post"});function o(){a(),i()}return(0,s.o5)()&&(0,s.jr)(o),o}(function(){return e},"touchmove",function(e){!function(e){var t=e||window.event;if(y(t.target))return!1;if(t.touches.length>1)return!0;t.preventDefault&&t.preventDefault()}(e)},{passive:!1});h.set(e,t)}r.value=!0,e.style.overflow="hidden"}o(e,1)}return(0,s.o5)()&&(0,s.jr)(i),[(0,l.EW)({get:function(){return n.value},set:function(t){var r;t?(r=_(g(e)))&&!n.value&&(u(r),n.value=!0):i()}}),r]}function y(e){var t=window.getComputedStyle(e);if("scroll"===t.overflowX||"scroll"===t.overflowY||"auto"===t.overflowX&&e.clientWidth<e.scrollWidth||"auto"===t.overflowY&&e.clientHeight<e.scrollHeight)return!0;var n=e.parentNode;return!(!n||"BODY"===n.tagName)&&y(n)}function g(e){return"function"==typeof e?e():e.value}function _(e){return"undefined"!=typeof Window&&e instanceof Window?e.document.documentElement:"undefined"!=typeof Document&&e instanceof Document?e.documentElement:e}},"S+kP":(e,t,n)=>{n.d(t,{D7:()=>ut,h:()=>ot});var r=n("xsP2"),i=n.n(r),a=n("xsts"),o=n.n(a),u=n("BJYW"),c=n.n(u),l=n("h3xg"),s=n.n(l),d=n("AJcz"),f=n.n(d),v=n("RLpT"),h=n.n(v),p=n("efps"),m=n.n(p),y=n("qItV"),g=n.n(y),_=n("93E4"),w=n.n(_),b=n("EDJt"),k=n.n(b),S=n("HJGT"),L=n.n(S),E=n("1pTK"),D=n.n(E),x=n("5k+Q"),I=n.n(x),T=n("5r9q"),N=n.n(T),B=n("l1ci"),O=n.n(B),A=n("dWHw"),R=n.n(A),C=n("N1wU"),P=n.n(C),j=n("YwGl"),M=n.n(j),G=n("6KbA"),H=n.n(G),U=n("N2Gg"),q=n.n(U),K=n("bGFt"),F=n.n(K),W=n("WA4n"),J=n.n(W),z=n("q5KV"),Y=n.n(z),$=n("U8cm"),X=n.n($),V=n("CtJl"),Z=n.n(V),Q=n("u0uu"),ee=n.n(Q),te=n("1SGe"),ne=n.n(te),re=n("uiOI"),ie=n.n(re),ae=n("XrCz"),oe=n.n(ae),ue=n("wG1B"),ce=n.n(ue),le=n("zbRa"),se=n.n(le),de=n("j2rd"),fe=n.n(de),ve=n("whyG"),he=["generator"],pe=["url","headers"],me=["immediate","remove_duplicate_during_daily"],ye=["immediate","remove_duplicate_during_daily"];function ge(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(o()(t).call(t,r))continue;n[r]=e[r]}return n}(e,t);if(i()){var u=i()(e);for(r=0;r<u.length;r++)n=u[r],o()(t).call(t,n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _e(e,t){return function(e){if(m()(e))return e}(e)||function(e,t){var n=null==e?null:void 0!==f()&&h()(e)||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(s){l=!0,i=s}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return u}}(e,t)||function(e,t){if(e){var n;if("string"==typeof e)return we(e,t);var r=c()(n={}.toString.call(e)).call(n,8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?s()(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function be(){be=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=g()||function(e,t,n){e[t]=n.value},a="function"==typeof f()?f():{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(e,t,n){return g()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(U){s=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof b?t:b,o=w()(a.prototype),u=new G(r||[]);return i(o,"_invoke",{value:C(e,n,u)}),o}function v(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=d;var h="suspendedStart",p="suspendedYield",m="executing",y="completed",_={};function b(){}function S(){}function E(){}var x={};s(x,o,function(){return this});var T=k(),B=T&&T(T(H([])));B&&B!==n&&r.call(B,o)&&(x=B);var O=E.prototype=b.prototype=w()(x);function A(e){var t;L()(t=["next","throw","return"]).call(t,function(t){s(e,t,function(e){return this._invoke(t,e)})})}function R(e,t){function n(i,a,o,u){var c=v(e[i],e,a);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Le(s)&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,o,u)},function(e){n("throw",e,o,u)}):t.resolve(s).then(function(e){l.value=e,o(l)},function(e){return n("throw",e,o,u)})}u(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=h;return function(a,o){if(i===m)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var c=P(u,r);if(c){if(c===_)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var l=v(t,n,r);if("normal"===l.type){if(i=r.done?y:p,l.arg===_)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var a=v(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,_;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function G(e){this.tryEntries=[{tryLoc:"root"}],L()(e).call(e,j,this),this.reset(!0)}function H(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Le(t)+" is not iterable")}return S.prototype=E,i(O,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:S,configurable:!0}),S.displayName=s(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return D()?D()(e,E):(e.__proto__=E,s(e,l,"GeneratorFunction")),e.prototype=w()(O),e},t.awrap=function(e){return{__await:e}},A(R.prototype),s(R.prototype,u,function(){return this}),t.AsyncIterator=R,t.async=function(e,n,r,i,a){void 0===a&&(a=I());var o=new R(d(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},A(O),s(O,l,"Generator"),s(O,o,function(){return this}),s(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return N()(n).call(n),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=H,G.prototype={constructor:G,reset:function(t){var n;if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,L()(n=this.tryEntries).call(n,M),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+c()(i).call(i,1))&&(this[i]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:H(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}function ke(e,t,n,r,i,a,o){try{var u=e[a](o),c=u.value}catch(l){return void n(l)}u.done?t(c):I().resolve(c).then(r,i)}function Se(e){return function(){var t=this,n=arguments;return new(I())(function(r,i){var a=e.apply(t,n);function o(e){ke(a,r,i,o,u,"next",e)}function u(e){ke(a,r,i,o,u,"throw",e)}o(void 0)})}}function Le(e){return(Le="function"==typeof f()&&"symbol"==typeof O()?function(e){return typeof e}:function(e){return e&&"function"==typeof f()&&e.constructor===f()&&e!==f().prototype?"symbol":typeof e})(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),g()(e,Be(r.key),r)}}function xe(e,t,n){return t&&De(e.prototype,t),n&&De(e,n),g()(e,"prototype",{writable:!1}),e}function Ie(e,t){var n=R()(e);if(i()){var r=i()(e);t&&(r=P()(r).call(r,function(t){return M()(e,t).enumerable})),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n,r,i=null!=arguments[t]?arguments[t]:{};t%2?L()(n=Ie(Object(i),!0)).call(n,function(t){Ne(e,t,i[t])}):H()?q()(e,H()(i)):L()(r=Ie(Object(i))).call(r,function(t){g()(e,t,M()(i,t))})}return e}function Ne(e,t,n){return(t=Be(t))in e?g()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[F()];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Le(t)?t:t+""}var Oe=Te(Te({},{app_name:"",timestamp:"",local_time:"",session_id:"",member_id:"",sdk_version:"",network_type:"",device_id:"",device_level:"",device_type:"",device_model:"",device_brand:"",browser_name:"",browser_versions:"",os_versions:"",os_name:"",language:"",sub_site:"",money_type:"",user_agent:"",referer:""}),{},{level:"INFO",tag:"",message:"",params:{}}),Ae="1.1.40",Re=function(){var e,t,n,r,i;if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();var a=function(){return Number(Math.random().toString().substr(3,6)+J()())},o=[];return o.push(c()(e=a().toString(16)).call(e,0,8)),o.push(c()(t=a().toString(16)).call(t,0,4)),o.push(c()(n=a().toString(16)).call(n,0,4)),o.push(c()(r=a().toString(16)).call(r,0,4)),o.push(c()(i=a().toString(16)).call(i,0,12)),o.join("-")},Ce=function(e){if(!e)return"";try{return JSON.parse(e)}catch(t){return{}}},Pe=function(e){"undefined"==typeof window?e():(window.requestIdleCallback||function(e){return Y()(function(){e()},1)})(e)},je=function(){return xe(function e(){Ee(this,e)},[{key:"http",value:function(e){e.data||(e.data=e.params||{}),this.fetch(e)}},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){if("function"==typeof fetch){if(e.url){var t=e.method||"GET";e.method||(t=e.data?"POST":"GET");var n=e.headers||{};try{"function"==typeof e.beforeRequest&&e.beforeRequest({url:e.url,method:t,headers:n,data:e.data})}catch(i){}var r={method:t,headers:n};"POST"===t&&(r.body=X()(e.data)),"GET"===t&&(e.url=e.url+"?"+this.formatParams(e.data)),fetch(e.url,r).then(function(e){return e.status>=200&&e.status<300||304==e.status?e.text():I().reject(e)}).then(function(t){var n;null===(n=e.success)||void 0===n||n.call(e,Ce(t))}).catch(function(t){var n;null===(n=e.error)||void 0===n||n.call(e,t)})}}else this.ajax(e)})},{key:"ajax",value:function(e){if(e.url){var t=this.xhr();if(!t)return!1;var n=e.method||"GET";e.method||(n=e.data?"POST":"GET"),"GET"===n&&(e.url=e.url+"?"+this.formatParams(e.data)),t.open(n,e.url,!0),(e.success||e.error)&&(t.onreadystatechange=function(){try{if(4==t.readyState){var n,r;if(t.status>=200&&t.status<300||304==t.status)null===(n=e.success)||void 0===n||n.call(e,Ce(t.responseText));else null===(r=e.error)||void 0===r||r.call(e,Ce(t.responseText));t.onreadystatechange=null,t.onload=null}}catch(i){t.onreadystatechange=null,t.onload=null}});var r=e.headers;try{"function"==typeof e.beforeRequest&&e.beforeRequest({url:e.url,method:n,headers:r,data:e.data})}catch(o){}for(var i in r){var a=r[i];a&&t.setRequestHeader(i,a)}t.send(X()(e.data))}}},{key:"xhr",value:function(){return"undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:null}},{key:"formatParams",value:function(e){var t=[];for(var n in e||{}){var r,i=e[n];void 0!==i&&t.push(Z()(r="".concat(n,"=")).call(r,encodeURIComponent(i)))}return t.join("&")}}])}(),Me=function(e){var t=e.key,n=e.value,r=e.expire;try{var i={value:n,expire:void 0!==r?(new Date).getTime()+r:void 0};localStorage.setItem(t,X()(i))}catch(a){}},Ge=function(e){try{var t=localStorage.getItem(e);if(!t)return null;var n=JSON.parse(t),r=n.value,i=n.expire;return void 0!==i&&(new Date).getTime()>i?(localStorage.removeItem(e),null):r}catch(a){return null}},He=null,Ue=function(){var e,t,n,r,i,a,o=(e=navigator.userAgent.toLowerCase(),/mobile|ip(hone|od)|midp|rv:1.2.3.4|ucweb|android|blackberry|iemobile|windows ce|windows mobile/.test(e)?"Phone":/ipad|tablet/.test(e)?"Tablet":"Desktop");return Te(Te({},Oe),{},{sdk_version:Ae,user_agent:navigator.userAgent,network_type:(i="",a=(null===(t=navigator)||void 0===t?void 0:t.connection)||(null===(n=navigator)||void 0===n?void 0:n.mozConnection)||(null===(r=navigator)||void 0===r?void 0:r.webkitConnection),a&&void 0!==(null==a?void 0:a.effectiveType)&&(i=null==a?void 0:a.effectiveType),i),referer:encodeURIComponent(document.referrer)||"",device_level:"Phone"==o?"0":"Desktop"==o?"1":"Tablet"==o?"2":"3"})},qe=function(e){var t;return Z()(t="".concat(e.tag||e.metric_name," ")).call(t,X()(Te(Te({},e.params),e.tags)))},Ke=function(e,t){var n;if("object"!==Le(e))return e;try{for(var r in e=JSON.parse(X()(e)))if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];switch(Le(i)){case"object":e[r]=c()(n=X()(i)).call(n,0,500);break;case"number":t||(e[r]=String(i))}}return e}catch(a){return e}},Fe=function(e){var t,r,i="undefined"!=typeof window;return"function"==typeof e?e():i?(r=new je,ee()(t=r.http).call(t,r)):function(e){try{n("bkPu").request(e)}catch(t){}}},We=!1,Je=[],ze=function(e,t){if("undefined"==typeof window)return!1;if(!t.remove_duplicate_during_daily)return!1;var n=e.tag||e.metric_name;try{var r=e["boolean"==typeof t.remove_duplicate_during_daily?"session_id":t.remove_duplicate_during_daily];return!(!n||!r||"string"!=typeof r)&&Ye(r,n)}catch(i){return!1}},Ye=function(e,t){try{var n,r="skynet_repeat_daily",i=Ge(r);if(i)if(new Date((new Date).getTime()).getDate()==new Date(i.begin).getDate()){if(i.data[e]&&o()(n=i.data[e]).call(n,t))return!0}else localStorage.removeItem(r);var a=Te({},null==i?void 0:i.data);return a[e]||(a[e]=[]),a[e].push(t),Me({key:r,value:{data:a,begin:J()()},expire:864e5}),!1}catch(u){return!1}},$e={name:"skynet-db",version:2,shell_type_map:{offLine:"off-line-record",log:"log-record",metric:"metric-record"},shell_config:{"off-line-record":{keyPath:"id"}},unAutoConsumer:["offLine"]},Xe=function(e,t){if(t<e[0]||t>e[e.length-1])return-1;for(var n=0,r=e.length-1;n<=r;){var i=Math.floor((n+r)/2);if(e[i]===t)return i;e[i]>t?r=i-1:n=i+1}return-1},Ve=function(){return xe(function e(t){var n,r=this;Ee(this,e),Ne(this,"DB_NAME","skynet-log"),Ne(this,"SHELL_PRIMARY_KEY",{}),this.DB_NAME=t.DB_NAME||"skynet-log";var i=t.SHELL_LIST||["log-record"];L()(n=R()(t.SHELL_CONFIG||{})).call(n,function(e){var n,i=(null===(n=t.SHELL_CONFIG)||void 0===n?void 0:n[e])||{};i.keyPath&&(r.SHELL_PRIMARY_KEY[e]=i.keyPath)}),L()(i).call(i,function(e){var t=r.DB_NAME+"_"+e;Ge(t)||Me({key:t,value:{index:-1},expire:6048e5})})},[{key:"get",value:function(e,t){for(var n,r=this.DB_NAME+"_"+e,i=Ge(r),a=P()(n=R()(i)).call(n,function(e){return!isNaN(Number(e))}),o=[],u=0;u<t&&!(a.length<=0);u++){var c=a.shift(),l=i[c||""];l&&o.push({data:l,primaryKey:c})}return o}},{key:"getRange",value:function(e,t,n){var r,i,a=this.DB_NAME+"_"+e,o=Ge(a),u=ne()(r=P()(i=R()(o)).call(i,function(e){return!isNaN(Number(e))})).call(r,Number),c=Xe(u,t),l=Xe(u,n);if(-1==c&&-1==l)return[];c=-1===c?0:c,l=-1===l?u.length-1:l;for(var s=[],d=c;d<=l;d++){var f=o[u[d]];f&&s.push(f)}return s}},{key:"add",value:function(e,t){var n,r=this.DB_NAME+"_"+e,i=this.SHELL_PRIMARY_KEY[e];if(i){if("object"!==Le(t))return;if(!t[i])return}var a=Ge(r),o=i?t[i]:(null!==(n=null==a?void 0:a.index)&&void 0!==n?n:-1)+1,u=o<0?0:o;a[u]=t,Me({key:r,value:Te(Te({},a),{},{index:u}),expire:2592e5})}},{key:"update",value:function(e,t,n){var r=this.DB_NAME+"_"+e;Ge(r)[t]=n}},{key:"delete",value:function(e,t){if("number"==typeof t){var n=this.DB_NAME+"_"+e,r=Ge(n);delete r[t],Me({key:n,value:Te({},r),expire:6048e5})}}}])}(),Ze=function(){return xe(function e(){Ee(this,e),Ne(this,"DB_NAME",""),Ne(this,"SHELL_LIST",[]),Ne(this,"db",void 0),Ne(this,"backupDB",null),Ne(this,"DB_UN_SUPPORT",!1)},[{key:"initDBName",value:function(e){this.DB_NAME=e.DB_NAME||this.DB_NAME,this.SHELL_LIST=e.SHELL_LIST||this.SHELL_LIST}},{key:"globalDB",value:function(){return"undefined"==typeof window?null:window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB}},{key:"deleteDB",value:function(e){var t=this;return new(I())(function(n,r){var i=t.globalDB();if(i){var a=i.deleteDatabase(e);a.addEventListener("success",function(e){n(e)}),a.addEventListener("error",function(e){r(e)})}})}},{key:"creteBackupDB",value:function(e){this.DB_UN_SUPPORT=!0,this.backupDB=new Ve(e)}},{key:"init",value:function(e){var t=this;return new(I())(function(n,r){try{if(t.initDBName(e),!t.DB_NAME||!t.SHELL_LIST.length)return r("DB_NAME or SHELL_LIST is required");var i=t.globalDB();if(!i)return t.creteBackupDB(e),n(!0);var a=i.open(t.DB_NAME,$e.version);a.addEventListener("error",function(e){r(e)}),a.addEventListener("success",function(e){t.db=e.target.result,n(e.target.result),t.db.addEventListener("versionchange",function(){t.db.close(),location.reload()}),I().all([t.deleteDB("shein-log"),t.deleteDB("metric-shein-log")]).then(function(){}).catch(function(e){})}),a.addEventListener("upgradeneeded",function(n){var r,i;t.db=n.target.result,L()(r=t.SHELL_LIST).call(r,function(n){var r;t.db.objectStoreNames.contains(n)||t.db.createObjectStore(n,Te({autoIncrement:!0},null===(r=e.SHELL_CONFIG)||void 0===r?void 0:r[n]))});var a=P()(i=ie()(t.db.objectStoreNames)).call(i,function(e){var n;return!o()(n=t.SHELL_LIST).call(n,e)});a.length&&L()(a).call(a,function(e){t.db.deleteObjectStore(e)})})}catch(u){r(u)}})}},{key:"get",value:(r=Se(be().mark(function e(t,n){var r=this;return be().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(I())(function(e,i){var a,o=[];if(n<=0)return e(o);if(r.DB_UN_SUPPORT)return e((null===(a=r.backupDB)||void 0===a?void 0:a.get(t,n))||[]);var u=r.db.transaction([t],"readonly").objectStore(t).openCursor();u.addEventListener("success",function(t){var r=t.target.result;if(r&&o.length<n){var i=r.value;o.push({data:i,primaryKey:r.primaryKey}),r.continue()}else e(o)}),u.addEventListener("error",function(e){i(e)})}));case 1:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})},{key:"getRange",value:(n=Se(be().mark(function e(t,n,r){var i=this;return be().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(I())(function(e,a){var o;if(i.DB_UN_SUPPORT)return e((null===(o=i.backupDB)||void 0===o?void 0:o.getRange(t,n,r))||[]);var u=i.db.transaction([t],"readonly").objectStore(t).getAll(IDBKeyRange.bound(n,r));u.addEventListener("success",function(t){var n=t.target.result;e(n)}),u.addEventListener("error",function(e){a(e)})}));case 1:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)})},{key:"update",value:function(e,t,n){var r=this;return new(I())(function(i,a){try{var o;if(r.DB_UN_SUPPORT)return null===(o=r.backupDB)||void 0===o||o.update(e,t,n),i(!0);var u=r.db.transaction([e],"readwrite").objectStore(e),c=u.get(t);c.addEventListener("success",function(){var e=u.put(n,t);e.addEventListener("success",function(e){i(e)}),e.addEventListener("error",function(e){a(e)})}),c.addEventListener("error",function(e){a(e)})}catch(l){a(l)}})}},{key:"add",value:(t=Se(be().mark(function e(t,n){var r=this;return be().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(I())(function(e,i){try{var a;if(r.DB_UN_SUPPORT)return null===(a=r.backupDB)||void 0===a||a.add(t,n),e(!0);var o=r.db.transaction([t],"readwrite").objectStore(t).add(n);o.addEventListener("success",function(t){e(t.target.result)}),o.addEventListener("error",function(e){i(e)})}catch(u){i(u)}}));case 1:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)})},{key:"delete",value:(e=Se(be().mark(function e(t,n){var r=this;return be().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(I())(function(e,i){try{var a;if(r.DB_UN_SUPPORT)return null===(a=r.backupDB)||void 0===a||a.delete(t,n),e(!0);var o=r.db.transaction([t],"readwrite").objectStore(t).delete(n);o.addEventListener("success",function(t){e(t)}),o.addEventListener("error",function(e){i(e)})}catch(u){i(u)}}));case 1:case"end":return e.stop()}},e)})),function(t,n){return e.apply(this,arguments)})}]);var e,t,n,r}(),Qe=function(){return xe(function e(t,n){var r=this;Ee(this,e),Ne(this,"wait_add_queue",[]),Ne(this,"wait_consume",{realtime:!1,offline:[]}),Ne(this,"db_ready",!1),Ne(this,"_DB_",void 0),Ne(this,"_timers_",{}),Ne(this,"loop_time",3e4),Ne(this,"num",30),Ne(this,"log_http",void 0),Ne(this,"record_when_page_hidden",!1),this.log_http=t,this.num=(null==n?void 0:n.consume_count)||this.num,this.loop_time=(null==n?void 0:n.loop_time)||this.loop_time,this.record_when_page_hidden=(null==n?void 0:n.record_when_page_hidden)||!1,this.loop_time<1e3&&(this.loop_time=1e3),this.loop_time>6e4&&(this.loop_time=6e4),null!=n&&n.loop_time&&(this.loop_time,null==n||n.loop_time),this.initCacheDb(),!this.record_when_page_hidden&&function(e){if("undefined"!=typeof window&&"hidden"in document){if("function"==typeof e&&Je.push(e),We)return;We=!0,document.addEventListener("visibilitychange",function(){Je.length&&L()(Je).call(Je,function(e){e(document.hidden)})})}}(function(e){var t;e?r.stopLoopCheck():L()(t=R()($e.shell_type_map)).call(t,function(e){r.checkRetry(e)})})},[{key:"initCacheDb",value:function(){var e=this;this._DB_=new Ze,this._DB_.init({DB_NAME:$e.name,SHELL_LIST:ie()($e.shell_type_map),SHELL_CONFIG:$e.shell_config}).then(function(){for(e.db_ready=!0;e.wait_add_queue.length;){var t=_e(e.wait_add_queue.shift(),2),n=t[0],r=t[1];r&&e.recordCache(n,r)}var i;e.wait_consume.realtime&&L()(i=R()($e.shell_type_map)).call(i,function(t){e.checkRetry(t)});for(e.wait_consume.realtime=!1;e.wait_consume.offline.length;){var a=e.wait_consume.offline.shift();"function"==typeof a&&a()}}).catch(function(t){e.db_ready=!1})}},{key:"loopCheck",value:function(e){var t,n=this;this._timers_[e]||o()(t=$e.unAutoConsumer).call(t,e)||(this._timers_[e]=oe()(function(){n.checkRetry(e)},this.loop_time))}},{key:"stopLoopCheck",value:function(e){var t=this,n=function(e){t._timers_[e]&&(clearInterval(t._timers_[e]),t._timers_[e]=null)};if(e)n(e),n=null;else{for(var r in this._timers_)n(r);n=null}}},{key:"deleteRecord",value:function(e,t){var n=this;return this.db_ready&&void 0!==t?new(I())(function(r,i){var a,o=$e.shell_type_map[e];if(!o)return r(!1);null===(a=n._DB_)||void 0===a||null===(a=a.delete(o,t.primaryKey))||void 0===a||null===(a=a.then(function(){r(!0)}))||void 0===a||a.catch(function(e){i(e)})}):I().reject(!1)}},{key:"recordCache",value:function(e,t){var n=this;if(!this.db_ready)return this.wait_add_queue.push([e,t]);if(!this.record_when_page_hidden&&document.hidden)return this.stopLoopCheck();var r=$e.shell_type_map[e];r&&Pe(function(){var i;null===(i=n._DB_)||void 0===i||null===(i=i.add(r,t))||void 0===i||null===(i=i.then(function(){n.loopCheck(e)}))||void 0===i||i.catch(function(e){})})}},{key:"checkRetry",value:function(e){var t,n,r=this;if(!o()(t=$e.unAutoConsumer).call(t,e))if(this.db_ready){if(!this.record_when_page_hidden&&document.hidden)return this.stopLoopCheck();var i=$e.shell_type_map[e];if(i){null===(n=this._DB_)||void 0===n||null===(n=n.get(i,this.num))||void 0===n||null===(n=n.then(function(t){if(!t||!t.length)return r.stopLoopCheck(e);var n=[];L()(t).call(t,function(t){n.push(r.deleteRecord(e,t))}),I().all(n).then(function(){var n,i=P()(n=ne()(t).call(t,function(e){return e.data})).call(n,function(e){return!!e});"function"==typeof r.log_http&&r.log_http(i,e)}).catch(function(e){})}))||void 0===n||n.catch(function(e){})}}else this.wait_consume.realtime=!0}},{key:"getOfflineData",value:function(e,t){var n=this;return new(I())(function(r,i){var a;if(n.db_ready){var o=$e.shell_type_map.offLine;return o?"number"!=typeof e||"number"!=typeof t||e>t?r([]):void(null===(a=n._DB_)||void 0===a||a.getRange(o,e,t).then(function(e){r(e)}).catch(i)):r([])}n.wait_consume.offline.push(Se(be().mark(function i(){var a;return be().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.getOfflineData(e,t);case 2:a=i.sent,r(a);case 4:case"end":return i.stop()}},i)})))})}}])}(),et=function(){return xe(function e(t){Ee(this,e),Ne(this,"handler",void 0),this.handler=t},[{key:"sampling",value:function(e){if(void 0===e)return!0;var t=Number(e);return!isNaN(t)&&Math.random()<e}},{key:"log",value:function(e,t){this.sampling(null==t?void 0:t.random)&&this.handler(e,t)}},{key:"logInfo",value:function(e,t){if(this.sampling(null==t?void 0:t.random)){this.handler(Te({level:"INFO"},e),t)}}},{key:"logError",value:function(e,t){if(this.sampling(null==t?void 0:t.random)){this.handler(Te({level:"ERROR"},e),t)}}},{key:"logWarn",value:function(e,t){if(this.sampling(null==t?void 0:t.random)){this.handler(Te({level:"WARN"},e),t)}}},{key:"logDebug",value:function(e,t){if(this.sampling(null==t?void 0:t.random)){this.handler(Te({level:"DEBUG"},e),t)}}},{key:"logTrack",value:function(e,t){if(this.sampling(null==t?void 0:t.random)){this.handler(Te({level:"TRACE"},e),t)}}}])}(),tt=function(){return xe(function e(t){Ee(this,e),Ne(this,"env",""),Ne(this,"handler",void 0),this.handler=t},[{key:"init",value:function(e){this.env=(null==e?void 0:e.env)||""}},{key:"metricCount",value:(t=Se(be().mark(function e(t,n){var r;return be().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.metric_name){e.next=2;break}return e.abrupt("return");case 2:if(this.sampling(null==n?void 0:n.random)){e.next=4;break}return e.abrupt("return");case 4:r=void 0!==t.value?Number(t.value):1,this.handler(Te(Te({},t),{},{value:isNaN(r)?1:r,params:Te(Te({},t.params),t.tags),type:1}),n);case 6:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"metricValue",value:(e=Se(be().mark(function e(t,n){var r;return be().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.metric_name){e.next=2;break}return e.abrupt("return");case 2:if(this.sampling(null==n?void 0:n.random)){e.next=4;break}return e.abrupt("return");case 4:r=void 0!==t.value?Number(t.value):0,this.handler(Te(Te({},t),{},{value:isNaN(r)?0:r,params:Te(Te({},t.params),t.tags),type:2}),n);case 6:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"metricTime",value:function(e,t){this.metricValue(Te(Te({},e),{},{type:3}),t)}},{key:"startMetricTime",value:function(e,t){var n=this,r=J()();return function(i){var a=J()()-r;n.metricTime(Te(Te({},e),{},{tags:Te(Te({},e.tags),null==i?void 0:i.tags),params:Te(Te({},e.params),null==i?void 0:i.params),value:a}),t)}}},{key:"sampling",value:function(e){if(void 0===e)return!0;var t=Number(e);return!isNaN(t)&&Math.random()<e}}],[{key:"optimizeMetricList",value:function(e){var t=[],n={};return L()(e).call(e,function(e){if(1!==e.type)t.push(e);else{var r,i,a=ne()(r=R()(e.tags||{})).call(r,function(t){var n,r;return Z()(n="".concat(t,"_")).call(n,null===(r=e.tags)||void 0===r?void 0:r[t])}).join("|"),o=Z()(i="".concat(e.metric_name,"_")).call(i,a);if(!n[o])return void(n[o]=Te(Te({},e),{},{value:e.value||0}));void 0!==n[o].value&&(n[o].value+=e.value||0)}}),Z()(t).call(t,ie()(n))}}]);var e,t}(),nt=function(){return xe(function e(t,n){Ee(this,e),Ne(this,"cacheTime",2592e5),Ne(this,"setHandler",void 0),Ne(this,"getHandler",void 0),Ne(this,"deleteHandler",void 0),Ne(this,"uploadOptions",void 0),this.setHandler=t.set,this.getHandler=t.get,this.deleteHandler=t.delete,this.uploadOptions=n,this.checkExpireLog()},[{key:"log",value:function(e,t){var n=this;if("undefined"!=typeof window){try{"string"!=typeof t&&(t=X()(t))}catch(i){t=""}if(t){var r={id:J()(),type:e,content:t};Pe(function(){n.setHandler(r)})}}}},{key:"uploadSLS",value:function(e,t){this.capture(e,t,{sls:!0})}},{key:"uploadS3",value:function(){}},{key:"capture",value:(t=Se(be().mark(function e(t,n,r){var i,a,o,u=this;return be().wrap(function(e){for(var l;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof window){e.next=2;break}return e.abrupt("return");case 2:if(!(t>n)){e.next=4;break}return e.abrupt("return");case 4:if("number"==typeof t&&"number"==typeof n){e.next=6;break}return e.abrupt("return");case 6:if(!Ye(Z()(l="offlineTask-".concat(t,"-")).call(l,n),"1")){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.getHandler(t,n);case 11:if((i=e.sent).length){e.next=14;break}return e.abrupt("return");case 14:if(null!=r&&r.sls){for(a=[],o=0;o<i.length;o+=100)a.push(c()(i).call(i,o,o+100));L()(a).call(a,function(e){var r,i=ce()(e).call(e,function(e,t){var n;return e[new Date(t.id).toLocaleString()]=Z()(n="[".concat(t.type,"] [")).call(n,t.content,"]"),e},{});null===(r=u.uploadOptions)||void 0===r||r.sls({lower:t,upper:n,data:i})})}case 15:case"end":return e.stop()}},e,this)})),function(e,n,r){return t.apply(this,arguments)})},{key:"checkExpireLog",value:(e=Se(be().mark(function e(){var t,n,r,i,a,o,u=this;return be().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof window){e.next=2;break}return e.abrupt("return");case 2:if(!Ye("offlineDailyCheck","1")){e.next=5;break}return e.abrupt("return");case 5:return(t=new Date).setHours(0,0,0,0),n=t.getTime()-this.cacheTime,r=n-10*this.cacheTime,e.next=11,this.getHandler(r,n);case 11:for(i=e.sent,a=[],o=0;o<i.length;o+=20)a.push(c()(i).call(i,o,o+20));a.length&&L()(a).call(a,function(e){Pe(function(){u.deleteHandler(e)})});case 16:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})}]);var e,t}(),rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"skynet_fetch_ids",t=0,n=function(n){if("undefined"!=typeof window){try{var r=J()(),i=function(){if("undefined"==typeof window)return[];var t,n=[];try{(t=Ge(e))&&(n=t)}catch(r){}return n}();if(o()(i).call(i,n))return!0;0!==i.length&&0!==t||(t=r+6e4),r>t&&(localStorage.removeItem(e),i=[]),i.push(n),Me({key:e,value:i,expire:3e5})}catch(a){}return!1}};return function(e){return P()(e).call(e,function(e){return!e.id||!n(e.id)})}}(),it=function(e){if(null==e||!e.split||!/^[a-z]+(-{1}[a-z0-9]+)*$/.test(e))return e;var t=e.split("-");return ne()(t).call(t,function(e){return function(e){return null!=e&&e.toLowerCase?e.toLowerCase().replace(/( |^)[a-z]/g,function(e){return e.toUpperCase()}):e}(e)}).join("")},at={"monitor-http-plugin":"http","monitor-cache-plugin":"cache"},ot=new(function(){return xe(function e(){var t,n,r,i,a,o,u,c,l;Ee(this,e),Ne(this,"params",void 0),Ne(this,"dynamic_params",{}),Ne(this,"db_control",void 0),Ne(this,"http_fetch",void 0),Ne(this,"is_client_env",!0),Ne(this,"options",void 0),Ne(this,"host",void 0),Ne(this,"base_field",void 0),Ne(this,"SILogger",void 0),Ne(this,"SIMetric",void 0),Ne(this,"SIOffline",void 0),this.is_client_env="undefined"!=typeof window,this.base_field=this.is_client_env?(t=(0,ve.q)(navigator.userAgent),n=t.os,r=t.browser,i=t.device,a=r.name,o=r.version,u=n.name,c=n.version,l=Te(Te({},Ue()),{},{device_id:"",device_type:"",device_model:i.model||"",device_brand:i.vendor||"",browser_name:a,browser_versions:o,os_versions:c,os_name:u,session_id:""}),Te(Te({},Oe),l)):Te(Te({},Oe),{},{sdk_version:Ae}),this.initRTLogger(),this.initMetric(),this.initOfflineLog()},[{key:"init",value:function(e){var t;e.brand,this.host=e.host||function(e,t){var n="";switch(e){case"eur":n={production:"https://www.srmdata-eur.com",gray:"https://www.srmdata-eur.com",localhost:"https://srmdata-eur.abc-test.sheincorp.cn",debug:"https://srmdata-eur.abc-test.sheincorp.cn"}[t];break;case"us":n={production:"https://www.srmdata-us.com",gray:"https://www.srmdata-us.com",localhost:"https://srmdata-us.abc-test.sheincorp.cn",debug:"https://srmdata-us.abc-test.sheincorp.cn"}[t];break;default:n={production:"https://www.srmdata.com",gray:"https://www.srmdata.com",localhost:"https://srmdata.abc-test.sheincorp.cn",debug:"https://srmdata.abc-test.sheincorp.cn"}[t]}return n}(e.server_type||"central",e.env||"debug"),this.params=e,null===(t=this.SIMetric)||void 0===t||t.init({env:e.env})}},{key:"config",value:function(e){this.options=e}},{key:"registerField",value:function(e){var t={};try{for(var n in e){var r=e[n];"function"==typeof r?this.dynamic_params[n]=r:t[n]=JSON.parse(X()(r))}}catch(i){}this.base_field=Te(Te({},this.base_field||{}),t)}},{key:"getFields",value:function(e){return this.assignBaseField(e||{})}},{key:"assignBaseField",value:function(e){var t,n,r,i,a,u,c,l,s=(new Date).getTime(),d={timestamp:String(s),local_time:new Date(s).toLocaleString()},f={};try{if(R()(this.dynamic_params).length>0)for(var v in this.dynamic_params)f[v]=this.dynamic_params[v]()}catch(I){}for(var h in e){var p,m,y=e[h];if("object"===Le(y))if("object"===Le(null===(p=this.base_field)||void 0===p?void 0:p[h])||"object"===Le(f[h]))f[h]=Te(Te(Te({},null===(m=this.base_field)||void 0===m?void 0:m[h]),f[h]),y);else f[h]=y;else f[h]=y}var g,_,w,b,k,S,L,E,D=Te(Te(Te(Te({},this.base_field),{},{app_name:(null===(t=this.params)||void 0===t?void 0:t.brand)||"",device_type:(null===(n=this.params)||void 0===n?void 0:n.device_type)||"",sub_site:(null===(r=this.params)||void 0===r?void 0:r.site_uid)||(null===(i=this.params)||void 0===i?void 0:i.site)||"",money_type:(null===(a=this.params)||void 0===a?void 0:a.currency)||"",language:(null===(u=this.params)||void 0===u?void 0:u.language)||"",environment:(null===(c=this.params)||void 0===c?void 0:c.env)||""},f),d),{},{id:Re()});D.session_id||(D.session_id=function(){if("undefined"==typeof window)return"";var e="monitor_session_id",t="";try{(t=Ge(e))?(He&&clearTimeout(He),He=Y()(function(){Me({key:e,value:t,expire:36e5})},1e4)):(t=Re(),Me({key:e,value:t,expire:36e5}))}catch(n){}return t}()),!D.app_name&&this.is_client_env,D.params&&(D.params=Ke(D.params)),D.tags&&(D.tags=Ke(D.tags||{},!0));try{var x;o()(x=["string","number","undefined"]).call(x,Le(D.message))||(D.message=X()(D.message))}catch(I){D.message=""}null!==(l=this.params)&&void 0!==l&&l.prefix&&(D.tag=null!==(_=D.tag)&&void 0!==_&&se()(_).call(_,null===(w=this.params)||void 0===w?void 0:w.prefix)?D.tag:Z()(g="".concat(null===(b=this.params)||void 0===b?void 0:b.prefix)).call(g,D.tag),D.metric_name&&(D.metric_name=null!==(S=D.metric_name)&&void 0!==S&&se()(S).call(S,null===(L=this.params)||void 0===L?void 0:L.prefix)?D.metric_name:Z()(k="".concat(null===(E=this.params)||void 0===E?void 0:E.prefix)).call(k,D.metric_name)));return D}},{key:"fetch",value:function(e,t){var n,r=this,i=e.data,a=e.type,o=(null===(n=this.options)||void 0===n?void 0:n.http)||{},u=o.generator,c=ge(o,he),l=rt(i);if(l.length&&(this.http_fetch||(this.http_fetch=Fe(u)),this.host,"function"==typeof this.http_fetch)){var s=t||c||{},d=s.url,f=s.headers,v=ge(s,pe);try{var h,p,m=d||Z()(h="".concat(this.is_client_env?Z()(p="".concat(location.protocol,"//")).call(p,String(this.host).replace(/http(s?):\/\//,"")):this.host)).call(h,"log"==a?"/app-track/log-info":"/app-track/metric-info");Pe(function(){var e,t;null===(e=r.http_fetch)||void 0===e||e.call(r,Te(Te({method:"POST",headers:Te(Te({},f),{},{"DS-ACCESS-TOKEN":"4bc3a2dd3549401b817438eede7e78da","DS-ACCESS-SITE":(null===(t=r.params)||void 0===t?void 0:t.brand)||"shein","Content-Type":"application/json"})},v),{},{url:m,data:{data:l}}))})}catch(y){}}}},{key:"initOfflineLog",value:function(){var e,t=this;this.SIOffline=new nt({set:function(e){var n,r;t.createDB(),null===(n=t.db_control)||void 0===n||null===(r=n.recordCache)||void 0===r||r.call(n,"offLine",e)},get:(e=Se(be().mark(function e(n,r){var i;return be().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.createDB(),e.abrupt("return",(null===(i=t.db_control)||void 0===i?void 0:i.getOfflineData(n,r))||[]);case 2:case"end":return e.stop()}},e)})),function(t,n){return e.apply(this,arguments)}),delete:function(e){t.createDB(),Pe(function(){L()(e).call(e,function(e){var n;null===(n=t.db_control)||void 0===n||n.deleteRecord("offLine",{primaryKey:e.id})})})}},{sls:function(e){var n,r;null===(r=t.SILogger)||void 0===r||r.logInfo({message:"offline log",tag:Z()(n="offlineTask-".concat(e.lower,"-")).call(n,e.upper),params:e.data})}})}},{key:"initRTLogger",value:function(){var e=this;this.SILogger=new et(function(t,n){var r,i,a,o=n||{},u=o.immediate,c=o.remove_duplicate_during_daily,l=ge(o,me),s=e.assignBaseField(t);s.app_name&&(s.tags&&delete s.tags,ze(s,{remove_duplicate_during_daily:c})||(l.offline&&(null===(r=e.SIOffline)||void 0===r||r.log("define",qe(t))),e.is_client_env&&!u?(e.createDB(),null===(i=e.db_control)||void 0===i||null===(a=i.recordCache)||void 0===a||a.call(i,"log",s)):e.fetch({data:[s],type:"log"},l)))})}},{key:"initMetric",value:function(){var e=this;this.SIMetric=new tt(function(t,n){var r,i,a=n||{},o=a.immediate,u=a.remove_duplicate_during_daily,c=ge(a,ye),l=e.assignBaseField(t);l.app_name&&(ze(l,{remove_duplicate_during_daily:u})||(c.offline&&(null===(r=e.SIOffline)||void 0===r||r.log("define",qe(t))),e.is_client_env&&!o?(e.createDB(),null===(i=e.db_control)||void 0===i||i.recordCache("metric",l)):e.fetch({data:[l],type:"metric"},c)))})}},{key:"createDB",value:function(){var e,t=this;if(!this.is_client_env||this.db_control)return null;var n=null===(e=this.options)||void 0===e?void 0:e.cache;this.db_control=new Qe(function(e,n){switch(n){case"metric":t.fetch({data:tt.optimizeMetricList(e),type:"metric"});break;case"log":t.fetch({data:e,type:"log"})}},n),this.db_control.checkRetry("metric"),this.db_control.checkRetry("log")}}])}()),ut=(ot.SIMetric,ot.SILogger,ot.SIOffline,new Proxy(new(function(){return xe(function e(){Ee(this,e),Ne(this,"customPlugins",[]),Ne(this,"SILog",ot),Ne(this,"pluginInstances",{})},[{key:"use",value:function(e){var t=this;m()(e)&&L()(e).call(e,function(e){if(m()(e)){var n=_e(e,2),r=n[0],i=n[1];r.name&&t.customPlugins.push(Te(Te({},r),{},{options:i}))}else e.name&&t.customPlugins.push(e)})}},{key:"init",value:function(e){this.SILog.init(e)}},{key:"run",value:function(e){var t,n={};for(this.customPlugins=P()(t=this.customPlugins).call(t,function(e){var t,r;return!o()(t=["monitor-http-plugin","monitor-cache-plugin"]).call(t,e.name)||(n[at[e.name]]=Te(Te({},null===(r=e.config)||void 0===r?void 0:r.call(e)),{},{generator:e.generator}),!1)}),R()(n).length>0&&this.SILog.config(n);this.customPlugins.length;){var r=this.customPlugins.shift();try{var i,a,u={SILog:ot,SILogger:this.SILog.SILogger,SIMetric:this.SILog.SIMetric,SIOffline:this.SILog.SIOffline},c=Te(Te({},r.options),e),l=null===(i=r.generator)||void 0===i?void 0:i.call(r,u,c);if(l){var s="".concat(it(r.name),"Instance");this.pluginInstances[s],this.pluginInstances[s]=l}null===(a=r.run)||void 0===a||a.call(r,Te(Te({},u),{},{self:{name:r.name,instance:l}}),c)}catch(d){continue}}}}])}()),{get:function(e,t){return fe()(t).call(t,"Instance")?e.pluginInstances[t]:e[t]}}))},ffKx:(e,t,n)=>{n.d(t,{J:()=>b,_:()=>k});var r=n("2jEV"),i=n("aZWp"),a=n("6ARB"),o=n("4ZC2"),u=n("ZJZb"),c=n("wG1B"),l=n.n(c),s=n("dWHw"),d=n.n(s),f=n("u0uu"),v=n.n(f),h=n("5k+Q"),p=n.n(h),m=n("1SGe"),y=n.n(m),g=n("twzR"),_=["$schttp","$schttpSync","$schttpInOne"];function w(e,t){var n=e;return t&&(n=function(){var n=(0,u.A)((0,a.A)().m(function n(r){return(0,a.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,(r.data=t.O_data?(0,o.A)({},t.O_data):(0,o.A)((0,o.A)({},r.data),t.M_data),r.headers=t.O_headers?(0,o.A)({},t.O_headers):(0,o.A)((0,o.A)({},r.headers),t.M_headers),r.params=t.O_params?(0,o.A)({},t.O_params):(0,o.A)((0,o.A)({},r.params),t.M_params),r.baseURL=t.baseURL||r.baseURL,r.method=t.method||r.method,e(r)))},n)}));return function(e){return n.apply(this,arguments)}}()),n}function b(e,t,n){var r,a=t.type,u=void 0===a?"standard":a,c=t.modified,s=t.overrides,f=n.$schttp,h=n.$schttpSync,p=(n.$schttpInOne,(0,i.A)(n,_));if(!e[u])throw new Error("type error");var m=(0,o.A)((0,o.A)({},e[u]),s);return l()(r=d()(m)).call(r,function(e,t){var n,r=null==c?void 0:c[t],i=w(f,r),a=w(h,r),u=(0,g.cV)(i,a);return e[t]=v()(n=m[t]).call(n,(0,o.A)({$schttp:i,$schttpSync:a,$schttpInOne:u},p)),e},{})}function k(e){return{fsApis:e,fsRunner:function(){var t=arguments;return(0,u.A)((0,a.A)().m(function n(){var i,o,u,c;return(0,a.A)().w(function(n){for(;;)switch(n.n){case 0:return u=t.length>0&&void 0!==t[0]?t[0]:{},n.n=1,p().all(y()(i=d()(e)).call(i,function(t){return u[t]?e[t].apply(e,(0,r.A)(u[t])):e[t]()}));case 1:return c=n.v,n.a(2,l()(o=d()(e)).call(o,function(e,t,n){return e[t]=c[n],e},{}))}},n)}))()}}}},kjue:(e,t,n)=>{n.d(t,{c:()=>oe});var r=n("xsP2"),i=n.n(r),a=n("xsts"),o=n.n(a),u=n("AJcz"),c=n.n(u),l=n("l1ci"),s=n.n(l),d=n("qItV"),f=n.n(d),v=n("dWHw"),h=n.n(v),p=n("N1wU"),m=n.n(p),y=n("YwGl"),g=n.n(y),_=n("HJGT"),w=n.n(_),b=n("6KbA"),k=n.n(b),S=n("N2Gg"),L=n.n(S),E=n("bGFt"),D=n.n(E),x=n("U8cm"),I=n.n(x),T=n("5k+Q"),N=n.n(T),B=n("CtJl"),O=n.n(B),A=n("u0uu"),R=n.n(A),C=n("BJYW"),P=n.n(C),j=n("efps"),M=n.n(j),G=n("1SGe"),H=n.n(G),U=(n("whyG"),["generator"]),q=["headers"];function K(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(o()(t).call(t,r))continue;n[r]=e[r]}return n}(e,t);if(i()){var u=i()(e);for(r=0;r<u.length;r++)n=u[r],o()(t).call(t,n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function F(e){return(F="function"==typeof c()&&"symbol"==typeof s()?function(e){return typeof e}:function(e){return e&&"function"==typeof c()&&e.constructor===c()&&e!==c().prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f()(e,$(r.key),r)}}function J(e,t){var n=h()(e);if(i()){var r=i()(e);t&&(r=m()(r).call(r,function(t){return g()(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n,r,i=null!=arguments[t]?arguments[t]:{};t%2?w()(n=J(Object(i),!0)).call(n,function(t){Y(e,t,i[t])}):k()?L()(e,k()(i)):w()(r=J(Object(i))).call(r,function(t){f()(e,t,g()(i,t))})}return e}function Y(e,t,n){return(t=$(t))in e?f()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[D()];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}var X,V=z(z({},{app_name:"",timestamp:"",local_time:"",session_id:"",member_id:"",sdk_version:"",network_type:"",device_id:"",device_level:"",device_type:"",device_model:"",device_brand:"",browser_name:"",browser_versions:"",os_versions:"",os_name:"",language:"",sub_site:"",money_type:"",user_agent:"",referer:""}),{},{level:"INFO",tag:"",message:"",params:{}}),Z="1.1.40",Q=function(e){if(!e)return"";try{return JSON.parse(e)}catch(t){return{}}},ee=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"http",value:function(e){e.data||(e.data=e.params||{}),this.fetch(e)}},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){if("function"==typeof fetch){if(e.url){var t=e.method||"GET";e.method||(t=e.data?"POST":"GET");var n=e.headers||{};try{"function"==typeof e.beforeRequest&&e.beforeRequest({url:e.url,method:t,headers:n,data:e.data})}catch(i){}var r={method:t,headers:n};"POST"===t&&(r.body=I()(e.data)),"GET"===t&&(e.url=e.url+"?"+this.formatParams(e.data)),fetch(e.url,r).then(function(e){return e.status>=200&&e.status<300||304==e.status?e.text():N().reject(e)}).then(function(t){var n;null===(n=e.success)||void 0===n||n.call(e,Q(t))}).catch(function(t){var n;null===(n=e.error)||void 0===n||n.call(e,t)})}}else this.ajax(e)})},{key:"ajax",value:function(t){if(t.url){var n=this.xhr();if(!n)return!1;var r=t.method||"GET";t.method||(r=t.data?"POST":"GET"),"GET"===r&&(t.url=t.url+"?"+this.formatParams(t.data)),n.open(r,t.url,!0),(t.success||t.error)&&(n.onreadystatechange=function(){try{var r,i;if(4==n.readyState)n.status>=200&&n.status<300||304==n.status?null===(r=t.success)||void 0===r||r.call(t,Q(n.responseText)):null===(i=t.error)||void 0===i||i.call(t,Q(n.responseText)),n.onreadystatechange=null,n.onload=null}catch(e){n.onreadystatechange=null,n.onload=null}});var i=t.headers;try{"function"==typeof t.beforeRequest&&t.beforeRequest({url:t.url,method:r,headers:i,data:t.data})}catch(u){}for(var a in i){var o=i[a];o&&n.setRequestHeader(a,o)}n.send(I()(t.data))}}},{key:"xhr",value:function(){return"undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:null}},{key:"formatParams",value:function(e){var t=[];for(var n in e||{}){var r,i=e[n];void 0!==i&&t.push(O()(r="".concat(n,"=")).call(r,encodeURIComponent(i)))}return t.join("&")}}],t&&W(e.prototype,t),n&&W(e,n),f()(e,"prototype",{writable:!1}),e;var e,t,n}(),te=function(){var e,t,n,r,i,a,o=(e=navigator.userAgent.toLowerCase(),/mobile|ip(hone|od)|midp|rv:1.2.3.4|ucweb|android|blackberry|iemobile|windows ce|windows mobile/.test(e)?"Phone":/ipad|tablet/.test(e)?"Tablet":"Desktop");return z(z({},V),{},{sdk_version:Z,user_agent:navigator.userAgent,network_type:(i="",a=(null===(t=navigator)||void 0===t?void 0:t.connection)||(null===(n=navigator)||void 0===n?void 0:n.mozConnection)||(null===(r=navigator)||void 0===r?void 0:r.webkitConnection),a&&void 0!==(null==a?void 0:a.effectiveType)&&(i=null==a?void 0:a.effectiveType),i),referer:encodeURIComponent(document.referrer)||"",device_level:"Phone"==o?"0":"Desktop"==o?"1":"Tablet"==o?"2":"3"})},ne=function(e,t){var n;if("object"!==F(e))return e;try{for(var r in e=JSON.parse(I()(e)))if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];switch(F(i)){case"object":e[r]=P()(n=I()(i)).call(n,0,500);break;case"number":t||(e[r]=String(i))}}return e}catch(a){return e}},re=function(e){var t,r,i="undefined"!=typeof window;return"function"==typeof e?e():i?(r=new ee,R()(t=r.http).call(t,r)):function(e){try{n("bkPu").request(e)}catch(t){}}},ie=function(e,t){var n="";switch(e){case"eur":n={production:"https://www.srmdata-eur.com",gray:"https://www.srmdata-eur.com",localhost:"https://srmdata-eur.abc-test.sheincorp.cn",debug:"https://srmdata-eur.abc-test.sheincorp.cn"}[t];break;case"us":n={production:"https://www.srmdata-us.com",gray:"https://www.srmdata-us.com",localhost:"https://srmdata-us.abc-test.sheincorp.cn",debug:"https://srmdata-us.abc-test.sheincorp.cn"}[t];break;default:n={production:"https://www.srmdata.com",gray:"https://www.srmdata.com",localhost:"https://srmdata.abc-test.sheincorp.cn",debug:"https://srmdata.abc-test.sheincorp.cn"}[t]}return n},ae=function(e,t){var n=e.timestamp||(new Date).getTime(),r={timestamp:String(n),local_time:new Date(n).toLocaleString()},i=JSON.parse(I()(t));for(var a in e){var o=e[a];"object"===F(o)&&"object"===F(i[a])?i[a]=z(z({},i[a]),o):i[a]=o}return i.params&&(i.params=ne(i.params)),i.tags&&(i.tags=ne(i.tags||{},!0)),z(z({},i),r)},oe=(X=function(){return"undefined"!=typeof window?te():z(z({},V),{},{sdk_version:Z})},function(e,t){var n;if(!e.app_name)throw new Error("app_name is required");var r="undefined"!=typeof window,i=z(z({},"function"==typeof X?X():{}),e),a=ie((null==t?void 0:t.server_type)||"central",e.environment||"debug")||ie("central","debug"),o=function(e){var n=(null==t?void 0:t["monitor-http-plugin"])||{},r=n.generator,a=K(n,U),o=re(r),u=a||{},c=u.headers,l=K(u,q);null==o||o(z(z({method:"POST",headers:z(z({},c),{},{"DS-ACCESS-TOKEN":"4bc3a2dd3549401b817438eede7e78da","DS-ACCESS-SITE":i.app_name||"shein","Content-Type":"application/json"})},e),l))},u="".concat(r?O()(n="".concat(location.protocol,"//")).call(n,String(a).replace(/http(s?):\/\//,"")):a);return{log:function(e){var t="INFO",n=M()(e)?H()(e).call(e,function(e){return ae(z({level:t},e),i)}):[ae(z({level:t},e),i)];null==o||o({url:"".concat(u,"/app-track/log-info"),data:{data:n}})},metric:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t.random&&Math.random()>t.random)){var n=M()(e)?H()(e).call(e,function(e){return ae(z({value:1},e),i)}):[ae(z({value:1},e),i)];null==o||o({url:"".concat(u,"/app-track/metric-info"),data:{data:n}})}}}})},lnu0:(e,t,n)=>{n.d(t,{GO:()=>m,MC:()=>p,g0:()=>f,ol:()=>h});var r,i=n("0rzS"),a=n("4ZC2"),o=n("7IdM"),u=n("NO/P"),c=n.n(u),l=n("2QGG"),s=n("1gEK"),d=n("NFS3");function f(){return"undefined"==typeof window?1e5:window.__SUI__INDEX__+=1}"undefined"!=typeof window&&(window.__SUI__INDEX__||(window.__SUI__INDEX__=99999));var v=0;function h(e){var t=(0,l.KR)(e.visible),n=(0,l.KR)(f()),i=function(e,t){var n=(0,l.KR)(!1);return(0,s.wB)(function(){return e.visible},function(e){e&&(n.value=!0)},{immediate:!0}),(0,s.EW)(function(){return!!e.immediatelyRender||n.value&&(e.visible||t.value||!e.destroyOnClose)})}(e,t),a=(0,s.EW)(function(){return e.lockScroll&&e.modal});return function(e,t){var n=(0,d.K$)(function(){return"undefined"!=typeof window?document.body:null},e.value&&t.value),i=(0,o.A)(n,2),a=i[0],u=i[1];(0,s.wB)([e,t],function(e){var t=(0,o.A)(e,2),n=t[0],r=t[1];a.value=n&&r||!1},{flush:"sync"}),(0,s.wB)(u,function(e){t.value&&(e?(v=window.innerWidth-document.documentElement.clientWidth)&&(r=c()(window.getComputedStyle(document.body).paddingRight,10),document.body.style.paddingRight="".concat(r+v,"px")):v&&(document.body.style.paddingRight=r?"".concat(r,"px"):""))},{flush:"sync"})}(t,a),(0,s.wB)(function(){return e.visible},function(e){e&&(t.value=e,n.value=f())}),{realVisible:t,zIndex:n,shouldMount:i}}function p(e){var t=!1;function n(){var n,r;if(e.visible)return null==(n=e.onClose)||n.call(e),void(t=!0);t||null==(r=e.onClose)||r.call(e),t=!1}function r(){"function"==typeof e.beforeClose?e.beforeClose(n):n()}return(0,s.wB)(function(){return e.visible},function(t){var n;return t&&(null==(n=e.onOpen)?void 0:n.call(e))},{immediate:!0}),(0,s.wB)(function(){return e.visible},function(e){e||r()}),function(){var t;null==(t=e["onUpdate:visible"])||t.call(e,!1),r()}}function m(){var e,t=(0,s.OA)(),n=null==(e=(0,s.nI)())?void 0:e.vnode.scopeId;return(0,s.EW)(function(){return(0,a.A)((0,a.A)({},t),n&&(0,i.A)({},n,""))})}},sJdO:(e,t,n)=>{n.d(t,{Lj:()=>a,qH:()=>u});var r=n("1gEK"),i=(Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,"SUI_FORM"),a=function(){return(0,r.WQ)(i,void 0)},o="SUI_FORM_ITEM",u=function(){return(0,r.WQ)(o,void 0)}}}]);
//# sourceMappingURL=https://shein-static.dev-az.sheincorp.cn/sheinh5/ark/ark/client/js/871.dd18c02.js.map