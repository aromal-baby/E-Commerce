var _excluded8=["activity_name","activity_param"];function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectWithoutProperties2(e,t){if(null==e)return{};var n,i,r=_objectWithoutPropertiesLoose2(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _objectWithoutPropertiesLoose2(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty2(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _classCallCheck2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey2(i.key),i)}}function _createClass2(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty2(e,t,n){return(t=_toPropertyKey2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey2(e){var t=_toPrimitive2(e,"string");return"symbol"==_typeof2(t)?t:t+""}function _toPrimitive2(e,t){if("object"!=_typeof2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=_typeof2(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e,t,n,i=function(e){return e.replace(/\\u([\dA-Fa-f]{4})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))}))},r="\\u0063\\u006F\\u006F\\u006B\\u0069\\u0065\\u005F\\u0069\\u0064",o={C_ID_STR_CAMEEL:i("\\u0063\\u006F\\u006F\\u006B\\u0069\\u0064\\u0049\\u0064"),C_ID_STR:i(r)},a=function(e){try{var t=localStorage.getItem(e);if(!t)return null;var n=JSON.parse(t),i=n.value,r=n.expire;return void 0!==r&&(new Date).getTime()>r?(localStorage.removeItem(e),null):i}catch(o){return console.error("getLocalStorage error: "+(null==o?void 0:o.message)),null}},s=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},u=function(e,t){var n;switch(t){case"error":n=console.error;break;case"warn":n=console.warn;break;default:n=console.info}"undefined"!=typeof window&&n(e)},c=function(){var e=navigator.userAgent.toLowerCase();return/(iphone os|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile)/i.test(e)?"Phone":/ipad/i.test(e)?"Tablet":"Desktop"},l=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},d=Object.assign({is_report_general_point:!0,heart_interval:60,silent_times:30},(null===(e=window.SA_GLOBAL_CONFIG)||void 0===e?void 0:e.heartbeat)||null),f=function(){return _createClass2((function e(t){var n=this;_classCallCheck2(this,e),_defineProperty2(this,"inactivityCounter",0),_defineProperty2(this,"heartbeatTimer",0),_defineProperty2(this,"dispatch",void 0),_defineProperty2(this,"heartNo",0),d.is_report_general_point&&(+d.heart_interval<10&&(d.heart_interval=10),this.dispatch=function(){var e=function(){t("heart_active",{heart_interval:n.heartNo>0?d.heart_interval:0,heart_no:++n.heartNo}),sessionStorage.setItem("sa_analytics",JSON.stringify({heart_no:n.heartNo}))};"function"==typeof requestIdleCallback?requestIdleCallback(e):e()},this.startCounter())}),[{key:"startCounter",value:function(){var e=this;this.startHeartbeat();var t=function(){document.hidden?e.endHeartbeat():e.startHeartbeat()};document.hidden?document.addEventListener("visibilitychange",t):"mozHidden"in document?document.addEventListener("mozvisibilitychange",t):"webkitHidden"in document?document.addEventListener("webkitvisibilitychange",t):"msHidden"in document?document.addEventListener("msvisibilitychange",t):"onfocusin"in document?(l(window,"focusin",(function(){e.startHeartbeat()})),l(window,"focusout",(function(){e.startHeartbeat()}))):(l(window,"focus",(function(){e.startHeartbeat()})),l(window,"blur",(function(){e.endHeartbeat()})),l(window,"pageshow",(function(){e.startHeartbeat()})),l(window,"pagehide",(function(){e.endHeartbeat()})));var n=function(){e.inactivityCounter>=d.silent_times&&e.startHeartbeat(),e.inactivityCounter=0};l(window,"mousemove",n),l(window,"click",n),l(window,"keydown",n),l(window,"scroll",n),l(window,"beforeunload",(function(){e.endHeartbeat()})),l(window,"unload",(function(){e.endHeartbeat()})),setInterval((function(){e.inactivityCounter++,0!==e.heartbeatTimer&&e.inactivityCounter>=d.silent_times&&e.endHeartbeat()}),1e3*d.heart_interval)}},{key:"startHeartbeat",value:function(){this.initHeartbeatTimer()}},{key:"endHeartbeat",value:function(){window.clearInterval(this.heartbeatTimer),this.heartbeatTimer=0}},{key:"initHeartbeatTimer",value:function(){if(this.heartbeatTimer)return!1;this.heartbeatTimer=window.setInterval(this.dispatch,1e3*d.heart_interval),this.dispatch()}}])}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,v(i.key),i)}}function v(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}function g(e){try{if(function(e){if(!/^[A-Za-z0-9+/]+={0,2}$/.test(e))return!1;try{var t=m(e);return/^(.*)\|\d{10,13}\|(.*)$/.test(t)}catch(n){return!1}}(e))return e;if(!/^[0-9a-fA-F]{8}_[0-9a-fA-F]{4}_[0-9a-fA-F]{4}_[0-9a-fA-F]{4}_[0-9a-fA-F]{12}$/i.test(e))return e;var t=Date.now(),n="|".concat(t,"|"),i=e.split(""),r=Math.floor(Math.random()*(e.length+1));i.splice(r,0,n);var o=i.join("");return w(o)}catch(a){return e}}_defineProperty2(f,"type","CLASS"),_defineProperty2(f,"name","heartbeat");var m=function(e){return"undefined"!=typeof window&&"function"==typeof window.atob?window.atob(e):"undefined"!=typeof global?Buffer.from(e,"base64").toString("binary"):e},w=function(e){return"undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa(e):"undefined"!=typeof global?Buffer.from(e,"binary").toString("base64"):e},b=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"get",value:function(){var e,t;return"undefined"!=typeof window&&((null===(e=window)||void 0===e||null===(e=e.GLOBAL_SN_OEST)||void 0===e?void 0:e.getValue())||(t=m("Y29va2llSWQ="),decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null))||""}},{key:"getEnptValue",value:function(){return"undefined"!=typeof window?g(this.get()):""}}],(t=null)&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),y="1.1.15",_=function(){return _createClass2((function e(t,n){_classCallCheck2(this,e),_defineProperty2(this,"config",void 0),_defineProperty2(this,"_SDK_",void 0),_defineProperty2(this,"sessionId",{key:"bi_session_id",duration:18e5,refreshTime:2e3,timer:0,value:""}),this._SDK_=t,this.config=n}),[{key:"getOSType",value:function(e){var t,n=c(),i={h5:function(){return"Phone"==n||"Tablet"==n?0:"Desktop"==n?1:2},pc:function(){return"Phone"==n||"Tablet"==n?0:"Desktop"==n?1:2},pwa:function(){var e,t=s("from"),n=!1;try{e=sessionStorage.getItem("pwa-fullscreen")}catch(i){}return("fullscreen"==t||e)&&(n=!0),n?4:3}};return(null===(t=i[e])||void 0===t?void 0:t.call(i))||""}},{key:"getSaDeviceClass",value:function(){var e=c();return"Phone"==e?0:"Desktop"==e?1:"Tablet"==e?2:3}},{key:"setSessionId",value:function(e){!function(e){var t=e.key,n=e.value,i=e.expire;try{var r={value:n,expire:void 0!==i?(new Date).getTime()+i:void 0};localStorage.setItem(t,JSON.stringify(r))}catch(o){console.error("set localStorage error: "+(null==o?void 0:o.message))}}({key:this.sessionId.key,value:e,expire:this.sessionId.duration})}},{key:"getSessionId",value:function(){var e=this,t="";try{(t=a(this.sessionId.key))?(this.sessionId.timer&&clearTimeout(this.sessionId.timer),this.sessionId.timer=setTimeout((function(){e.setSessionId(t)}),this.sessionId.refreshTime)):(t=this.sessionId.value||"bi_"+(new Date).getTime()+"_"+Math.floor(1e5*Math.random()),this.setSessionId(t))}catch(n){}return this.sessionId.value||(this.sessionId.value=t),this.sessionId.value}},{key:"initAction",value:function(e,t){var n,i,r,u,c,l=this,d=t.sendAction,h=e.environment,p=e.host,v=void 0===p?"srmdata.abc-test.sheincorp.cn":p,g=e.homeSite,m=e.deviceType,w=e.SiteUID,_=e.appLanguage,k=e.registerFields,P=void 0===k?{}:k,x=e.config,S=void 0===x?{}:x,T=["pc","pwa"].includes(m)?m:"h5",C=T;if(!v)return console.error("[@shein-aidc/basis-sa]","host缺失，请进行初始化并配置埋点上报地址"),{applyFor:C};var I,O,j,R=[];(null!==(n=this.config)&&void 0!==n&&n.multichannel||"h5"===T||R.push((I=function(e,t){d({activity_name:e,activity_param:t})},{name:"heart-beat",immediate:!0,handle:function(){new f(I)}})),this._SDK_.init({url:{fetch:"".concat(location.protocol,"//").concat(v,"/msg"),ajax:"".concat(location.protocol,"//").concat(v,"/msg"),image:"".concat(location.protocol,"//").concat(v,"/topic"),beacon:"".concat(location.protocol,"//").concat(v,"/beacon")},sm_device_id:window.__SmDeviceId||(null===(i=window)||void 0===i||null===(i=i.sessionStorage)||void 0===i?void 0:i.getItem("SmDeviceId"))||"",brand:g,hooks:null===(r=this.config)||void 0===r?void 0:r.hooks,log:"production"!=h||!(null===(u=window)||void 0===u||null===(u=u.sessionStorage)||void 0===u||!u.getItem("sa-debug")),plugins:R,config:_objectSpread2(_objectSpread2({},S),"h5"==C?{offlineCookie:!1}:{})}),this._SDK_.register(_objectSpread2(_defineProperty2(_defineProperty2(_defineProperty2(_defineProperty2({environment:h,sub_site:w,language:_,device_type:m,sdk_version:y,os_type:this.getOSType(C),device_class:this.getSaDeviceClass()+"".concat("h5"==C?"_h5":"")},o.C_ID_STR,"h5"==C?"":function(){return b.get()||""}),"session_id",(function(){return l.getSessionId()})),"channel",(function(){return s("url_from")||""})),"origin_otherid",(function(){return a("originOtherId")||""})),P)),null!==(c=this.config)&&void 0!==c&&c.multichannel)||(null===(O=this.config)||void 0===O||null===(O=O.on)||void 0===O||null===(j=O.init)||void 0===j||j.call(O,e));return{applyFor:C}}}])}(),k=["params"],P=["able"],x=["send_type","headers"],S=["data"],T=["plugins"],C=["name","params"],I=["name","params"];function O(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function R(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
R=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,n,i){return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!i,writable:!i})}try{u({},"")}catch(T){u=function(e,t,n){return e[t]=n}}function c(t,n,i,r){var o,a,s,c,h=n&&n.prototype instanceof f?n:f,p=Object.create(h.prototype);return u(p,"_invoke",(o=t,a=i,s=new x(r||[]),c=1,function(t,n){if(3===c)throw Error("Generator is already running");if(4===c){if("throw"===t)throw n;return{value:e,done:!0}}for(s.method=t,s.arg=n;;){var i=s.delegate;if(i){var r=_(i,s);if(r){if(r===d)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(1===c)throw c=4,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=3;var u=l(o,a,s);if("normal"===u.type){if(c=s.done?4:2,u.arg===d)continue;return{value:u.arg,done:s.done}}"throw"===u.type&&(c=4,s.method="throw",s.arg=u.arg)}}),!0),p}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}t.wrap=c;var d={};function f(){}function h(){}function p(){}var v={};u(v,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(S([])));m&&m!==n&&i.call(m,o)&&(v=m);var w=p.prototype=f.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function n(r,o,a,s){var u=l(e[r],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==W(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var r;u(this,"_invoke",(function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}),!0)}function _(t,n){var i=n.method,r=t.i[i];if(r===e)return n.delegate=null,"throw"===i&&t.i.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var o=l(r,t.i,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var a=o.arg;return a?a.done?(n[t.r]=a.value,n.next=t.n,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function k(e){this.tryEntries.push(e)}function P(t){var n=t[4]||{};n.type="normal",n.arg=e,t[4]=n}function x(e){this.tryEntries=[[-1]],e.forEach(k,this),this.reset(!0)}function S(t){if(null!=t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(W(t)+" is not iterable")}return h.prototype=p,u(w,"constructor",p),u(p,"constructor",h),h.displayName=u(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},b(y.prototype),u(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new y(c(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(w),u(w,s,"Generator"),u(w,o,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.unshift(i);return function e(){for(;n.length;)if((i=n.pop())in t)return e.value=i,e.done=!1,e;return e.done=!0,e}},t.values=S,x.prototype={constructor:x,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(e){a.type="throw",a.arg=t,n.next=e}for(var r=n.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o[4],s=this.prev,u=o[1],c=o[2];if(-1===o[0])return i("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=s){if(s<u)return this.method="next",this.arg=e,i(u),!0;if(s<c)return i(c),!1}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i[0]>-1&&i[0]<=this.prev&&this.prev<i[2]){var r=i;break}}r&&("break"===e||"continue"===e)&&r[0]<=t&&t<=r[2]&&(r=null);var o=r?r[4]:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r[2],d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[2]===e)return this.complete(n[4],n[3]),P(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[0]===e){var i=n[4];if("throw"===i.type){var r=i.arg;P(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={i:S(t),r:n,n:i},"next"===this.method&&(this.arg=e),d}},t}function E(e,t,n,i,r,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(i,r)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){E(o,i,r,a,s,"next",e)}function s(e){E(o,i,r,a,s,"throw",e)}a(void 0)}))}}function A(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,H(i.key),i)}}function q(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t,n){return(t=H(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=W(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var B=Object.defineProperty,z=function(e,t,n){return function(e,t,n){t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==W(t)?t+"":t,n),n},K="undefined",J="object",G="string",$="function",Q="device",V="os",X="result",Y="model",Z="name",ee="type",te="vendor",ne="version",ie="mobile",re="tablet",oe="Amazon",ae="Apple",se="ASUS",ue="BlackBerry",ce="Google",le="Huawei",de="Microsoft",fe="Motorola",he="Samsung",pe="Sony",ve="Xiaomi",ge="Zebra",me="architecture",we="brands",be="fullVersionList",ye="platform",_e="platformVersion",ke="bitness",Pe="sec-ch-ua",xe="sec-ch-ua-platform",Se="browser",Te="major",Ce="Opera",Ie=[we,be,ie,Y,ye,_e,me,ke],Oe=function(e,t){for(var n in t)if(W(t[n])===J&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(Re(t[n][i],e))return"?"===n?void 0:n}else if(Re(t[n],e))return"?"===n?void 0:n;return e},je=function(e,t){for(var n in t){var i=t[n];W(i)===J&&2==i.length?e[i[0]]=i[1]:e[i]=void 0}return e},Re=function(e,t){if(W(e)===J&&e.length>0){for(var n in e)if(De(e[n])==De(t))return!0;return!1}return W(e)===G&&-1!==De(t).indexOf(De(e))},Ee=function(e){if(e){for(var t=[],n=Ae(/\\?\"/g,e).split(", "),i=0;i<n.length;i++){var r=n[i].split(";v=");t[i]={brand:r[0],version:r[1]}}return t}},De=function(e){return W(e)===G?e.toLowerCase():e},Ae=function(e,t){return t.replace(e,"")},Fe=function(e){return W(e)===G?Ae(/\"/g,e):e},Ne={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Le={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[ne,[Z,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[ne,[Z,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[Z,ne],[/opios[\/ ]+([\w\.]+)/i],[ne,[Z,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[ne,[Z,Ce]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[Z,ne],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[ne,[Z,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[ne,[Z,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[ne,[Z,"WeChat"]],[/konqueror\/([\w\.]+)/i],[ne,[Z,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[ne,[Z,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[ne,[Z,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[Z,/(.+)/,"$1 Secure Browser"],ne],[/\bfocus\/([\w\.]+)/i],[ne,[Z,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[ne,[Z,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[ne,[Z,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[ne,[Z,"Dolphin"]],[/coast\/([\w\.]+)/i],[ne,[Z,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[ne,[Z,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[ne,[Z,"Mobile Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[Z,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[Z,/(.+)/,"$1 Browser"],ne],[/(comodo_dragon)\/([\w\.]+)/i],[[Z,/_/g," "],ne],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[Z,ne],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[Z],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[Z,"Facebook"],ne],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[Z,ne],[/\bgsa\/([\w\.]+) .*safari\//i],[ne,[Z,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[ne,[Z,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[ne,[Z,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[Z,"Chrome WebView"],ne],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[ne,[Z,"Android Browser"]],[/chrome\/([\w\.]+) mobile/i],[ne,[Z,"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[Z,ne],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[ne,[Z,"Mobile Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[Z,"Mobile Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[ne,Z],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[Z,[ne,Oe,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[Z,ne],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[Z,"Mobile Firefox"],ne],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[Z,"Netscape"],ne],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[ne,[Z,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[Z,ne],[/(cobalt)\/([\w\.]+)/i],[Z,[ne,/[^\d\.]+./,""]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[Y,[te,he],[ee,re]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[Y,[te,he],[ee,ie]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[Y,[te,ae],[ee,ie]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[Y,[te,ae],[ee,re]],[/(macintosh);/i],[Y,[te,ae]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[Y,[te,"Sharp"],[ee,ie]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[Y,[te,le],[ee,re]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[Y,[te,le],[ee,ie]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[Y,/_/g," "],[te,ve],[ee,ie]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[Y,/_/g," "],[te,ve],[ee,re]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[Y,[te,"OPPO"],[ee,ie]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[Y,[te,"Vivo"],[ee,ie]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[Y,[te,"Realme"],[ee,ie]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[Y,[te,fe],[ee,ie]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[Y,[te,fe],[ee,re]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[Y,[te,"LG"],[ee,re]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[Y,[te,"LG"],[ee,ie]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[Y,[te,"Lenovo"],[ee,re]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[Y,/_/g," "],[te,"Nokia"],[ee,ie]],[/(pixel c)\b/i],[Y,[te,ce],[ee,re]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[Y,[te,ce],[ee,ie]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[Y,[te,pe],[ee,ie]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[Y,"Xperia Tablet"],[te,pe],[ee,re]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[Y,[te,"OnePlus"],[ee,ie]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[Y,[te,oe],[ee,re]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[Y,/(.+)/g,"Fire Phone $1"],[te,oe],[ee,ie]],[/(playbook);[-\w\),; ]+(rim)/i],[Y,te,[ee,re]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[Y,[te,ue],[ee,ie]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[Y,[te,se],[ee,re]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[Y,[te,se],[ee,ie]],[/(nexus 9)/i],[Y,[te,"HTC"],[ee,re]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[te,[Y,/_/g," "],[ee,ie]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[Y,[te,"Acer"],[ee,re]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[Y,[te,"Meizu"],[ee,ie]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[te,Y,[ee,ie]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[te,Y,[ee,re]],[/(surface duo)/i],[Y,[te,de],[ee,re]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[Y,[te,"Fairphone"],[ee,ie]],[/(shield[\w ]+) b/i],[Y,[te,"Nvidia"],[ee,re]],[/(sprint) (\w+)/i],[te,Y,[ee,ie]],[/(kin\.[onetw]{3})/i],[[Y,/\./g," "],[te,de],[ee,ie]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[Y,[te,ge],[ee,re]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[Y,[te,ge],[ee,ie]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[Y,[ee,ie]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[Y,[ee,re]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[ee,re]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[ee,ie]],[/(android[-\w\. ]{0,9});.+buil/i],[Y,[te,"Generic"]]],os:[[/microsoft (windows) (vista|xp)/i],[Z,ne],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[Z,[ne,Oe,Ne]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[Z,"Windows"],[ne,Oe,Ne]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[ne,/_/g,"."],[Z,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[Z,"Mac OS"],[ne,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[ne,Z],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[Z,ne],[/\(bb(10);/i],[ne,[Z,ue]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[ne,[Z,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[ne,[Z,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[ne,[Z,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[ne,[Z,"watchOS"]],[/crkey\/([\d\.]+)/i],[ne,[Z,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[Z,"Chrome OS"],ne],[/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[Z,ne],[/(sunos) ?([\w\.\d]*)/i],[[Z,"Solaris"],ne],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[Z,ne]]},qe="undefined"==typeof window?void 0:window.navigator,Me=(null==qe?void 0:qe.userAgentData)||void 0,Ue={init:U(U(U({},"".concat(Se),[Z,ne,Te]),"".concat(Q),[ee,Y,te]),"".concat(V),[Z,ne]),isIgnore:U(U({},"".concat(Se),[ne,Te]),"".concat(V),[ne]),isIgnoreRgx:U(U({},"".concat(Se),/ ?browser$/i),"".concat(V),/ ?os$/i),toString:U(U(U({},"".concat(Se),[Z,ne]),"".concat(Q),[te,Y]),"".concat(V),[Z,ne])},He=q((function e(t,n){if(M(this,e),t=t||{},je(this,Ie),n)je(this,[[we,Ee(t[Pe])],[be,Ee(t["sec-ch-ua-full-version-list"])],[ie,/\?1/.test(t["sec-ch-ua-mobile"])],[Y,Fe(t["sec-ch-ua-model"])],[ye,Fe(t[xe])],[_e,Fe(t["sec-ch-ua-platform-version"])],[me,Fe(t["sec-ch-ua-arch"])],[ke,Fe(t["sec-ch-ua-bitness"])]]);else for(var i in t)this.hasOwnProperty(i)&&W(t[i])!==K&&(this[i]=t[i]);return this})),We=function(){return q((function e(t,n,i,r){if(M(this,e),z(this,"itemType"),z(this,"ua"),z(this,"rgxMap"),z(this,"uaCH"),z(this,"data"),this.itemType=t,this.ua=n,this.rgxMap=i,this.uaCH=r,this.data=function(e){var t=Ue.init[e];return new(q((function e(){M(this,e),je(this,t)})))}(t),this.itemType==X){var o=function(t){return new e(t,n,i[t],r).parseUA().get()};this.set("ua",n).set(Se,o(Se)).set(Q,o(Q)).set(V,o(V)).get()}return this}),[{key:"detectFeature",value:function(){var e,t=qe&&qe.userAgent==this.ua;switch(this.itemType){case Se:t&&(null==qe?void 0:qe.brave)&&W(qe.brave.isBrave)==$&&this.set(Z,"Brave"),this.set(Te,W(e=this.get(ne))===G?Ae(/[^\d\.]/g,e).split(".")[0]:void 0);break;case Q:t&&!this.get(ee)&&Me&&Me.mobile&&this.set(ee,ie),t&&"Macintosh"==this.get(Y)&&qe&&W(qe.standalone)!==K&&qe.maxTouchPoints&&qe.maxTouchPoints>2&&this.set(Y,"iPad").set(ee,re);break;case V:t&&!this.get(Z)&&Me&&Me.platform&&this.set(Z,Me.platform)}return this}},{key:"get",value:function(e){return e?this.data.hasOwnProperty(e)?this.data[e]:void 0:this.data}},{key:"parseUA",value:function(){return this.itemType!=X&&function(e,t,n){if(t&&n)for(var i,r,o,a,s,u,c=0;c<n.length&&!s;){var l=n[c],d=n[c+1];for(i=r=0;i<l.length&&!s&&l[i];)if(s=l[i++].exec(t))for(o=0;o<d.length;o++)u=s[++r],W(a=d[o])===J&&a.length>0?2===a.length?W(a[1])===$?e[a[0]]=a[1].call(e,u):e[a[0]]=a[1]:3===a.length?W(a[1])!==$||a[1].exec&&a[1].test?e[a[0]]=u?u.replace(a[1],a[2]):void 0:e[a[0]]=u?a[1].call(e,u,a[2]):void 0:4===a.length&&(e[a[0]]=u?a[3].call(e,u.replace(a[1],a[2])):void 0):e[a]=u||void 0;c+=2}}(this.data,this.ua,this.rgxMap),this.detectFeature(),this}},{key:"set",value:function(e,t){return this.data[e]=t,this}}])}(),Be=function(){function e(t){M(this,e),z(this,"userAgent",""),z(this,"httpUach",{}),this.init(t)}return q(e,[{key:"init",value:function(t){return this instanceof e?(this.userAgent=t||(null==qe?void 0:qe.userAgent)||"",this.httpUach=new He({},!0),this.setUA(this.userAgent),this):new e(t).getResult()}},{key:"createUAParserItemFunc",value:function(e){var t=e===X?Le:Le[e];return new We(e,this.userAgent,t,this.httpUach).parseUA().get()}},{key:"getBrowser",value:function(){return this.createUAParserItemFunc(Se)}},{key:"getDevice",value:function(){return this.createUAParserItemFunc(Q)}},{key:"getOS",value:function(){return this.createUAParserItemFunc(V)}},{key:"getUA",value:function(){return this.userAgent}},{key:"setUA",value:function(e){var t,n;return this.userAgent=W(e)===G&&e.length>350?(n=350,W(t=e)===G?(t=Ae(/^\s\s*/,t),W(n)===K?t:t.substring(0,350)):""):e,this}},{key:"getResult",value:function(){return this.createUAParserItemFunc(X)}}])}(),ze={};var Ke={activity_name:"",activity_param:"",device_type:"",home_site:"",sub_site:"",language:"",system_language:"",money_type:"",device_country:"",app_versions:"",network_type:"",ip:"",screen_pixel:"",screen_size:"",device_class:"",device_brand:"",device_name:"",device_model:"",os_type:"",os_name:"",os_versions:"",browser_name:"",browser_versions:"",session_id:"",channel:"",origin_otherid:"",traffic_source:"",market:"",start_time:"",end_time:"",environment:"",device_id:"",device_idfa:"",device_idfv:"",device_aaid:"",referer:""},Je=function(){var e,t,n,i,r,o,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i="".concat(e,"_isForma=").concat(t);if(e&&ze[i]&&n)return ze[i];var r=new Be(e).getResult(),o=r.browser,a=r.device,s=r.os,u=o.name,c=void 0===u?"":u,l=o.version,d=(null==l?void 0:l.replace(/(\d+\.\d+)(\.\d+)*/,"$1"))||"",f="".concat(c,"/").concat(d),h=s.name,p=void 0===h?"":h,v=s.version,g=void 0===v?"":v,m="".concat(p,"/").concat(g),w=t?{os:m,osName:p,osVersion:g,bi:f,browser:c,browserVersion:Number.parseInt(d,10)||0,deviceType:a.type||"",deviceCompany:a.vendor||"",deviceModel:a.model||""}:r;return ze[i]=w,w}(navigator.userAgent),s=a.os,u=a.browser,c=u.name,l=u.version,d=s.name,f=s.version,h=(e=navigator.userAgent.toLowerCase(),/(iphone os|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile)/i.test(e)?"Phone":/ipad/i.test(e)?"Tablet":"Desktop");return N(N({},Ke),{},{os_versions:f,os_name:d,browser_name:c,browser_versions:l,device_class:"Phone"==h?0:"Desktop"==h?1:"Tablet"==h?2:3,network_type:(r="",o=(null===(t=navigator)||void 0===t?void 0:t.connection)||(null===(n=navigator)||void 0===n?void 0:n.mozConnection)||(null===(i=navigator)||void 0===i?void 0:i.webkitConnection),o&&void 0!==(null==o?void 0:o.effectiveType)&&(r=null==o?void 0:o.effectiveType),r),screen_pixel:window.screen.width*(Math.round(window.devicePixelRatio)||1)+"*"+window.screen.height*(Math.round(window.devicePixelRatio)||1),traffic_source:encodeURIComponent(document.referrer)||"",system_language:navigator.language||"",os_type:"Phone"==h?0:"Desktop"==h?1:"Tablet"==h?2:3})},Ge=function(e,t){var n;switch(t){case"error":n=console.error;break;case"warn":n=console.warn;break;default:n=console.info}"function"==typeof n&&n(e)},$e=function(e,t){for(var n=0,i=(t||2)-(e+="").length;n<i;n++)e="0"+e;return e},Qe=function(e,t){var n=new Date||t,i="";switch(e){case"xxxx/x/x x:xx:xx":i=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()+" "+n.getHours()+":"+$e(n.getMinutes())+":"+$e(n.getSeconds());break;case"xxxx/xx/xx xx:xx:xx":i=n.getFullYear()+"/"+$e(n.getMonth()+1)+"/"+$e(n.getDate())+" "+$e(n.getHours())+":"+$e(n.getMinutes())+":"+$e(n.getSeconds());break;case"xxxx-xx-xx xx:xx:xx":i=n.getFullYear()+"-"+$e(n.getMonth()+1)+"-"+$e(n.getDate())+" "+$e(n.getHours())+":"+$e(n.getMinutes())+":"+$e(n.getSeconds())}return i},Ve=function(){return Number(Math.random().toString().substr(3,6)+Date.now())},Xe=function(e){if("object"!=W(e))return e;try{for(var t in e=JSON.parse(JSON.stringify(e)))if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];switch(W(n)){case"function":delete e[t];break;case"object":e[t]=Xe(n);break;case"number":e[t]=String(n)}}return e}catch(i){return e}};function Ye(e){if(!/^[A-Za-z0-9+/]+={0,2}$/.test(e))return!1;try{var t=nt(e);return/^(.*)\|\d{10,13}\|(.*)$/.test(t)}catch(n){return!1}}function Ze(e){try{if(Ye(e))return e;if(!/^[0-9a-fA-F]{8}_[0-9a-fA-F]{4}_[0-9a-fA-F]{4}_[0-9a-fA-F]{4}_[0-9a-fA-F]{12}$/i.test(e))return e;var t=Date.now(),n="|".concat(t,"|"),i=e.split(""),r=Math.floor(Math.random()*(e.length+1));i.splice(r,0,n);var o=i.join("");return it(o)}catch(a){return e}}var et,tt,nt=function(e){return"undefined"!=typeof window&&"function"==typeof window.atob?window.atob(e):"undefined"!=typeof global?Buffer.from(e,"base64").toString("binary"):e},it=function(e){return"undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa(e):"undefined"!=typeof global?Buffer.from(e,"binary").toString("base64"):e},rt=function(e){return e.replace(/\\u([\dA-Fa-f]{4})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))}))},ot="\\u0063\\u006F\\u006F\\u006B\\u0069\\u0065\\u005F\\u0069\\u0064",at={C_ID_STR_CAMEEL:rt("\\u0063\\u006F\\u006F\\u006B\\u0069\\u0064\\u0049\\u0064"),C_ID_STR:rt(ot)},st=function(){return q((function e(t){M(this,e),U(this,"config",void 0),U(this,"webviewCommonParams",{}),U(this,"webviewDynamicParams",{}),U(this,"pageEventSharePrams",{}),U(this,"canILog",!1),U(this,"waitQueue",[]),U(this,"count",0),U(this,"publicFields",{}),this.config=t,this.canILog=t.log||!1,this.publicFields=Je()}),[{key:"register",value:function(e){for(var t in e){var n=e[t];"function"==typeof n?this.webviewDynamicParams[t]=n:this.webviewCommonParams[t]=n}}},{key:"setPvParams",value:function(e,t){var n=t||{},i=n.params,r=A(n,k);switch(e){case"set":var o,a,s=r.start_time||Date.now();this.pageEventSharePrams=N({page_param:i||{},start_time:s,tab_page_id:null!=r&&r.page_name?r.page_name+s:""},r),null===(o=this.config)||void 0===o||null===(o=o.hooks)||void 0===o||null===(a=o.afterSetPageData)||void 0===a||a.call(o,this.getReportPublicFields());break;case"update":for(var u in t)"object"!==W(t[u])?this.pageEventSharePrams[u]=t[u]:this.pageEventSharePrams[u]=N(N({},this.pageEventSharePrams[u]),t[u]);break;case"end":this.pageEventSharePrams.page_param=N(N({},this.pageEventSharePrams.page_param),i),this.pageEventSharePrams=N(N({},this.pageEventSharePrams),{},{end_time:Date.now()},r)}}},{key:"getUnhandledTask",value:(t=D(R().mark((function e(){var t,n,i,r,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.waitQueue.length){e.next=13;break}case 2:if(!this.waitQueue.length){e.next=13;break}if(!(n=this.waitQueue.shift())){e.next=11;break}return e.next=7,this.getReportFields(n.fields,n.requestConfig,n.extendInfo);case 7:i=e.sent,r=i.able,o=A(i,P),r&&t.push(N({},o));case 11:e.next=2;break;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getReportFields",value:(e=D(R().mark((function e(t){var n,i,r,o,a,s,u,c,l,d,f,h,p,v,g,m,w,b,y,_,k,P,S,T,C,I,O,j=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.length>1&&void 0!==j[1]?j[1]:{},o=j.length>2?j[2]:void 0,a=this.getAllFields(t,o),"defined"===(null==o?void 0:o.from_event)||a.page_name||this.canILog&&Ge("请检查pv事件是否正常发送，当前事件page_name缺失：".concat(JSON.stringify(t)),"warn"),u=(s=r||{}).send_type,c=s.headers,l=void 0===c?{}:c,d=A(s,x),f=this.config||{},h=f.url,p=f.sm_device_id,v=f.brand,g=void 0===v?"shein":v,m=f.send_type,w=u||m||"fetch",b=a,e.prev=8,e.next=11,this.beforeReportHooks(a,N(N({},o||{}),{},{send_type:w}));case 11:if(void 0===(y=e.sent)){e.next=19;break}if("boolean"!=typeof y){e.next=18;break}if(y){e.next=16;break}return e.abrupt("return",{able:!1});case 16:e.next=19;break;case 18:"object"===W(y)&&(b=y);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),console.error("[@shein-aidc/basis-analytics]",e.t0);case 24:if(b=Xe(b),_=["fetch","ajax"].includes(w),k=_?{"DS-ACCESS-TOKEN":"4bc3a2dd3549401b817438eede7e78da","DS-ACCESS-SITE":g}:{access_token:"NHWgg6YpfUlGukgBju2QqwRgzs0QeqQP",ds_access_site:g},b[at.C_ID_STR]&&(P=b[at.C_ID_STR],S=Ye(P),T=S?P:Ze(P),k[_?"x-oest":"x_oest"]=T,Reflect.deleteProperty(b,at.C_ID_STR)),null!==(n=b)&&void 0!==n&&n.member_id&&(k[_?"Client-Member-Id":"client_member_id"]=b.member_id,Reflect.deleteProperty(b,"member_id")),null!==(i=b)&&void 0!==i&&i.ugid&&(k[_?"Client-Ugid":"client_ugid"]=b.ugid,Reflect.deleteProperty(b,"ugid")),C="string"==typeof h?h:null==h?void 0:h[w],I=N({url:C||"",headers:N(N({SmDeviceId:p||""},k),l),data:b},d),C){e.next=35;break}return this.canILog&&Ge("缺少上报的地址","error"),e.abrupt("return",{able:!1});case 35:if((O=["fetch","ajax","image","beacon"]).includes(w)){e.next=39;break}return this.canILog&&Ge("不存在: ".concat(w," 上报类型, 参考").concat(O.join()),"error"),e.abrupt("return",{able:!1});case 39:return e.abrupt("return",{able:!0,sendType:w,reqParams:I,extendInfo:o,requestConfig:r});case 40:case"end":return e.stop()}}),e,this,[[8,21]])}))),function(t){return e.apply(this,arguments)})},{key:"getAllFields",value:function(e,t){var n=this.getReportPublicFields(),i={};"defined"!==(null==t?void 0:t.from_event)&&(e.log_id||(this.count++,i.log_id=function(){var e;if("function"==typeof(null===(e=globalThis.crypto)||void 0===e?void 0:e.randomUUID))return crypto.randomUUID();var t=[];return t.push(Ve().toString(16).slice(0,8)),t.push(Ve().toString(16).slice(0,4)),t.push(Ve().toString(16).slice(0,4)),t.push(Ve().toString(16).slice(0,4)),t.push(Ve().toString(16).slice(0,12)),t.join("-")}(),i.seq=this.count));var r=new Date,o=N(N(N(N({},n),e||{}),i),{},{timestamp:r.getTime(),local_time:Qe("xxxx/xx/xx xx:xx:xx",r)});if(Object.keys(this.webviewDynamicParams).length)for(var a in this.webviewDynamicParams)o[a]=this.webviewDynamicParams[a]();return o}},{key:"getReportPublicFields",value:function(){var e=(this.config||{}).brand,t=void 0===e?"shein":e;return N(N(N({},this.publicFields),{},{home_site:t,referer:encodeURIComponent(window.location.href)},this.webviewCommonParams),this.pageEventSharePrams)}},{key:"beforeReportHooks",value:function(e,t){var n=this;return new Promise((function(i){var r;if("function"!=typeof(null===(r=n.config)||void 0===r||null===(r=r.hooks)||void 0===r?void 0:r.beforeReport))return i(void 0);try{var o,a,s;if("AsyncFunction"!==Object.prototype.toString.call(null===(o=n.config)||void 0===o||null===(o=o.hooks)||void 0===o?void 0:o.beforeReport).slice(8,-1))return i(null===(a=n.config)||void 0===a||null===(a=a.hooks)||void 0===a||null===(s=a.beforeReport)||void 0===s?void 0:s.call(a,e,t));var u,c,l=null;null===(u=n.config)||void 0===u||null===(u=u.hooks)||void 0===u||null===(c=u.beforeReport)||void 0===c||c.call(u,e,t).then((function(e){l&&clearTimeout(l),l=null,i(e)})),l=setTimeout((function(){l&&clearTimeout(l),l=null,i(void 0)}),5e3)}catch(d){console.error("[@shein-aidc/basis-analytics]",d),i(void 0)}}))}}]);var e,t}(),ut=function(e){if(!e)return"";try{return JSON.parse(e)}catch(t){return{}}},ct=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];"function"==typeof e&&e.apply(void 0,n)}catch(r){console.log("[analytics]: runFunction error",r)}},lt=function(e,t){var n=(Array.isArray(t)?t:[t]).map((function(e){return e.activity_name})).join(",");return"localhost"===location.hostname||location.hostname.startsWith("local-")||!!localStorage.getItem("__sa_debug")?/\?$/.test(e)?e+n:e+"?"+n:e},dt=function(){return q((function e(){M(this,e)}),[{key:"xhr",value:function(){return void 0!==globalThis.XMLHttpRequest?new XMLHttpRequest:null}},{key:"simpleFetch",value:function(e){if(ct(e.onRequest,e.data),"function"==typeof fetch)fetch(lt(e.url,e.data||{})).then((function(t){return ct(e.onResponse,t.status,e.data),t.status>=200&&t.status<300||304==t.status?t.text():Promise.reject(t)})).then((function(t){ct(e.success,ut(t))})).catch((function(t){ct(e.error,t)}));else{var t=this.xhr();if(!t)return!1;t.open(e.type||"GET",lt(e.url,e.data),!0),(e.success||e.error||e.onResponse)&&(t.onreadystatechange=function(){try{4==t.readyState&&(ct(e.onResponse,t.status,e.data),t.status>=200&&t.status<300||304==t.status?ct(e.success,ut(t.responseText)):ct(e.error,ut(t.responseText)),t.onreadystatechange=null,t.onload=null)}catch(n){t.onreadystatechange=null,t.onload=null}}),t.send(JSON.stringify(e.data))}}},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if("function"==typeof fetch){var t=e.type||"GET";e.type||(t=e.data?"POST":"GET");var n={"Content-Type":e.content_type||"application/json"};for(var i in e.headers){var r=e.headers[i];r&&(n[i]=r)}ct(e.onRequest,e.data),fetch(lt(e.url,e.data),{method:t,headers:n,body:JSON.stringify(e.data)}).then((function(t){return ct(e.onResponse,t.status,e.data),t.status>=200&&t.status<300||304==t.status?t.text():Promise.reject(t)})).then((function(t){ct(e.success,ut(t))})).catch((function(t){ct(e.error,t)}))}else this.ajax(e)}))},{key:"ajax",value:function(e){e.type||(e.type=e.data?"POST":"GET");var t=this.xhr();if(!t)return!1;t.open(e.type,lt(e.url,e.data),!0),ct(e.onRequest,e.data),(e.success||e.error||e.onResponse)&&(t.onreadystatechange=function(){try{4==t.readyState&&(ct(e.onResponse,t.status,e.data),t.status>=200&&t.status<300||304==t.status?ct(e.success,ut(t.responseText)):ct(e.error,ut(t.responseText)),t.onreadystatechange=null,t.onload=null)}catch(n){t.onreadystatechange=null,t.onload=null}}),t.setRequestHeader("Content-Type",e.content_type||"application/json");var n=e.headers;for(var i in n){var r=n[i];r&&t.setRequestHeader(i,r)}t.send(JSON.stringify(e.data))}},{key:"image",value:function(e){var t=e.headers,n=void 0===t?{}:t,i=[];for(var r in n||{}){var o=n[r];o&&i.push("".concat(r,"=").concat("SmDeviceId"==r?encodeURIComponent(o):o))}i.push("content=".concat(encodeURIComponent(JSON.stringify(e.data))));var a=e.url,s="".concat(a).concat(a.indexOf("?")>-1?"&":"?").concat(i.join("&"));e.success||e.error||e.onRequest||e.onResponse||"function"!=typeof Image?this.simpleFetch({url:s,success:e.success,error:e.error}):(new Image).src=s}},{key:"beacon",value:function(e){if(ct(e.onRequest,e.data),e.onResponse&&console.log("[analytics]: beacon发送不支持onResponse回调"),"object"===("undefined"==typeof navigator?"undefined":W(navigator))&&"function"==typeof navigator.sendBeacon){var t=new FormData;t.append("content",JSON.stringify(e.data));var n=e.headers,i=void 0===n?{}:n;for(var r in i||{}){var o=i[r];o&&t.append(r,o)}navigator.sendBeacon(lt(e.url,e.data),t)}else console.log("[analytics]: 当前环境不支持beacon发送, 兜底使用img"),this.image(e)}}])}(),ft=function(){return q((function e(t,n){M(this,e),U(this,"taskQueue",[]),U(this,"taskTimeout",null),U(this,"fetchFn",null),U(this,"fetchParam",null),U(this,"mergeConfig",null),this.mergeConfig=t.mergeConfig,this.fetchParam=t.baseFetchParams,this.fetchFn=n}),[{key:"mergeToReport",value:function(e){var t,n,i,r=this;if(this.taskQueue.push(e),this.taskQueue.length>=((null===(t=this.mergeConfig)||void 0===t?void 0:t.fillCount)||10))return null===(i=this.fetchFn)||void 0===i||i.call(this,N(N({},this.fetchParam),{},{data:this.taskQueue})),this.taskQueue=[],this.taskTimeout&&clearTimeout(this.taskTimeout),void(this.taskTimeout=null);this.taskTimeout||(this.taskTimeout=setTimeout((function(){var e;null===(e=r.fetchFn)||void 0===e||e.call(r,N(N({},r.fetchParam),{},{data:r.taskQueue})),r.taskQueue=[],clearTimeout(r.taskTimeout),r.taskTimeout=null}),(null===(n=this.mergeConfig)||void 0===n?void 0:n.fillCount)||100))}}])}(),ht=function(){return q((function e(t,n){M(this,e),U(this,"config",void 0),U(this,"wk",null),U(this,"_failWk",null),U(this,"_HTTP_",void 0),U(this,"definePlugins",{}),U(this,"mergeTaskURLMap",{}),this.config=t,this.definePlugins=n,this._HTTP_=new dt,this.initFailWorker()}),[{key:"report",value:function(e,t,n){var i,r=void 0!==(null==n?void 0:n.worker)?null==n?void 0:n.worker:null===(i=this.config)||void 0===i?void 0:i.worker;this.toReport(e,t,{workerReport:r,mergeConfig:null==n?void 0:n.mergeConfig})}},{key:"workerThreadReport",value:function(e,t,n){var i,r,o=this;if(null===(i=this.definePlugins)||void 0===i||!i.httpWorker||null===(r=this.definePlugins)||void 0===r||!r.httpWorker.length||"undefined"==typeof Worker)return"undefined"!=typeof Worker?Ge("请先注册worker插件","error"):Ge("worker 不可用","error"),void this.mainThreadReport(e,t,n);if(!this.wk){var a=new Blob([this.definePlugins.httpWorker[0]()],{type:"application/javascript"});this.wk=new Worker(URL.createObjectURL(a)),this.wk.addEventListener("message",(function(e){var t,n=null===(t=e.data)||void 0===t?void 0:t.code;if(400===n){var i,r=e.data.data,a=r.sendType,s=r.reqParams;Ge(e.data,"error"),null===(i=o._HTTP_)||void 0===i||i[a](s)}else if(500===n){var u,c=e.data.data,l=c.sendType,d=c.reqParams;!c.options&&(null===(u=o._failWk)||void 0===u||u.postMessage({type:"record",data:{sendType:l,reqParams:d}}))}else if(200===n){var f,h=e.data.data;if(null!=h&&h.primaryKey)null===(f=o._failWk)||void 0===f||f.postMessage({type:"delete",data:h.primaryKey})}}))}this.wk.postMessage({sendType:e,reqParams:t,options:n})}},{key:"mainThreadReport",value:function(e,t,n){var i,r=this,o=!!this._failWk&&"beacon"!=e;null===(i=this._HTTP_)||void 0===i||i[e](N(N({},t),{},{success:o?function(){var e;null!=n&&n.primaryKey&&(null===(e=r._failWk)||void 0===e||e.postMessage({type:"delete",data:n.primaryKey}))}:void 0,error:o?function(){var i;!n&&(null===(i=r._failWk)||void 0===i||i.postMessage({type:"record",data:{sendType:e,reqParams:t}}))}:void 0}))}},{key:"toReport",value:function(e,t,n){var i=this,r=n.workerReport,o=n.mergeConfig;if(o){var a=t.url,s="key_".concat(r?"worker":"");for(var u in o)s+="_".concat(u,"_").concat(o[u]);s+="_".concat(a);var c=t.data,l=A(t,S);this.mergeTaskURLMap[s]||(this.mergeTaskURLMap[s]=new ft({mergeConfig:o,baseFetchParams:l},r?function(t){i.workerThreadReport(e,t)}:function(t){i.mainThreadReport(e,t)})),this.mergeTaskURLMap[s].mergeToReport(c)}else r?this.workerThreadReport(e,t):this.mainThreadReport(e,t)}},{key:"initFailWorker",value:function(){var e,t,n=this;if(!this._failWk&&null!==(e=this.definePlugins)&&void 0!==e&&e.failRetryWorker&&null!==(t=this.definePlugins)&&void 0!==t&&t.failRetryWorker.length&&"undefined"!=typeof Worker){var i=this.definePlugins.failRetryWorker[0](),r=i.core,o=i.config,a=new Blob([r],{type:"application/javascript"});this._failWk=new Worker(URL.createObjectURL(a)),this._failWk.postMessage({type:"init",data:o}),this._failWk.postMessage({type:"retry"}),this._failWk.addEventListener("message",(function(e){var t,i=null===(t=e.data)||void 0===t?void 0:t.code;if(400===i)Ge(e.data,"error");else if(302===i){var r,o=null===(r=e.data)||void 0===r?void 0:r.data,a=o.primaryKey,s=o.value;if(!s)return;var u=s.sendType,c=s.reqParams;n.workerThreadReport(u,c,{primaryKey:a})}}))}}}])}(),pt=function(){return q((function e(){M(this,e),U(this,"canITrack",!1),U(this,"canILog",!1),U(this,"_RP_",void 0),U(this,"_DA_",void 0),U(this,"definePlugins",{}),U(this,"defineInstPlugins",{}),this.asyncImport()}),[{key:"asyncImport",value:function(){var e,t=this;if("undefined"!=typeof window&&window.sheinAnalytic202311){var n=window.sheinAnalytic202311,i=null===(e=window[n])||void 0===e?void 0:e._q;i&&i.length&&i.forEach((function(e){var n=e[0],i=e[1];"function"==typeof t[n]&&t[n].apply(t,O(i))})),window[n]._t=(new Date).getTime(),window[n]=this}}},{key:"usePlugins",value:function(e){var t=this;try{if(!e.length)return;var n=e.filter((function(e){return e.name}));if(n.length!=e.length)return Ge("存在插件格式不正确，请检查","warn");n.forEach((function(e){t.definePlugins[e.name]||(t.definePlugins[e.name]=[]),e.immediate?e.handle():t.definePlugins[e.name].push(e.handle)}))}catch(i){console.error("[@shein-aidc/basis-analytics]",i)}}},{key:"reportData",value:(t=D(R().mark((function e(t,n,i){var r,o,a,s,u,c,l;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._DA_.getReportFields(t||{},n||{},i);case 3:return r=e.sent,o=r.able,a=r.sendType,s=r.reqParams,o&&(c=(u=n||{}).worker,l=u.mergeConfig,this._RP_.report(a,s,{worker:c,mergeConfig:l})),e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(0),console.error("[@shein-aidc/basis-analytics]",e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e,n,i){return t.apply(this,arguments)})},{key:"init",value:function(e){if("undefined"!=typeof window){this.canILog=e.log||!1;var t=e.plugins,n=void 0===t?[]:t,i=A(e,T);this.usePlugins(n),this._DA_=new st(i),this._RP_=new ht(i,this.definePlugins),this.canITrack=!0}}},{key:"registerPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update";if(!this.canITrack)return this.canILog&&Ge("请先执行init方法","warn");this._DA_.setPvParams(t,e)}},{key:"register",value:function(e){if(!this.canITrack)return this.canILog&&Ge("请先执行init方法","warn");this._DA_.register(e)}},{key:"trackEvent",value:(e=D(R().mark((function e(t,n,i){var r,o,a,s,u,c,l,d,f,h,p,v,g,m=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canITrack){e.next=2;break}return e.abrupt("return",this.canILog&&Ge("请先执行init方法","warn"));case 2:try{n=JSON.parse(JSON.stringify(n||{}))}catch(w){n={},console.error("[@shein-aidc/basis-analytics]",w)}e.t0=t,e.next="page_view"===e.t0||"page_leave"===e.t0?6:"event"===e.t0?18:"defined"===e.t0?23:25;break;case 6:return o=(r=n||{}).name,a=r.params,s=A(r,C),c=(u=s||{})._page_params,l=u._event_params,this._DA_.setPvParams("page_view"==t?Object.keys(this._DA_.pageEventSharePrams).length?"update":"set":"end",N({page_param:a},c)),e.next=11,this.reportData(N({activity_name:o||t},l),Object.assign("page_leave"==t?{send_type:"beacon"}:{},i||{}),{from_event:t});case 11:if(d=e.sent,"page_view"!=t||!d){e.next=17;break}return e.next=15,this._DA_.getUnhandledTask();case 15:(f=e.sent)&&f.length&&f.forEach((function(e){var t=e.requestConfig||{},n=t.worker,i=t.mergeConfig;m._RP_.report(e.sendType,e.reqParams,{worker:n,mergeConfig:i})}));case 17:return e.abrupt("break",27);case 18:if(p=(h=n||{}).name,v=h.params,g=A(h,I),p){e.next=21;break}return e.abrupt("return",this.canILog&&Ge("事件名称不能为空"));case 21:return this.reportData(N({activity_name:p,activity_param:v||{}},g),i||{},{from_event:t}),e.abrupt("break",27);case 23:return this.reportData(n||{},i||{},{from_event:"defined"}),e.abrupt("break",27);case 25:return this.canILog&&Ge("方法名不存在，请阅读文档后使用","error"),e.abrupt("break",27);case 27:case"end":return e.stop()}}),e,this)}))),function(t,n,i){return e.apply(this,arguments)})}]);var e,t}(),vt=new pt,gt=function(){return _createClass2((function e(t){_classCallCheck2(this,e),_defineProperty2(this,"config",void 0),_defineProperty2(this,"initConfig",{}),_defineProperty2(this,"_SDK_",void 0),_defineProperty2(this,"gbPageInfo",{}),_defineProperty2(this,"applyFor","pwa"),console.info("[web-sa]: version: ".concat(y)),this._SDK_=vt,this.config=t}),[{key:"updatePageInfo",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.gbPageInfo=_objectSpread2(_objectSpread2({},n?{page_id:"",page_name:"",page_param:"",start_time:"",end_time:"",tab_page_id:""}:this.gbPageInfo),t),null!==(e=this.config)&&void 0!==e&&e.multichannel||(window.getSaPageInfo=this.gbPageInfo)}},{key:"saInitAction",value:function(e){this.initConfig=e||{};var t=new _(this._SDK_,this.config).initAction(e||{},{sendAction:this.sendAction.bind(this)}).applyFor;this.applyFor=t,this.updatePageInfo({},!0)}},{key:"sendPageEnter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=this.getPageInfo();this._SDK_.trackEvent("page_view",{name:"page_view",pv_info_type:"update",_page_params:n,_event_params:e},t)}},{key:"sendPageLeave",value:function(e,t){var n=this.getPageInfo(),i=e.end_time||Date.now();"h5"==this.applyFor&&(i=10==String(i).length?Number(i):Number(String(i).substring(0,10))),this._SDK_.trackEvent("page_leave",{name:"page_view",_page_params:n,_event_params:_objectSpread2(_objectSpread2({},e),{},{end_time:i})},t),this.updatePageInfo({end_time:i})}},{key:"sendDefaultEvent",value:function(e,t,n){var i=e||{},r=i.activity_name,o=i.activity_param,a=_objectWithoutProperties2(i,_excluded8);if(window.SaPageInfo){var s={};for(var u in window.SaPageInfo)["page_id","page_name","start_time","end_time"].includes(u)||(s[u]=window.SaPageInfo[u]);Object.keys(s).length&&(this._SDK_.registerPage(s),this.updatePageInfo(s))}(t.merge||t.mergeConfig)&&(n.mergeConfig=t.mergeConfig||{fillCount:10,fillTime:100}),this._SDK_.trackEvent("event",_objectSpread2({name:r,params:o||{}},a),n)}},{key:"defineCb",value:function(e){var t=e.filter((function(e){return"function"==typeof e}));if(t.length)return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach((function(e){e.apply(void 0,n)}))}}},{key:"setAction",value:function(e,t){var n=t;switch("object"==_typeof2(e)&&(n=e),e){case"init":var i,r;if(!Object.keys(n||{}).length)return void u("web-sa: init 指令参数不应该是空","error");if(Object.keys(this.initConfig).length)return u("web-sa: 请勿重复初始化！！！当前命令并未完成执行！","warn");this.saInitAction(n),null===(i=this.initConfig)||void 0===i||null===(i=i.config)||void 0===i||null===(i=i.hooks)||void 0===i||null===(r=i.onInit)||void 0===r||r.call(i,JSON.parse(JSON.stringify(n)));break;case"setPageData":var o,a,s,c;if(!(n=_objectSpread2(_objectSpread2({},this.getPageInfo()),{},{referer:encodeURIComponent(window.location.href)},n)).page_name)return void u("web-sa: setPageData 指令参数 page_name 不能为空","error");var l=(null===(o=n)||void 0===o?void 0:o.start_time)||Date.now();"h5"==this.applyFor&&(l=10==String(l).length?Number(l):Number(String(l).substring(0,10))),n.start_time=l,n.tab_page_id=null!==(a=n)&&void 0!==a&&a.page_name?n.page_name+l:"",this._SDK_.registerPage(n||{},"set"),this.updatePageInfo(n||{},!0),null===(s=this.initConfig)||void 0===s||null===(s=s.config)||void 0===s||null===(s=s.hooks)||void 0===s||null===(c=s.onSetPageData)||void 0===c||c.call(s,n)}}},{key:"sendAction",value:function(e,t,n){var i,r,o,a,s,u,c,l=t||{},d=n||{};"object"==_typeof2(e)&&(l=e,d=t||{});var f="object"==_typeof2(e)&&(null==e?void 0:e._url)||(null===(i=l)||void 0===i?void 0:i._url)||(null===(r=d)||void 0===r?void 0:r._url)||null;l&&l._url&&delete l._url,d&&d._url&&delete d._url;var h={onRequest:this.defineCb([null===(o=d)||void 0===o?void 0:o.onRequest,null===(a=this.initConfig)||void 0===a||null===(a=a.config)||void 0===a||null===(a=a.hooks)||void 0===a?void 0:a.onRequest]),onResponse:this.defineCb([null===(s=d)||void 0===s?void 0:s.onResponse,null===(u=this.initConfig)||void 0===u||null===(u=u.config)||void 0===u||null===(u=u.hooks)||void 0===u?void 0:u.onResponse])};f&&(h.url=f),h.send_type=d.beacon?"beacon":d.image?"image":"pageLeave"!=e?"fetch":"beacon";var p=[{key1:"ds_from_terminal",key2:"Ds-from-terminal",value:this.applyFor}];switch(null!==(c=this.config)&&void 0!==c&&c.multichannel&&p.push({key1:"content_version",key2:"Content-Version",value:"1"}),window.__CLIENT_IPADDR__&&p.push({key1:"client_ipaddr",key2:"Client-Ipaddr",value:window.__CLIENT_IPADDR__}),window.__CLIENT_IPVER__&&p.push({key1:"client_ipver",key2:"Client-Ipver",value:window.__CLIENT_IPVER__}),h.headers=p.reduce((function(e,t){return["image","beacon"].includes(h.send_type)?e[t.key1]=t.value:e[t.key2]=t.value,e}),{}),e){case"pageEnter":this.sendPageEnter(l,h);break;case"pageLeave":this.sendPageLeave(l,h);break;default:this.sendDefaultEvent(l,d,h)}}},{key:"definedAction",value:function(e,t,n){var i,r,o={"Ds-from-terminal":this.applyFor};switch(this.applyFor){case"h5":"sdk_error"===(null==t?void 0:t.error_type)&&(o["X-Report-Source"]="h5-client-monitor");break;case"pwa":case"pc":"script_error"===(null==t?void 0:t.error_type)&&(o["X-Report-Source"]="pc"==this.applyFor?"shein_w":"shein_PWA_new")}var a={url:e,send_type:"fetch",headers:_objectSpread2(_objectSpread2({},o),null==n?void 0:n.headers),onRequest:this.defineCb([null==n?void 0:n.onRequest,null===(i=this.initConfig)||void 0===i||null===(i=i.config)||void 0===i||null===(i=i.hooks)||void 0===i?void 0:i.onRequest]),onResponse:this.defineCb([null==n?void 0:n.onResponse,null===(r=this.initConfig)||void 0===r||null===(r=r.config)||void 0===r||null===(r=r.hooks)||void 0===r?void 0:r.onResponse])};null!=n&&n.jsonArray&&(a.mergeConfig={fillTime:1}),this._SDK_.trackEvent("defined",t,a)}},{key:"getPageInfo",value:function(){return this.gbPageInfo}}])}(),mt=void 0!==window.web_sa_fix||(null===(t=window.sa)||void 0===t?void 0:t._private_load),wt=function(e){var t=[bt];window.analysisBeforeInterceptor&&window.analysisBeforeInterceptor.forEach((function(e){t.unshift(e)}));for(var n=Promise.resolve(e);t.length;)n=n.then(t.shift());return n},bt=function(e){var t=e.data,n=e.reportConfig,r=t||{},a=r.member_id,s=r.start_time,u=r.local_time,c=r.device_type,l=r.environment,d=n||{},f=d.send_type,h=d.from_event,p=t[o.C_ID_STR];if(mt){if("defined"==f)return Promise.resolve({data:!1});if(!((p?parseInt(String(p).slice(-8),16)%100:0)>=95))return Promise.resolve({data:!1})}var v={data:t,type:"bi",platform:c,environment:l,member_id:a,cookie:p||"",start_up_timestamp:s,start_up_time:u,is_h5:!0},g="defined"!==h;if(g||!g&&1==(null==t?void 0:t.auto_track)){null!=t&&t.auto_track&&delete t.auto_track;var m=window.localStorage.getItem("autoTrack");if(m)try{!function(e,t,n){try{var i=window.localStorage.getItem("autoReportTepNum")||0;window.localStorage.setItem("autoReportTepNum",String(Number(i)+1));var r=window.gbCommonInfo&&window.gbCommonInfo.langPath||"",o=r?r.startsWith("/")?r:"/".concat(r):r,a=[window.gbCommonInfo&&window.gbCommonInfo.origin_site||[location.protocol,"//",location.host,o].join(""),"/shein-tep"].join(""),s="".concat(a,"/tep-detect-tob/event/upload");t.referer_expect=encodeURIComponent(window.location.href);var u={cases:e.cases,session:e.tokenId,group_list:e.groupList,raw:t};if(n&&n.beacon&&navigator&&"function"==typeof navigator.sendBeacon){var c=e||{},l=c.cases,d=c.tokenId,f=new FormData;return d&&f.append("session",d),l&&l.length&&l.forEach((function(e){f.append("cases",e)})),f.append("group_list",JSON.stringify(e.groupList)),f.append("raw",JSON.stringify(t)),navigator.sendBeacon(s+"/form",f)}fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})}catch(h){console.error(h)}}(JSON.parse(m),JSON.parse(JSON.stringify(t)),{beacon:"beacon"==f})}catch(y){console.log("[web-sa]: ETP校验平台上报失败",y)}}if(g&&["debug","gray"].includes(l)){var w=i("\\u0068\\u0074\\u0074\\u0070\\u0073\\u003A\\u002F\\u002F\\u0062\\u0075\\u0072\\u0069\\u0065\\u0064\\u002D\\u0061\\u0064\\u006D\\u0069\\u006E\\u002D\\u0061\\u0070\\u0069\\u002D\\u0067\\u0072\\u0061\\u0079\\u0030\\u0033\\u002E\\u0062\\u0069\\u007A\\u002E\\u0073\\u0068\\u0065\\u0069\\u006E\\u0063\\u006F\\u0072\\u0070\\u002E\\u0063\\u006E\\u002F\\u0073\\u0068\\u0065\\u0069\\u006E\\u002F\\u0061\\u006E\\u0061\\u006C\\u0079\\u007A\\u0065");if("beacon"==f&&navigator&&"function"==typeof navigator.sendBeacon){var b=new Blob([JSON.stringify(v)],{type:"application/json; charset=UTF-8"});return navigator.sendBeacon(w,b)}fetch(w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})}return Promise.resolve({data:t,reportConfig:n})},yt=(et={multichannel:mt,hooks:{beforeReport:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){wt({data:e,reportConfig:t}).then((function(e){n(e.data)}))}))}}},tt=new gt(et),function(e,t,n,i){try{switch(e){case"set":tt.setAction(t,n);break;case"get":return tt.getPageInfo();case"send":tt.sendAction(t,n,i);break;case"error":case"performance":tt.definedAction(t,n,i);break;case"wingError":n&&(n.device_type="h5"),tt.definedAction(t,n,i)}}catch(r){u("sdk-web-fix: ".concat(r),"error")}});if(null!==(n=window.sa)&&void 0!==n&&n._private_load&&console.log("%c 🔥🔥🔥 sa 埋点重复引入，请检查当前页面资源的引入 \n","border-radius: 3px; background:yellow;color:black;font-size:14px"),console.log("%c 🚀🚀新版的SA埋点SDK \n","border-radius: 3px; background:green;color:white;font-size:12px"),mt){var _t,kt;if(null!==(_t=window.web_sa_fix)&&void 0!==_t&&_t.waitingCommands&&(null===(kt=window.web_sa_fix)||void 0===kt||null===(kt=kt.waitingCommands)||void 0===kt?void 0:kt.length)>0)for(var Pt=0;Pt<window.web_sa_fix.waitingCommands.length;Pt++)yt.apply(yt,window.web_sa_fix.waitingCommands[Pt]);window.web_sa_fix=yt}else{if(void 0!==window.sa&&window.sa.waitingCommands&&window.sa.waitingCommands.length>0)for(var xt=0;xt<window.sa.waitingCommands.length;xt++)yt.apply(yt,window.sa.waitingCommands[xt]);window.sa=window.sheinAnalysis=yt,window.sa._private_load=!0}}));
